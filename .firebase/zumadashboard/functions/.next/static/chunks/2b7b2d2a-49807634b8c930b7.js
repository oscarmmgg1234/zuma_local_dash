(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{9299:function(module,__unused_webpack_exports,__webpack_require__){var process=__webpack_require__(3454),Buffer=__webpack_require__(1876).Buffer;!function(o,l){module.exports=l()}(globalThis,()=>(()=>{"use strict";var __webpack_modules__=[,(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.VerbosityLevel=l.Util=l.UnknownErrorException=l.UnexpectedResponseException=l.UNSUPPORTED_FEATURES=l.TextRenderingMode=l.StreamType=l.RenderingIntentFlag=l.PermissionFlag=l.PasswordResponses=l.PasswordException=l.PageActionEventType=l.OPS=l.MissingPDFException=l.LINE_FACTOR=l.LINE_DESCENT_FACTOR=l.InvalidPDFException=l.ImageKind=l.IDENTITY_MATRIX=l.FormatError=l.FontType=l.FeatureTest=l.FONT_IDENTITY_MATRIX=l.DocumentActionEventType=l.CMapCompressionType=l.BaseException=l.AnnotationType=l.AnnotationStateModelType=l.AnnotationReviewState=l.AnnotationReplyType=l.AnnotationMode=l.AnnotationMarkedState=l.AnnotationFlag=l.AnnotationFieldFlag=l.AnnotationEditorType=l.AnnotationEditorPrefix=l.AnnotationEditorParamsType=l.AnnotationBorderStyleType=l.AnnotationActionEventType=l.AbortException=void 0,l.arrayByteLength=tR,l.arraysToBytes=tF,l.assert=tf,l.bytesToString=tk,l.createPromiseCapability=tJ,l.createValidAbsoluteUrl=tb,l.escapeString=tG,l.getModificationDate=tK,l.getVerbosityLevel=tc,l.info=tu,l.isArrayBuffer=tX,l.isArrayEqual=tY,l.isAscii=tz,l.objectFromMap=tD,l.objectSize=tI,l.setVerbosityLevel=td,l.shadow=tA,l.string32=tO,l.stringToBytes=tw,l.stringToPDFString=tW,l.stringToUTF16BEString=tH,l.stringToUTF8String=tV,l.unreachable=tg,l.utf8StringToString=t$,l.warn=tp,_(2);let S=[1,0,0,1,0,0];l.IDENTITY_MATRIX=S;let E=[.001,0,0,.001,0,0];l.FONT_IDENTITY_MATRIX=E;let T=1.35;l.LINE_FACTOR=T;let P=.35;l.LINE_DESCENT_FACTOR=P;let M={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};l.RenderingIntentFlag=M;let F={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};l.AnnotationMode=F;let O="pdfjs_internal_editor_";l.AnnotationEditorPrefix=O;let I={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};l.AnnotationEditorType=I;let D={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};l.AnnotationEditorParamsType=D;let L={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};l.PermissionFlag=L;let N={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};l.TextRenderingMode=N;let U={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};l.ImageKind=U;let W={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};l.AnnotationType=W;let z={MARKED:"Marked",REVIEW:"Review"};l.AnnotationStateModelType=z;let H={MARKED:"Marked",UNMARKED:"Unmarked"};l.AnnotationMarkedState=H;let V={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};l.AnnotationReviewState=V;let $={GROUP:"Group",REPLY:"R"};l.AnnotationReplyType=$;let Y={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};l.AnnotationFlag=Y;let K={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};l.AnnotationFieldFlag=K;let J={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};l.AnnotationBorderStyleType=J;let Q={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};l.AnnotationActionEventType=Q;let Z={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};l.DocumentActionEventType=Z;let tt={O:"PageOpen",C:"PageClose"};l.PageActionEventType=tt;let te={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};l.StreamType=te;let ti={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};l.FontType=ti;let tr={ERRORS:0,WARNINGS:1,INFOS:5};l.VerbosityLevel=tr;let ta={NONE:0,BINARY:1,STREAM:2};l.CMapCompressionType=ta;let tn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};l.OPS=tn;let to={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};l.UNSUPPORTED_FEATURES=to;let tl={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};l.PasswordResponses=tl;let th=tr.WARNINGS;function td(o){Number.isInteger(o)&&(th=o)}function tc(){return th}function tu(o){th>=tr.INFOS&&console.log(`Info: ${o}`)}function tp(o){th>=tr.WARNINGS&&console.log(`Warning: ${o}`)}function tg(o){throw Error(o)}function tf(o,l){o||tg(l)}function tm(o){if(!o)return!1;switch(o.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function tb(o,l=null,_=null){if(!o)return null;try{if(_&&"string"==typeof o){if(_.addDefaultProtocol&&o.startsWith("www.")){let l=o.match(/\./g);l&&l.length>=2&&(o=`http://${o}`)}if(_.tryConvertEncoding)try{o=tV(o)}catch(o){}}let S=l?new URL(o,l):new URL(o);if(tm(S))return S}catch(o){}return null}function tA(o,l,_){return Object.defineProperty(o,l,{value:_,enumerable:!0,configurable:!0,writable:!1}),_}let tv=function(){function o(l,_){this.constructor===o&&tg("Cannot initialize BaseException."),this.message=l,this.name=_}return o.prototype=Error(),o.constructor=o,o}();l.BaseException=tv;class t_ extends tv{constructor(o,l){super(o,"PasswordException"),this.code=l}}l.PasswordException=t_;class tS extends tv{constructor(o,l){super(o,"UnknownErrorException"),this.details=l}}l.UnknownErrorException=tS;class tE extends tv{constructor(o){super(o,"InvalidPDFException")}}l.InvalidPDFException=tE;class tC extends tv{constructor(o){super(o,"MissingPDFException")}}l.MissingPDFException=tC;class tT extends tv{constructor(o,l){super(o,"UnexpectedResponseException"),this.status=l}}l.UnexpectedResponseException=tT;class tP extends tv{constructor(o){super(o,"FormatError")}}l.FormatError=tP;class tM extends tv{constructor(o){super(o,"AbortException")}}function tk(o){("object"!=typeof o||null===o||void 0===o.length)&&tg("Invalid argument for bytesToString");let l=o.length,_=8192;if(l<_)return String.fromCharCode.apply(null,o);let S=[];for(let E=0;E<l;E+=_){let T=Math.min(E+_,l),P=o.subarray(E,T);S.push(String.fromCharCode.apply(null,P))}return S.join("")}function tw(o){"string"!=typeof o&&tg("Invalid argument for stringToBytes");let l=o.length,_=new Uint8Array(l);for(let S=0;S<l;++S)_[S]=255&o.charCodeAt(S);return _}function tR(o){return void 0!==o.length?o.length:void 0!==o.byteLength?o.byteLength:void tg("Invalid argument for arrayByteLength")}function tF(o){let l=o.length;if(1===l&&o[0]instanceof Uint8Array)return o[0];let _=0;for(let S=0;S<l;S++)_+=tR(o[S]);let S=0,E=new Uint8Array(_);for(let _=0;_<l;_++){let l=o[_];l instanceof Uint8Array||(l="string"==typeof l?tw(l):new Uint8Array(l));let T=l.byteLength;E.set(l,S),S+=T}return E}function tO(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o)}function tI(o){return Object.keys(o).length}function tD(o){let l=Object.create(null);for(let[_,S]of o)l[_]=S;return l}function tL(){let o=new Uint8Array(4);o[0]=1;let l=new Uint32Array(o.buffer,0,1);return 1===l[0]}function tN(){try{return Function(""),!0}catch(o){return!1}}l.AbortException=tM;class tj{static get isLittleEndian(){return tA(this,"isLittleEndian",tL())}static get isEvalSupported(){return tA(this,"isEvalSupported",tN())}static get isOffscreenCanvasSupported(){return tA(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}}l.FeatureTest=tj;let tU=[...Array(256).keys()].map(o=>o.toString(16).padStart(2,"0"));class tB{static makeHexColor(o,l,_){return`#${tU[o]}${tU[l]}${tU[_]}`}static scaleMinMax(o,l){let _;o[0]?(o[0]<0&&(_=l[0],l[0]=l[1],l[1]=_),l[0]*=o[0],l[1]*=o[0],o[3]<0&&(_=l[2],l[2]=l[3],l[3]=_),l[2]*=o[3],l[3]*=o[3]):(_=l[0],l[0]=l[2],l[2]=_,_=l[1],l[1]=l[3],l[3]=_,o[1]<0&&(_=l[2],l[2]=l[3],l[3]=_),l[2]*=o[1],l[3]*=o[1],o[2]<0&&(_=l[0],l[0]=l[1],l[1]=_),l[0]*=o[2],l[1]*=o[2]),l[0]+=o[4],l[1]+=o[4],l[2]+=o[5],l[3]+=o[5]}static transform(o,l){return[o[0]*l[0]+o[2]*l[1],o[1]*l[0]+o[3]*l[1],o[0]*l[2]+o[2]*l[3],o[1]*l[2]+o[3]*l[3],o[0]*l[4]+o[2]*l[5]+o[4],o[1]*l[4]+o[3]*l[5]+o[5]]}static applyTransform(o,l){let _=o[0]*l[0]+o[1]*l[2]+l[4],S=o[0]*l[1]+o[1]*l[3]+l[5];return[_,S]}static applyInverseTransform(o,l){let _=l[0]*l[3]-l[1]*l[2],S=(o[0]*l[3]-o[1]*l[2]+l[2]*l[5]-l[4]*l[3])/_,E=(-o[0]*l[1]+o[1]*l[0]+l[4]*l[1]-l[5]*l[0])/_;return[S,E]}static getAxialAlignedBoundingBox(o,l){let _=tB.applyTransform(o,l),S=tB.applyTransform(o.slice(2,4),l),E=tB.applyTransform([o[0],o[3]],l),T=tB.applyTransform([o[2],o[1]],l);return[Math.min(_[0],S[0],E[0],T[0]),Math.min(_[1],S[1],E[1],T[1]),Math.max(_[0],S[0],E[0],T[0]),Math.max(_[1],S[1],E[1],T[1])]}static inverseTransform(o){let l=o[0]*o[3]-o[1]*o[2];return[o[3]/l,-o[1]/l,-o[2]/l,o[0]/l,(o[2]*o[5]-o[4]*o[3])/l,(o[4]*o[1]-o[5]*o[0])/l]}static apply3dTransform(o,l){return[o[0]*l[0]+o[1]*l[1]+o[2]*l[2],o[3]*l[0]+o[4]*l[1]+o[5]*l[2],o[6]*l[0]+o[7]*l[1]+o[8]*l[2]]}static singularValueDecompose2dScale(o){let l=[o[0],o[2],o[1],o[3]],_=o[0]*l[0]+o[1]*l[2],S=o[0]*l[1]+o[1]*l[3],E=o[2]*l[0]+o[3]*l[2],T=o[2]*l[1]+o[3]*l[3],P=(_+T)/2,M=Math.sqrt((_+T)**2-4*(_*T-E*S))/2,F=P+M||1,O=P-M||1;return[Math.sqrt(F),Math.sqrt(O)]}static normalizeRect(o){let l=o.slice(0);return o[0]>o[2]&&(l[0]=o[2],l[2]=o[0]),o[1]>o[3]&&(l[1]=o[3],l[3]=o[1]),l}static intersect(o,l){let _=Math.max(Math.min(o[0],o[2]),Math.min(l[0],l[2])),S=Math.min(Math.max(o[0],o[2]),Math.max(l[0],l[2]));if(_>S)return null;let E=Math.max(Math.min(o[1],o[3]),Math.min(l[1],l[3])),T=Math.min(Math.max(o[1],o[3]),Math.max(l[1],l[3]));return E>T?null:[_,E,S,T]}static bezierBoundingBox(o,l,_,S,E,T,P,M){let F,O,I,D,L,N,U,W;let z=[],H=[[],[]];for(let H=0;H<2;++H){if(0===H?(O=6*o-12*_+6*E,F=-3*o+9*_-9*E+3*P,I=3*_-3*o):(O=6*l-12*S+6*T,F=-3*l+9*S-9*T+3*M,I=3*S-3*l),1e-12>Math.abs(F)){if(1e-12>Math.abs(O))continue;0<(D=-I/O)&&D<1&&z.push(D);continue}W=Math.sqrt(U=O*O-4*I*F),!(U<0)&&(0<(L=(-O+W)/(2*F))&&L<1&&z.push(L),0<(N=(-O-W)/(2*F))&&N<1&&z.push(N))}let V=z.length,$,Y=V;for(;V--;)$=1-(D=z[V]),H[0][V]=$*$*$*o+3*$*$*D*_+3*$*D*D*E+D*D*D*P,H[1][V]=$*$*$*l+3*$*$*D*S+3*$*D*D*T+D*D*D*M;return H[0][Y]=o,H[1][Y]=l,H[0][Y+1]=P,H[1][Y+1]=M,H[0].length=H[1].length=Y+2,[Math.min(...H[0]),Math.min(...H[1]),Math.max(...H[0]),Math.max(...H[1])]}}l.Util=tB;let tq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function tW(o){if(o[0]>="\xef"){let l;if("\xfe"===o[0]&&"\xff"===o[1]?l="utf-16be":"\xff"===o[0]&&"\xfe"===o[1]?l="utf-16le":"\xef"===o[0]&&"\xbb"===o[1]&&"\xbf"===o[2]&&(l="utf-8"),l)try{let _=new TextDecoder(l,{fatal:!0}),S=tw(o);return _.decode(S)}catch(o){tp(`stringToPDFString: "${o}".`)}}let l=[];for(let _=0,S=o.length;_<S;_++){let S=tq[o.charCodeAt(_)];l.push(S?String.fromCharCode(S):o.charAt(_))}return l.join("")}function tG(o){return o.replace(/([()\\\n\r])/g,o=>"\n"===o?"\\n":"\r"===o?"\\r":`\\${o}`)}function tz(o){return/^[\x00-\x7F]*$/.test(o)}function tH(o){let l=["\xfe\xff"];for(let _=0,S=o.length;_<S;_++){let S=o.charCodeAt(_);l.push(String.fromCharCode(S>>8&255),String.fromCharCode(255&S))}return l.join("")}function tV(o){return decodeURIComponent(escape(o))}function t$(o){return unescape(encodeURIComponent(o))}function tX(o){return"object"==typeof o&&null!==o&&void 0!==o.byteLength}function tY(o,l){if(o.length!==l.length)return!1;for(let _=0,S=o.length;_<S;_++)if(o[_]!==l[_])return!1;return!0}function tK(o=new Date){let l=[o.getUTCFullYear().toString(),(o.getUTCMonth()+1).toString().padStart(2,"0"),o.getUTCDate().toString().padStart(2,"0"),o.getUTCHours().toString().padStart(2,"0"),o.getUTCMinutes().toString().padStart(2,"0"),o.getUTCSeconds().toString().padStart(2,"0")];return l.join("")}function tJ(){let o=Object.create(null),l=!1;return Object.defineProperty(o,"settled",{get:()=>l}),o.promise=new Promise(function(_,S){o.resolve=function(o){l=!0,_(o)},o.reject=function(o){l=!0,S(o)}}),o}},(o,l,_)=>{_(3)},(o,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isNodeJS=void 0;let _="object"==typeof process&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type);l.isNodeJS=_},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{let createPDFNetworkStream;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){let{NodeCanvasFactory,NodeCMapReaderFactory,NodeStandardFontDataFactory}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}function setPDFNetworkStreamFactory(o){createPDFNetworkStream=o}function getDocument(o){let l;let _=new PDFDocumentLoadingTask;if("string"==typeof o||o instanceof URL)l={url:o};else if((0,_util.isArrayBuffer)(o))l={data:o};else if(o instanceof PDFDataRangeTransport)l={range:o};else{if("object"!=typeof o)throw Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!o.url&&!o.data&&!o.range)throw Error("Invalid parameter object: need either .data, .range or .url");l=o}let S=Object.create(null),E=null,T=null;for(let o in l){let _=l[o];switch(o){case"url":if("undefined"!=typeof window)try{S[o]=new URL(_,window.location).href;continue}catch(o){(0,_util.warn)(`Cannot create valid URL: "${o}".`)}else if("string"==typeof _||_ instanceof URL){S[o]=_.toString();continue}throw Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":E=_;continue;case"worker":T=_;continue;case"data":if(_is_node.isNodeJS&&void 0!==Buffer&&_ instanceof Buffer)S[o]=new Uint8Array(_);else if(_ instanceof Uint8Array)break;else if("string"==typeof _)S[o]=(0,_util.stringToBytes)(_);else if("object"!=typeof _||null===_||isNaN(_.length)){if((0,_util.isArrayBuffer)(_))S[o]=new Uint8Array(_);else throw Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}else S[o]=new Uint8Array(_);continue}S[o]=_}if(S.CMapReaderFactory=S.CMapReaderFactory||DefaultCMapReaderFactory,S.StandardFontDataFactory=S.StandardFontDataFactory||DefaultStandardFontDataFactory,S.ignoreErrors=!0!==S.stopAtErrors,S.fontExtraProperties=!0===S.fontExtraProperties,S.pdfBug=!0===S.pdfBug,S.enableXfa=!0===S.enableXfa,(!Number.isInteger(S.rangeChunkSize)||S.rangeChunkSize<1)&&(S.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof S.docBaseUrl||(0,_display_utils.isDataScheme)(S.docBaseUrl))&&(S.docBaseUrl=null),(!Number.isInteger(S.maxImageSize)||S.maxImageSize<-1)&&(S.maxImageSize=-1),"string"!=typeof S.cMapUrl&&(S.cMapUrl=null),"string"!=typeof S.standardFontDataUrl&&(S.standardFontDataUrl=null),"boolean"!=typeof S.useWorkerFetch&&(S.useWorkerFetch=S.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&S.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof S.isEvalSupported&&(S.isEvalSupported=!0),"boolean"!=typeof S.disableFontFace&&(S.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof S.useSystemFonts&&(S.useSystemFonts=!_is_node.isNodeJS&&!S.disableFontFace),("object"!=typeof S.ownerDocument||null===S.ownerDocument)&&(S.ownerDocument=globalThis.document),"boolean"!=typeof S.disableRange&&(S.disableRange=!1),"boolean"!=typeof S.disableStream&&(S.disableStream=!1),"boolean"!=typeof S.disableAutoFetch&&(S.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(S.verbosity),!T){let o={verbosity:S.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};T=o.port?PDFWorker.fromPort(o):new PDFWorker(o),_._worker=T}let P=_.docId;return T.promise.then(function(){if(_.destroyed)throw Error("Loading aborted");let o=_fetchDocument(T,S,E,P),l=new Promise(function(o){let l;E?l=new _transport_stream.PDFDataTransportStream({length:S.length,initialData:S.initialData,progressiveDone:S.progressiveDone,contentDispositionFilename:S.contentDispositionFilename,disableRange:S.disableRange,disableStream:S.disableStream},E):S.data||(l=createPDFNetworkStream({url:S.url,length:S.length,httpHeaders:S.httpHeaders,withCredentials:S.withCredentials,rangeChunkSize:S.rangeChunkSize,disableRange:S.disableRange,disableStream:S.disableStream})),o(l)});return Promise.all([o,l]).then(function([o,l]){if(_.destroyed)throw Error("Loading aborted");let E=new _message_handler.MessageHandler(P,o,T.port),M=new WorkerTransport(E,_,l,S);_._transport=M,E.send("Ready",null)})}).catch(_._capability.reject),_}async function _fetchDocument(o,l,_,S){if(o.destroyed)throw Error("Worker was destroyed");_&&(l.length=_.length,l.initialData=_.initialData,l.progressiveDone=_.progressiveDone,l.contentDispositionFilename=_.contentDispositionFilename);let E=await o.messageHandler.sendWithPromise("GetDocRequest",{docId:S,apiVersion:"2.16.105",source:{data:l.data,url:l.url,password:l.password,disableAutoFetch:l.disableAutoFetch,rangeChunkSize:l.rangeChunkSize,length:l.length},maxImageSize:l.maxImageSize,disableFontFace:l.disableFontFace,docBaseUrl:l.docBaseUrl,ignoreErrors:l.ignoreErrors,isEvalSupported:l.isEvalSupported,fontExtraProperties:l.fontExtraProperties,enableXfa:l.enableXfa,useSystemFonts:l.useSystemFonts,cMapUrl:l.useWorkerFetch?l.cMapUrl:null,standardFontDataUrl:l.useWorkerFetch?l.standardFontDataUrl:null});if(l.data&&(l.data=null),o.destroyed)throw Error("Worker was destroyed");return E}class PDFDocumentLoadingTask{static #t=0;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await this._transport?.destroy(),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,l,_=!1,S=null){this.length=o,this.initialData=l,this.progressiveDone=_,this.contentDispositionFilename=S,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,l){for(let _ of this._rangeListeners)_(o,l)}onDataProgress(o,l){this._readyCapability.promise.then(()=>{for(let _ of this._progressListeners)_(o,l)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(let l of this._progressiveReadListeners)l(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,l){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,l){this._pdfInfo=o,this._transport=l,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,l,_,S,E=!1){this._pageIndex=o,this._pageInfo=l,this._ownerDocument=S,this._transport=_,this._stats=E?new _display_utils.StatTimer:null,this._pdfBug=E,this.commonObjs=_.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:l=this.rotate,offsetX:_=0,offsetY:S=0,dontFlip:E=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:l,offsetX:_,offsetY:S,dontFlip:E})}getAnnotations({intent:o="display"}={}){let l=this._transport.getRenderingIntent(o),_=this._annotationPromises.get(l.cacheKey);return _||(_=this._transport.getAnnotations(this._pageIndex,l.renderingIntent),this._annotationPromises.set(l.cacheKey,_),_=_.then(o=>{for(let l of o)void 0!==l.titleObj&&Object.defineProperty(l,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),l.titleObj.str)}),void 0!==l.contentsObj&&Object.defineProperty(l,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),l.contentsObj.str)});return o})),_}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:o,viewport:l,intent:_="display",annotationMode:S=_util.AnnotationMode.ENABLE,transform:E=null,imageLayer:T=null,canvasFactory:P=null,background:M=null,optionalContentConfigPromise:F=null,annotationCanvasMap:O=null,pageColors:I=null,printAnnotationStorage:D=null}){arguments[0]?.renderInteractiveForms!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&S===_util.AnnotationMode.ENABLE&&(S=_util.AnnotationMode.ENABLE_FORMS)),arguments[0]?.includeAnnotationStorage!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&S===_util.AnnotationMode.ENABLE&&(S=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");let L=this._transport.getRenderingIntent(_,S,D);this.pendingCleanup=!1,F||(F=this._transport.getOptionalContentConfig());let N=this._intentStates.get(L.cacheKey);N||(N=Object.create(null),this._intentStates.set(L.cacheKey,N)),N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null);let U=P||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),W=!!(L.renderingIntent&_util.RenderingIntentFlag.PRINT);N.displayReadyCapability||(N.displayReadyCapability=(0,_util.createPromiseCapability)(),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(L));let z=o=>{N.renderTasks.delete(H),(this.cleanupAfterRender||W)&&(this.pendingCleanup=!0),this._tryCleanup(),o?(H.capability.reject(o),this._abortOperatorList({intentState:N,reason:o instanceof Error?o:Error(o)})):H.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},H=new InternalRenderTask({callback:z,params:{canvasContext:o,viewport:l,transform:E,imageLayer:T,background:M},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:O,operatorList:N.operatorList,pageIndex:this._pageIndex,canvasFactory:U,useRequestAnimationFrame:!W,pdfBug:this._pdfBug,pageColors:I});(N.renderTasks||=new Set).add(H);let V=H.task;return Promise.all([N.displayReadyCapability.promise,F]).then(([o,l])=>{if(this.pendingCleanup){z();return}this._stats&&this._stats.time("Rendering"),H.initializeGraphics({transparency:o,optionalContentConfig:l}),H.operatorListChanged()}).catch(z),V}getOperatorList({intent:o="display",annotationMode:l=_util.AnnotationMode.ENABLE,printAnnotationStorage:_=null}={}){let S;function E(){P.operatorList.lastChunk&&(P.opListReadCapability.resolve(P.operatorList),P.renderTasks.delete(S))}let T=this._transport.getRenderingIntent(o,l,_,!0),P=this._intentStates.get(T.cacheKey);return P||(P=Object.create(null),this._intentStates.set(T.cacheKey,P)),P.opListReadCapability||((S=Object.create(null)).operatorListChanged=E,P.opListReadCapability=(0,_util.createPromiseCapability)(),(P.renderTasks||=new Set).add(S),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(T)),P.opListReadCapability.promise}streamTextContent({disableCombineTextItems:o=!1,includeMarkedContent:l=!1}={}){let _=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==o,includeMarkedContent:!0===l},{highWaterMark:_,size:o=>o.items.length})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));let l=this.streamTextContent(o);return new Promise(function(o,_){function S(){E.read().then(function({value:l,done:_}){if(_){o(T);return}Object.assign(T.styles,l.styles),T.items.push(...l.items),S()},_)}let E=l.getReader(),T={items:[],styles:Object.create(null)};S()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let o=[];for(let l of this._intentStates.values())if(this._abortOperatorList({intentState:l,reason:Error("Page was destroyed."),force:!0}),!l.opListReadCapability)for(let _ of l.renderTasks)o.push(_.completed),_.cancel();for(let o of(this.objs.clear(),this._bitmaps))o.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(o)}cleanup(o=!1){return this.pendingCleanup=!0,this._tryCleanup(o)}_tryCleanup(o=!1){if(!this.pendingCleanup)return!1;for(let{renderTasks:o,operatorList:l}of this._intentStates.values())if(o.size>0||!l.lastChunk)return!1;for(let l of(this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,o&&this._stats&&(this._stats=new _display_utils.StatTimer),this._bitmaps))l.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(o,l){let _=this._intentStates.get(l);_&&(this._stats&&this._stats.timeEnd("Page Request"),_.displayReadyCapability&&_.displayReadyCapability.resolve(o))}_renderPageChunk(o,l){for(let _=0,S=o.length;_<S;_++)l.operatorList.fnArray.push(o.fnArray[_]),l.operatorList.argsArray.push(o.argsArray[_]);for(let _ of(l.operatorList.lastChunk=o.lastChunk,l.operatorList.separateAnnots=o.separateAnnots,l.renderTasks))_.operatorListChanged();o.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:o,cacheKey:l,annotationStorageMap:_}){let S=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:l,annotationStorage:_}),E=S.getReader(),T=this._intentStates.get(l);T.streamReader=E;let P=()=>{E.read().then(({value:o,done:l})=>{if(l){T.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(o,T),P())},o=>{if(T.streamReader=null,!this._transport.destroyed){if(T.operatorList){for(let o of(T.operatorList.lastChunk=!0,T.renderTasks))o.operatorListChanged();this._tryCleanup()}if(T.displayReadyCapability)T.displayReadyCapability.reject(o);else if(T.opListReadCapability)T.opListReadCapability.reject(o);else throw o}})};P()}_abortOperatorList({intentState:o,reason:l,force:_=!1}){if(o.streamReader){if(!_){if(o.renderTasks.size>0)return;if(l instanceof _display_utils.RenderingCancelledException){o.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:o,reason:l,force:!0}),o.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(o.streamReader.cancel(new _util.AbortException(l.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(let[l,_]of this._intentStates)if(_===o){this._intentStates.delete(l);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(o,l){let _={data:structuredClone(o,l)};this._deferred.then(()=>{for(let o of this._listeners)o.call(this,_)})}addEventListener(o,l){this._listeners.push(l)}removeEventListener(o,l){let _=this._listeners.indexOf(l);this._listeners.splice(_,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){let pdfjsFilePath=document?.currentScript?.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(o,l){let _;try{if(!(_=new URL(o)).origin||"null"===_.origin)return!1}catch(o){return!1}let S=new URL(l,_);return _.origin===S.origin},PDFWorkerUtil.createCDNWrapper=function(o){let l=`importScripts("${o}");`;return URL.createObjectURL(new Blob([l]))};class PDFWorker{static #e=new WeakMap;constructor({name:o=null,port:l=null,verbosity:_=(0,_util.getVerbosityLevel)()}={}){if(l&&PDFWorker.#e.has(l))throw Error("Cannot use more than one PDFWorker per port.");if(this.name=o,this.destroyed=!1,this.verbosity=_,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,l){PDFWorker.#e.set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(o){this._port=o,this._messageHandler=new _message_handler.MessageHandler("main","worker",o),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:o}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,o)||(o=PDFWorkerUtil.createCDNWrapper(new URL(o,window.location).href));let l=new Worker(o),_=new _message_handler.MessageHandler("main","worker",l),S=()=>{l.removeEventListener("error",E),_.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()},E=()=>{this._webWorker||S()};l.addEventListener("error",E),_.on("test",o=>{if(l.removeEventListener("error",E),this.destroyed){S();return}o?(this._messageHandler=_,this._port=l,this._webWorker=l,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),_.destroy(),l.terminate())}),_.on("ready",o=>{if(l.removeEventListener("error",E),this.destroyed){S();return}try{T()}catch(o){this._setupFakeWorker()}});let T=()=>{let o=new Uint8Array;_.send("test",o,[o.buffer])};T();return}catch(o){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(o=>{if(this.destroyed){this._readyCapability.reject(Error("Worker was destroyed"));return}let l=new LoopbackPort;this._port=l;let _=`fake${PDFWorkerUtil.fakeWorkerId++}`,S=new _message_handler.MessageHandler(_+"_worker",_,l);o.setup(S,l);let E=new _message_handler.MessageHandler(_,_+"_worker",l);this._messageHandler=E,this._readyCapability.resolve(),E.send("configure",{verbosity:this.verbosity})}).catch(o=>{this._readyCapability.reject(Error(`Setting up fake worker failed: "${o.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(o){if(!o?.port)throw Error("PDFWorker.fromPort - invalid method signature.");return this.#e.has(o.port)?this.#e.get(o.port):new PDFWorker(o)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch(o){return null}}static get _setupFakeWorkerGlobal(){let loader=async()=>{let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await (0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{#i=null;#s=new Map;#r=new Map;#a=null;constructor(o,l,_,S){this.messageHandler=o,this.loadingTask=l,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:l.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:S.ownerDocument,styleElement:S.styleElement}),this._params=S,S.useWorkerFetch||(this.CMapReaderFactory=new S.CMapReaderFactory({baseUrl:S.cMapUrl,isCompressed:S.cMapPacked}),this.StandardFontDataFactory=new S.StandardFontDataFactory({baseUrl:S.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=_,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#i}getRenderingIntent(o,l=_util.AnnotationMode.ENABLE,_=null,S=!1){let E=_util.RenderingIntentFlag.DISPLAY,T=null;switch(o){case"any":E=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":E=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(l){case _util.AnnotationMode.DISABLE:E+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:E+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:E+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE;let P=E&_util.RenderingIntentFlag.PRINT&&_ instanceof _annotation_storage.PrintAnnotationStorage?_:this.annotationStorage;T=P.serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${l}`)}return S&&(E+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:E,cacheKey:`${E}_${_annotation_storage.AnnotationStorage.getHash(T)}`,annotationStorageMap:T}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(Error("Worker was destroyed during onPassword callback"));let o=[];for(let l of this.#s.values())o.push(l._destroy());this.#s.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let l=this.messageHandler.sendWithPromise("Terminate",null);return o.push(l),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#a=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:o,loadingTask:l}=this;o.on("GetReader",(o,l)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},l.onPull=()=>{this._fullReader.read().then(function({value:o,done:_}){if(_){l.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(o),"GetReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{l.error(o)})},l.onCancel=o=>{this._fullReader.cancel(o),l.ready.catch(o=>{if(!this.destroyed)throw o})}}),o.on("ReaderHeadersReady",o=>{let _=(0,_util.createPromiseCapability)(),S=this._fullReader;return S.headersReady.then(()=>{S.isStreamingSupported&&S.isRangeSupported||(this._lastProgress&&l.onProgress?.(this._lastProgress),S.onProgress=o=>{l.onProgress?.({loaded:o.loaded,total:o.total})}),_.resolve({isStreamingSupported:S.isStreamingSupported,isRangeSupported:S.isRangeSupported,contentLength:S.contentLength})},_.reject),_.promise}),o.on("GetRangeReader",(o,l)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let _=this._networkStream.getRangeReader(o.begin,o.end);if(!_){l.close();return}l.onPull=()=>{_.read().then(function({value:o,done:_}){if(_){l.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(o),"GetRangeReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{l.error(o)})},l.onCancel=o=>{_.cancel(o),l.ready.catch(o=>{if(!this.destroyed)throw o})}}),o.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,l._capability.resolve(new PDFDocumentProxy(o,this))}),o.on("DocException",function(o){let _;switch(o.name){case"PasswordException":_=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":_=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":_=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":_=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":_=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}l._capability.reject(_)}),o.on("PasswordRequest",o=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),l.onPassword){let _=o=>{o instanceof Error?this._passwordCapability.reject(o):this._passwordCapability.resolve({password:o})};try{l.onPassword(_,o.code)}catch(o){this._passwordCapability.reject(o)}}else this._passwordCapability.reject(new _util.PasswordException(o.message,o.code));return this._passwordCapability.promise}),o.on("DataLoaded",o=>{l.onProgress?.({loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),o.on("StartRenderPage",o=>{if(this.destroyed)return;let l=this.#s.get(o.pageIndex);l._startRenderPage(o.transparency,o.cacheKey)}),o.on("commonobj",([l,_,S])=>{if(!(this.destroyed||this.commonObjs.has(l)))switch(_){case"Font":let E=this._params;if("error"in S){let o=S.error;(0,_util.warn)(`Error during font loading: ${o}`),this.commonObjs.resolve(l,o);break}let T=null;E.pdfBug&&globalThis.FontInspector?.enabled&&(T={registerFont(o,l){globalThis.FontInspector.fontAdded(o,l)}});let P=new _font_loader.FontFaceObject(S,{isEvalSupported:E.isEvalSupported,disableFontFace:E.disableFontFace,ignoreErrors:E.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:T});this.fontLoader.bind(P).catch(_=>o.sendWithPromise("FontFallback",{id:l})).finally(()=>{!E.fontExtraProperties&&P.data&&(P.data=null),this.commonObjs.resolve(l,P)});break;case"FontPath":case"Image":this.commonObjs.resolve(l,S);break;default:throw Error(`Got unknown common object type ${_}`)}}),o.on("obj",([o,l,_,S])=>{if(this.destroyed)return;let E=this.#s.get(l);if(!E.objs.has(o))switch(_){case"Image":E.objs.resolve(o,S);let T=8e6;if(S){let o;if(S.bitmap){let{bitmap:l,width:_,height:T}=S;o=_*T*4,E._bitmaps.add(l)}else o=S.data?.length||0;o>T&&(E.cleanupAfterRender=!0)}break;case"Pattern":E.objs.resolve(o,S);break;default:throw Error(`Got unknown object type ${_}`)}}),o.on("DocProgress",o=>{this.destroyed||l.onProgress?.({loaded:o.loaded,total:o.total})}),o.on("DocStats",o=>{this.destroyed||(this.#i=Object.freeze({streamTypes:Object.freeze(o.streamTypes),fontTypes:Object.freeze(o.fontTypes)}))}),o.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),o.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(o):Promise.reject(Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(o):Promise.reject(Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:o}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(o)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(Error("Invalid page request."));let l=o-1,_=this.#r.get(l);if(_)return _;let S=this.messageHandler.sendWithPromise("GetPage",{pageIndex:l}).then(o=>{if(this.destroyed)throw Error("Transport destroyed");let _=new PDFPageProxy(l,o,this,this._params.ownerDocument,this._params.pdfBug);return this.#s.set(l,_),_});return this.#r.set(l,S),S}getPageIndex(o){return"object"!=typeof o||null===o||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,l){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:l})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return"string"!=typeof o?Promise.reject(Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#a||=this.messageHandler.sendWithPromise("GetMetadata",null).then(o=>({info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(let o of this.#s.values()){let l=o.cleanup();if(!l)throw Error(`startCleanup: Page ${o.pageNumber} is currently rendering.`)}this.commonObjs.clear(),o||this.fontLoader.clear(),this.#a=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){let o=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o.disableAutoFetch,enableXfa:o.enableXfa})}}class PDFObjects{#n=Object.create(null);#o(o){let l=this.#n[o];return l||(this.#n[o]={capability:(0,_util.createPromiseCapability)(),data:null})}get(o,l=null){if(l){let _=this.#o(o);return _.capability.promise.then(()=>l(_.data)),null}let _=this.#n[o];if(!_?.capability.settled)throw Error(`Requesting object that isn't resolved yet ${o}.`);return _.data}has(o){let l=this.#n[o];return l?.capability.settled||!1}resolve(o,l=null){let _=this.#o(o);_.data=l,_.capability.resolve()}clear(){this.#n=Object.create(null)}}class RenderTask{#l=null;constructor(o){this.#l=o,this.onContinue=null}get promise(){return this.#l.capability.promise}cancel(){this.#l.cancel()}get separateAnnots(){let{separateAnnots:o}=this.#l.operatorList;if(!o)return!1;let{annotationCanvasMap:l}=this.#l;return o.form||o.canvas&&l?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static #h=new WeakSet;constructor({callback:o,params:l,objs:_,commonObjs:S,annotationCanvasMap:E,operatorList:T,pageIndex:P,canvasFactory:M,useRequestAnimationFrame:F=!1,pdfBug:O=!1,pageColors:I=null}){this.callback=o,this.params=l,this.objs=_,this.commonObjs=S,this.annotationCanvasMap=E,this.operatorListIdx=null,this.operatorList=T,this._pageIndex=P,this.canvasFactory=M,this._pdfBug=O,this.pageColors=I,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===F&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=l.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:l}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#h.has(this._canvas))throw Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#h.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:_,viewport:S,transform:E,imageLayer:T,background:P}=this.params;this.gfx=new _canvas.CanvasGraphics(_,this.commonObjs,this.objs,this.canvasFactory,T,l,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:E,viewport:S,transparency:o,background:P}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(o=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#h.delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){!this.cancelled&&(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#h.delete(this._canvas),this.callback())))}}let version="2.16.105";exports.version=version;let build="172ccdbe5";exports.build=build},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PrintAnnotationStorage=l.AnnotationStorage=void 0;var S=_(1),E=_(6),T=_(10);class P{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(o,l){let _=this._storage.get(o);return void 0===_?l:Object.assign(l,_)}getRawValue(o){return this._storage.get(o)}remove(o){if(this._storage.delete(o),0===this._storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(let o of this._storage.values())if(o instanceof E.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(o,l){let _=this._storage.get(o),S=!1;if(void 0!==_)for(let[o,E]of Object.entries(l))_[o]!==E&&(S=!0,_[o]=E);else S=!0,this._storage.set(o,l);S&&this.#d(),l instanceof E.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(l.constructor._type)}has(o){return this._storage.has(o)}getAll(){return this._storage.size>0?(0,S.objectFromMap)(this._storage):null}get size(){return this._storage.size}#d(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new M(this)}get serializable(){if(0===this._storage.size)return null;let o=new Map;for(let[l,_]of this._storage){let S=_ instanceof E.AnnotationEditor?_.serialize():_;S&&o.set(l,S)}return o}static getHash(o){if(!o)return"";let l=new T.MurmurHash3_64;for(let[_,S]of o)l.update(`${_}:${JSON.stringify(S)}`);return l.hexdigest()}}l.AnnotationStorage=P;class M extends P{#c=null;constructor(o){super(),this.#c=structuredClone(o.serializable)}get print(){(0,S.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#c}}l.PrintAnnotationStorage=M},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationEditor=void 0;var S=_(7),E=_(1);class T{#u=this.focusin.bind(this);#p=this.focusout.bind(this);#g=!1;#f=!1;#m=!1;#b=T._zIndex++;static _colorManager=new S.ColorManager;static _zIndex=1;constructor(o){this.constructor===T&&(0,E.unreachable)("Cannot initialize AnnotationEditor."),this.parent=o.parent,this.id=o.id,this.width=this.height=null,this.pageIndex=o.parent.pageIndex,this.name=o.name,this.div=null;let[l,_]=this.parent.viewportBaseDimensions;this.x=o.x/l,this.y=o.y/_,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,E.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#b}focusin(o){this.#g?this.#g=!1:this.parent.setSelected(this)}focusout(o){if(!this.isAttachedToDOM)return;let l=o.relatedTarget;!l?.closest(`#${this.id}`)&&(o.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(o){let l=this.parent.div.getBoundingClientRect();this.startX=o.clientX-l.x,this.startY=o.clientY-l.y,o.dataTransfer.setData("text/plain",this.id),o.dataTransfer.effectAllowed="move"}setAt(o,l,_,S){let[E,T]=this.parent.viewportBaseDimensions;[_,S]=this.screenToPageTranslation(_,S),this.x=(o+_)/E,this.y=(l+S)/T,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(o,l){let[_,S]=this.parent.viewportBaseDimensions;[o,l]=this.screenToPageTranslation(o,l),this.x+=o/_,this.y+=l/S,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(o,l){let{rotation:_}=this.parent.viewport;switch(_){case 90:return[l,-o];case 180:return[-o,-l];case 270:return[-l,o];default:return[o,l]}}setDims(o,l){let[_,S]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*o/_}%`,this.div.style.height=`${100*l/S}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#u),this.div.addEventListener("focusout",this.#p);let[o,l]=this.getInitialTranslation();return this.translate(o,l),(0,S.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(o){let l=S.KeyboardManager.platform.isMac;if(0!==o.button||o.ctrlKey&&l){o.preventDefault();return}o.ctrlKey&&!l||o.shiftKey||o.metaKey&&l?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#g=!0}getRect(o,l){let[_,S]=this.parent.viewportBaseDimensions,[E,T]=this.parent.pageDimensions,P=E*o/_,M=T*l/S,F=this.x*E,O=this.y*T,I=this.width*E,D=this.height*T;switch(this.rotation){case 0:return[F+P,T-O-M-D,F+P+I,T-O-M];case 90:return[F+M,T-O+P,F+M+D,T-O+P+I];case 180:return[F-P-I,T-O+M,F-P,T-O+M+D];case 270:return[F-M-D,T-O-P-I,F-M,T-O-P];default:throw Error("Invalid rotation")}}getRectInCurrentCoords(o,l){let[_,S,E,T]=o,P=E-_,M=T-S;switch(this.rotation){case 0:return[_,l-T,P,M];case 90:return[_,l-S,M,P];case 180:return[E,l-S,P,M];case 270:return[E,l-T,M,P];default:throw Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#u)}serialize(){(0,E.unreachable)("An editor must be serializable")}static deserialize(o,l){let _=new this.prototype.constructor({parent:l,id:l.getNextId()});_.rotation=o.rotation;let[S,E]=l.pageDimensions,[T,P,M,F]=_.getRectInCurrentCoords(o.rect,E);return _.x=T/S,_.y=P/E,_.width=M/S,_.height=F/E,_}remove(){this.div.removeEventListener("focusin",this.#u),this.div.removeEventListener("focusout",this.#p),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(o,l){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(o){this.#f=o,o?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}l.AnnotationEditor=T},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.KeyboardManager=l.CommandManager=l.ColorManager=l.AnnotationEditorUIManager=void 0,l.bindEvents=T,l.opacityToHex=P;var S=_(1),E=_(8);function T(o,l,_){for(let S of _)l.addEventListener(S,o[S].bind(o))}function P(o){return Math.round(Math.min(255,Math.max(1,255*o))).toString(16).padStart(2,"0")}class M{#A=0;getId(){return`${S.AnnotationEditorPrefix}${this.#A++}`}}class F{#y=[];#v=!1;#_;#S=-1;constructor(o=128){this.#_=o}add({cmd:o,undo:l,mustExec:_,type:S=NaN,overwriteIfSameType:E=!1,keepUndo:T=!1}){if(_&&o(),this.#v)return;let P={cmd:o,undo:l,type:S};if(-1===this.#S){this.#y.length>0&&(this.#y.length=0),this.#S=0,this.#y.push(P);return}if(E&&this.#y[this.#S].type===S){T&&(P.undo=this.#y[this.#S].undo),this.#y[this.#S]=P;return}let M=this.#S+1;M===this.#_?this.#y.splice(0,1):(this.#S=M,M<this.#y.length&&this.#y.splice(M)),this.#y.push(P)}undo(){-1!==this.#S&&(this.#v=!0,this.#y[this.#S].undo(),this.#v=!1,this.#S-=1)}redo(){this.#S<this.#y.length-1&&(this.#S+=1,this.#v=!0,this.#y[this.#S].cmd(),this.#v=!1)}hasSomethingToUndo(){return -1!==this.#S}hasSomethingToRedo(){return this.#S<this.#y.length-1}destroy(){this.#y=null}}l.CommandManager=F;class O{constructor(o){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let l=O.platform.isMac;for(let[_,S]of o)for(let o of _){let _=o.startsWith("mac+");l&&_?(this.callbacks.set(o.slice(4),S),this.allKeys.add(o.split("+").at(-1))):l||_||(this.callbacks.set(o,S),this.allKeys.add(o.split("+").at(-1)))}}static get platform(){let o="undefined"!=typeof navigator?navigator.platform:"";return(0,S.shadow)(this,"platform",{isWin:o.includes("Win"),isMac:o.includes("Mac")})}#x(I){I.altKey&&this.buffer.push("alt"),I.ctrlKey&&this.buffer.push("ctrl"),I.metaKey&&this.buffer.push("meta"),I.shiftKey&&this.buffer.push("shift"),this.buffer.push(I.key);let o=this.buffer.join("+");return this.buffer.length=0,o}exec(o,l){if(!this.allKeys.has(l.key))return;let _=this.callbacks.get(this.#x(l));_&&(_.bind(o)(),l.stopPropagation(),l.preventDefault())}}l.KeyboardManager=O;class D{#E=null;copy(o){o&&(Array.isArray(o)?this.#E=o.map(o=>o.serialize()):this.#E=[o.serialize()],this.#E=this.#E.filter(o=>!!o),0===this.#E.length&&(this.#E=null))}paste(){return this.#E}isEmpty(){return null===this.#E}destroy(){this.#E=null}}class L{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let o=new Map([["CanvasText",null],["Canvas",null]]);return(0,E.getColorValues)(o),(0,S.shadow)(this,"_colors",o)}convert(o){let l=(0,E.getRGB)(o);if(!window.matchMedia("(forced-colors: active)").matches)return l;for(let[o,_]of this._colors)if(_.every((o,_)=>o===l[_]))return L._colorsMapping.get(o);return l}getHexCode(o){let l=this._colors.get(o);return l?S.Util.makeHexColor(...l):o}}l.ColorManager=L;class N{#C=null;#T=new Map;#P=new Map;#M=new D;#k=new F;#w=0;#R=null;#F=null;#O=new M;#I=!1;#D=S.AnnotationEditorType.NONE;#L=new Set;#N=this.keydown.bind(this);#j=this.onEditingAction.bind(this);#U=this.onPageChanging.bind(this);#B={isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#q=null;static _keyboardManager=new O([[["ctrl+a","mac+meta+a"],N.prototype.selectAll],[["ctrl+c","mac+meta+c"],N.prototype.copy],[["ctrl+v","mac+meta+v"],N.prototype.paste],[["ctrl+x","mac+meta+x"],N.prototype.cut],[["ctrl+z","mac+meta+z"],N.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],N.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],N.prototype.delete],[["Escape","mac+Escape"],N.prototype.unselectAll]]);constructor(o,l){this.#q=o,this.#F=l,this.#F._on("editingaction",this.#j),this.#F._on("pagechanging",this.#U)}destroy(){for(let o of(this.#W(),this.#F._off("editingaction",this.#j),this.#F._off("pagechanging",this.#U),this.#P.values()))o.destroy();this.#P.clear(),this.#T.clear(),this.#C=null,this.#L.clear(),this.#M.destroy(),this.#k.destroy()}onPageChanging({pageNumber:o}){this.#w=o-1}focusMainContainer(){this.#q.focus()}#G(){this.#q.addEventListener("keydown",this.#N)}#W(){this.#q.removeEventListener("keydown",this.#N)}keydown(o){this.getActive()?.shouldGetKeyboardEvents()||N._keyboardManager.exec(this,o)}onEditingAction(o){["undo","redo","cut","copy","paste","delete","selectAll"].includes(o.name)&&this[o.name]()}#z(U){let o=Object.entries(U).some(([o,l])=>this.#B[o]!==l);o&&this.#F.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#B,U)})}#H(W){this.#F.dispatch("annotationeditorparamschanged",{source:this,details:W})}setEditingState(o){o?(this.#G(),this.#z({isEditing:this.#D!==S.AnnotationEditorType.NONE,isEmpty:this.#V(),hasSomethingToUndo:this.#k.hasSomethingToUndo(),hasSomethingToRedo:this.#k.hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:this.#M.isEmpty()})):(this.#W(),this.#z({isEditing:!1}))}registerEditorTypes(o){for(let l of(this.#R=o,this.#R))this.#H(l.defaultPropertiesToUpdate)}getId(){return this.#O.getId()}addLayer(o){this.#P.set(o.pageIndex,o),this.#I?o.enable():o.disable()}removeLayer(o){this.#P.delete(o.pageIndex)}updateMode(o){if(this.#D=o,o===S.AnnotationEditorType.NONE)this.setEditingState(!1),this.#$();else for(let l of(this.setEditingState(!0),this.#X(),this.#P.values()))l.updateMode(o)}updateToolbar(o){o!==this.#D&&this.#F.dispatch("switchannotationeditormode",{source:this,mode:o})}updateParams(o,l){for(let _ of this.#L)_.updateParams(o,l);for(let _ of this.#R)_.updateDefaultParams(o,l)}#X(){if(!this.#I)for(let o of(this.#I=!0,this.#P.values()))o.enable()}#$(){if(this.unselectAll(),this.#I)for(let o of(this.#I=!1,this.#P.values()))o.disable()}getEditors(o){let l=[];for(let _ of this.#T.values())_.pageIndex===o&&l.push(_);return l}getEditor(o){return this.#T.get(o)}addEditor(o){this.#T.set(o.id,o)}removeEditor(o){this.#T.delete(o.id),this.unselect(o)}#Y(z){let o=this.#P.get(z.pageIndex);o?o.addOrRebuild(z):this.addEditor(z)}setActiveEditor(o){this.#C!==o&&(this.#C=o,o&&this.#H(o.propertiesToUpdate))}toggleSelected(o){if(this.#L.has(o)){this.#L.delete(o),o.unselect(),this.#z({hasSelectedEditor:this.hasSelection});return}this.#L.add(o),o.select(),this.#H(o.propertiesToUpdate),this.#z({hasSelectedEditor:!0})}setSelected(o){for(let l of this.#L)l!==o&&l.unselect();this.#L.clear(),this.#L.add(o),o.select(),this.#H(o.propertiesToUpdate),this.#z({hasSelectedEditor:!0})}isSelected(o){return this.#L.has(o)}unselect(o){o.unselect(),this.#L.delete(o),this.#z({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#L.size}undo(){this.#k.undo(),this.#z({hasSomethingToUndo:this.#k.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#V()})}redo(){this.#k.redo(),this.#z({hasSomethingToUndo:!0,hasSomethingToRedo:this.#k.hasSomethingToRedo(),isEmpty:this.#V()})}addCommands(o){this.#k.add(o),this.#z({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#V()})}#V(){if(0===this.#T.size)return!0;if(1===this.#T.size)for(let o of this.#T.values())return o.isEmpty();return!1}delete(){if(this.#C&&this.#C.commitOrRemove(),!this.hasSelection)return;let o=[...this.#L],l=()=>{for(let l of o)l.remove()},_=()=>{for(let l of o)this.#Y(l)};this.addCommands({cmd:l,undo:_,mustExec:!0})}copy(){if(this.#C&&this.#C.commitOrRemove(),this.hasSelection){let o=[];for(let l of this.#L)l.isEmpty()||o.push(l);0!==o.length&&(this.#M.copy(o),this.#z({hasEmptyClipboard:!1}))}}cut(){this.copy(),this.delete()}paste(){if(this.#M.isEmpty())return;this.unselectAll();let o=this.#P.get(this.#w),l=this.#M.paste().map(l=>o.deserialize(l)),_=()=>{for(let o of l)this.#Y(o);this.#K(l)},S=()=>{for(let o of l)o.remove()};this.addCommands({cmd:_,undo:S,mustExec:!0})}#K(H){for(let o of(this.#L.clear(),H))o.isEmpty()||(this.#L.add(o),o.select());this.#z({hasSelectedEditor:!0})}selectAll(){for(let o of this.#L)o.commit();this.#K(this.#T.values())}unselectAll(){if(this.#C){this.#C.commitOrRemove();return}if(0!==this.#K.size){for(let o of this.#L)o.unselect();this.#L.clear(),this.#z({hasSelectedEditor:!1})}}isActive(o){return this.#C===o}getActive(){return this.#C}getMode(){return this.#D}}l.AnnotationEditorUIManager=N},(o,l,_)=>{let S;Object.defineProperty(l,"__esModule",{value:!0}),l.StatTimer=l.RenderingCancelledException=l.PixelsPerInch=l.PageViewport=l.PDFDateString=l.DOMStandardFontDataFactory=l.DOMSVGFactory=l.DOMCanvasFactory=l.DOMCMapReaderFactory=l.AnnotationPrefix=void 0,l.deprecated=Q,l.getColorValues=ti,l.getCurrentTransform=tr,l.getCurrentTransformInverse=ta,l.getFilenameFromUrl=V,l.getPdfFilenameFromUrl=$,l.getRGB=te,l.getXfaPageViewport=tt,l.isDataScheme=z,l.isPdfFile=H,l.isValidFetchUrl=K,l.loadScript=J;var E=_(9),T=_(1);let P="http://www.w3.org/2000/svg",M="pdfjs_internal_id_";l.AnnotationPrefix=M;class F{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}l.PixelsPerInch=F;class O extends E.BaseCanvasFactory{constructor({ownerDocument:o=globalThis.document}={}){super(),this._document=o}_createCanvas(o,l){let _=this._document.createElement("canvas");return _.width=o,_.height=l,_}}async function I(o,l=!1){if(K(o,document.baseURI)){let _=await fetch(o);if(!_.ok)throw Error(_.statusText);return l?new Uint8Array(await _.arrayBuffer()):(0,T.stringToBytes)(await _.text())}return new Promise((_,S)=>{let E=new XMLHttpRequest;E.open("GET",o,!0),l&&(E.responseType="arraybuffer"),E.onreadystatechange=()=>{if(E.readyState===XMLHttpRequest.DONE){if(200===E.status||0===E.status){let o;if(l&&E.response?o=new Uint8Array(E.response):!l&&E.responseText&&(o=(0,T.stringToBytes)(E.responseText)),o){_(o);return}}S(Error(E.statusText))}},E.send(null)})}l.DOMCanvasFactory=O;class D extends E.BaseCMapReaderFactory{_fetchData(o,l){return I(o,this.isCompressed).then(o=>({cMapData:o,compressionType:l}))}}l.DOMCMapReaderFactory=D;class L extends E.BaseStandardFontDataFactory{_fetchData(o){return I(o,!0)}}l.DOMStandardFontDataFactory=L;class N extends E.BaseSVGFactory{_createSVG(o){return document.createElementNS(P,o)}}l.DOMSVGFactory=N;class U{constructor({viewBox:o,scale:l,rotation:_,offsetX:S=0,offsetY:E=0,dontFlip:T=!1}){let P,M,F,O,I,D,L,N;this.viewBox=o,this.scale=l,this.rotation=_,this.offsetX=S,this.offsetY=E;let U=(o[2]+o[0])/2,W=(o[3]+o[1])/2;switch((_%=360)<0&&(_+=360),_){case 180:P=-1,M=0,F=0,O=1;break;case 90:P=0,M=1,F=1,O=0;break;case 270:P=0,M=-1,F=-1,O=0;break;case 0:P=1,M=0,F=0,O=-1;break;default:throw Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}T&&(F=-F,O=-O),0===P?(I=Math.abs(W-o[1])*l+S,D=Math.abs(U-o[0])*l+E,L=Math.abs(o[3]-o[1])*l,N=Math.abs(o[2]-o[0])*l):(I=Math.abs(U-o[0])*l+S,D=Math.abs(W-o[1])*l+E,L=Math.abs(o[2]-o[0])*l,N=Math.abs(o[3]-o[1])*l),this.transform=[P*l,M*l,F*l,O*l,I-P*l*U-F*l*W,D-M*l*U-O*l*W],this.width=L,this.height=N}clone({scale:o=this.scale,rotation:l=this.rotation,offsetX:_=this.offsetX,offsetY:S=this.offsetY,dontFlip:E=!1}={}){return new U({viewBox:this.viewBox.slice(),scale:o,rotation:l,offsetX:_,offsetY:S,dontFlip:E})}convertToViewportPoint(o,l){return T.Util.applyTransform([o,l],this.transform)}convertToViewportRectangle(o){let l=T.Util.applyTransform([o[0],o[1]],this.transform),_=T.Util.applyTransform([o[2],o[3]],this.transform);return[l[0],l[1],_[0],_[1]]}convertToPdfPoint(o,l){return T.Util.applyInverseTransform([o,l],this.transform)}}l.PageViewport=U;class W extends T.BaseException{constructor(o,l){super(o,"RenderingCancelledException"),this.type=l}}function z(o){let l=o.length,_=0;for(;_<l&&""===o[_].trim();)_++;return"data:"===o.substring(_,_+5).toLowerCase()}function H(o){return"string"==typeof o&&/\.pdf$/i.test(o)}function V(o){let l=o.indexOf("#"),_=o.indexOf("?"),S=Math.min(l>0?l:o.length,_>0?_:o.length);return o.substring(o.lastIndexOf("/",S)+1,S)}function $(o,l="document.pdf"){if("string"!=typeof o)return l;if(z(o))return(0,T.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),l;let _=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,S=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,E=_.exec(o),P=S.exec(E[1])||S.exec(E[2])||S.exec(E[3]);if(P&&(P=P[0]).includes("%"))try{P=S.exec(decodeURIComponent(P))[0]}catch(o){}return P||l}l.RenderingCancelledException=W;class Y{constructor(){this.started=Object.create(null),this.times=[]}time(o){o in this.started&&(0,T.warn)(`Timer is already running for ${o}`),this.started[o]=Date.now()}timeEnd(o){o in this.started||(0,T.warn)(`Timer has not been started for ${o}`),this.times.push({name:o,start:this.started[o],end:Date.now()}),delete this.started[o]}toString(){let o=[],l=0;for(let o of this.times){let _=o.name;_.length>l&&(l=_.length)}for(let _ of this.times){let S=_.end-_.start;o.push(`${_.name.padEnd(l)} ${S}ms
`)}return o.join("")}}function K(o,l){try{let{protocol:_}=l?new URL(o,l):new URL(o);return"http:"===_||"https:"===_}catch(o){return!1}}function J(o,l=!1){return new Promise((_,S)=>{let E=document.createElement("script");E.src=o,E.onload=function(o){l&&E.remove(),_(o)},E.onerror=function(){S(Error(`Cannot load script at: ${E.src}`))},(document.head||document.documentElement).append(E)})}function Q(o){console.log("Deprecated API usage: "+o)}l.StatTimer=Y;class Z{static toDateObject(o){if(!o||"string"!=typeof o)return null;S||(S=RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let l=S.exec(o);if(!l)return null;let _=parseInt(l[1],10),E=parseInt(l[2],10);E=E>=1&&E<=12?E-1:0;let T=parseInt(l[3],10);T=T>=1&&T<=31?T:1;let P=parseInt(l[4],10);P=P>=0&&P<=23?P:0;let M=parseInt(l[5],10);M=M>=0&&M<=59?M:0;let F=parseInt(l[6],10);F=F>=0&&F<=59?F:0;let O=l[7]||"Z",I=parseInt(l[8],10);I=I>=0&&I<=23?I:0;let D=parseInt(l[9],10)||0;return D=D>=0&&D<=59?D:0,"-"===O?(P+=I,M+=D):"+"===O&&(P-=I,M-=D),new Date(Date.UTC(_,E,T,P,M,F))}}function tt(o,{scale:l=1,rotation:_=0}){let{width:S,height:E}=o.attributes.style,T=[0,0,parseInt(S),parseInt(E)];return new U({viewBox:T,scale:l,rotation:_})}function te(o){if(o.startsWith("#")){let l=parseInt(o.slice(1),16);return[(16711680&l)>>16,(65280&l)>>8,255&l]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(o=>parseInt(o)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(o=>parseInt(o)).slice(0,3):((0,T.warn)(`Not a valid color format: "${o}"`),[0,0,0])}function ti(o){let l=document.createElement("span");for(let _ of(l.style.visibility="hidden",document.body.append(l),o.keys())){l.style.color=_;let S=window.getComputedStyle(l).color;o.set(_,te(S))}l.remove()}function tr(o){let{a:l,b:_,c:S,d:E,e:T,f:P}=o.getTransform();return[l,_,S,E,T,P]}function ta(o){let{a:l,b:_,c:S,d:E,e:T,f:P}=o.getTransform().invertSelf();return[l,_,S,E,T,P]}l.PDFDateString=Z},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseStandardFontDataFactory=l.BaseSVGFactory=l.BaseCanvasFactory=l.BaseCMapReaderFactory=void 0;var S=_(1);class E{constructor(){this.constructor===E&&(0,S.unreachable)("Cannot initialize BaseCanvasFactory.")}create(o,l){if(o<=0||l<=0)throw Error("Invalid canvas size");let _=this._createCanvas(o,l);return{canvas:_,context:_.getContext("2d")}}reset(o,l,_){if(!o.canvas)throw Error("Canvas is not specified");if(l<=0||_<=0)throw Error("Invalid canvas size");o.canvas.width=l,o.canvas.height=_}destroy(o){if(!o.canvas)throw Error("Canvas is not specified");o.canvas.width=0,o.canvas.height=0,o.canvas=null,o.context=null}_createCanvas(o,l){(0,S.unreachable)("Abstract method `_createCanvas` called.")}}l.BaseCanvasFactory=E;class T{constructor({baseUrl:o=null,isCompressed:l=!1}){this.constructor===T&&(0,S.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=o,this.isCompressed=l}async fetch({name:o}){if(!this.baseUrl)throw Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!o)throw Error("CMap name must be specified.");let l=this.baseUrl+o+(this.isCompressed?".bcmap":""),_=this.isCompressed?S.CMapCompressionType.BINARY:S.CMapCompressionType.NONE;return this._fetchData(l,_).catch(o=>{throw Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${l}`)})}_fetchData(o,l){(0,S.unreachable)("Abstract method `_fetchData` called.")}}l.BaseCMapReaderFactory=T;class P{constructor({baseUrl:o=null}){this.constructor===P&&(0,S.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=o}async fetch({filename:o}){if(!this.baseUrl)throw Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!o)throw Error("Font filename must be specified.");let l=`${this.baseUrl}${o}`;return this._fetchData(l).catch(o=>{throw Error(`Unable to load font data at: ${l}`)})}_fetchData(o){(0,S.unreachable)("Abstract method `_fetchData` called.")}}l.BaseStandardFontDataFactory=P;class M{constructor(){this.constructor===M&&(0,S.unreachable)("Cannot initialize BaseSVGFactory.")}create(o,l,_=!1){if(o<=0||l<=0)throw Error("Invalid SVG dimensions");let S=this._createSVG("svg:svg");return S.setAttribute("version","1.1"),_||(S.setAttribute("width",`${o}px`),S.setAttribute("height",`${l}px`)),S.setAttribute("preserveAspectRatio","none"),S.setAttribute("viewBox",`0 0 ${o} ${l}`),S}createElement(o){if("string"!=typeof o)throw Error("Invalid SVG element type");return this._createSVG(o)}_createSVG(o){(0,S.unreachable)("Abstract method `_createSVG` called.")}}l.BaseSVGFactory=M},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MurmurHash3_64=void 0;var S=_(1);let E=3285377520,T=4294901760,P=65535;class M{constructor(o){this.h1=o?4294967295&o:E,this.h2=o?4294967295&o:E}update(o){let l,_;if("string"==typeof o){l=new Uint8Array(2*o.length),_=0;for(let S=0,E=o.length;S<E;S++){let E=o.charCodeAt(S);E<=255?l[_++]=E:(l[_++]=E>>>8,l[_++]=255&E)}}else if((0,S.isArrayBuffer)(o))_=(l=o.slice()).byteLength;else throw Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");let E=_>>2,M=_-4*E,F=new Uint32Array(l.buffer,0,E),O=0,I=0,D=this.h1,L=this.h2,N=3432918353,U=461845907,W=N&P,z=U&P;for(let o=0;o<E;o++)1&o?(D^=O=(O=(O=(O=F[o])*N&T|O*W&P)<<15|O>>>17)*U&T|O*z&P,D=5*(D=D<<13|D>>>19)+3864292196):(L^=I=(I=(I=(I=F[o])*N&T|I*W&P)<<15|I>>>17)*U&T|I*z&P,L=5*(L=L<<13|L>>>19)+3864292196);switch(O=0,M){case 3:O^=l[4*E+2]<<16;case 2:O^=l[4*E+1]<<8;case 1:O^=l[4*E],O=(O=(O=O*N&T|O*W&P)<<15|O>>>17)*U&T|O*z&P,1&E?D^=O:L^=O}this.h1=D,this.h2=L}hexdigest(){let o=this.h1,l=this.h2;o^=l>>>1,o=3981806797*o&T|36045*o&P,l=4283543511*l&T|((l<<16|o>>>16)*2950163797&T)>>>16,o^=l>>>1,o=444984403*o&T|60499*o&P,l=3301882366*l&T|((l<<16|o>>>16)*3120437893&T)>>>16,o^=l>>>1;let _=(o>>>0).toString(16),S=(l>>>0).toString(16);return _.padStart(8,"0")+S.padStart(8,"0")}}l.MurmurHash3_64=M},(o,l,_)=>{let S;Object.defineProperty(l,"__esModule",{value:!0}),l.FontLoader=l.FontFaceObject=void 0;var E=_(1);class T{constructor({docId:o,onUnsupportedFeature:l,ownerDocument:_=globalThis.document,styleElement:S=null}){this.constructor===T&&(0,E.unreachable)("Cannot initialize BaseFontLoader."),this.docId=o,this._onUnsupportedFeature=l,this._document=_,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(o){this.nativeFontFaces.push(o),this._document.fonts.add(o)}insertRule(o){let l=this.styleElement;l||((l=this.styleElement=this._document.createElement("style")).id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(l));let _=l.sheet;_.insertRule(o,_.cssRules.length)}clear(){for(let o of this.nativeFontFaces)this._document.fonts.delete(o);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(o){if(o.attached||o.missingFile)return;if(o.attached=!0,this.isFontLoadingAPISupported){let l=o.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(_){throw this._onUnsupportedFeature({featureId:E.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,E.warn)(`Failed to load font '${l.family}': '${_}'.`),o.disableFontFace=!0,_}}return}let l=o.createFontFaceRule();if(l){if(this.insertRule(l),this.isSyncFontLoadingSupported)return;await new Promise(_=>{let S=this._queueLoadingCallback(_);this._prepareFontLoadEvent([l],[o],S)})}}_queueLoadingCallback(o){(0,E.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){let o=!!this._document?.fonts;return(0,E.shadow)(this,"isFontLoadingAPISupported",o)}get isSyncFontLoadingSupported(){(0,E.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,E.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(o,l,_){(0,E.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}l.FontLoader=S,l.FontLoader=S=class extends T{constructor(o){super(o),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let o=!1;if("undefined"==typeof navigator)o=!0;else{let l=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);l?.[1]>=14&&(o=!0)}return(0,E.shadow)(this,"isSyncFontLoadingSupported",o)}_queueLoadingCallback(o){function l(){for((0,E.assert)(!S.done,"completeRequest() cannot be called twice."),S.done=!0;_.requests.length>0&&_.requests[0].done;){let o=_.requests.shift();setTimeout(o.callback,0)}}let _=this.loadingContext,S={id:`pdfjs-font-loading-${_.nextRequestId++}`,done:!1,complete:l,callback:o};return _.requests.push(S),S}get _loadTestFont(){let o=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,E.shadow)(this,"_loadTestFont",o())}_prepareFontLoadEvent(o,l,_){let S,T;function P(o,l){return o.charCodeAt(l)<<24|o.charCodeAt(l+1)<<16|o.charCodeAt(l+2)<<8|255&o.charCodeAt(l+3)}function M(o,l,_,S){let E=o.substring(0,l),T=o.substring(l+_);return E+S+T}let F=this._document.createElement("canvas");F.width=1,F.height=1;let O=F.getContext("2d"),I=0;function D(o,l){if(++I>30){(0,E.warn)("Load test font never loaded."),l();return}O.font="30px "+o,O.fillText(".",0,20);let _=O.getImageData(0,0,1,1);if(_.data[3]>0){l();return}setTimeout(D.bind(null,o,l))}let L=`lt${Date.now()}${this.loadTestFontId++}`,N=this._loadTestFont,U=976;N=M(N,U,L.length,L);let W=16,z=1482184792,H=P(N,W);for(S=0,T=L.length-3;S<T;S+=4)H=H-z+P(L,S)|0;S<L.length&&(H=H-z+P(L+"XXX",S)|0),N=M(N,W,4,(0,E.string32)(H));let V=`url(data:font/opentype;base64,${btoa(N)});`,$=`@font-face {font-family:"${L}";src:${V}}`;this.insertRule($);let Y=[];for(let o of l)Y.push(o.loadedName);Y.push(L);let K=this._document.createElement("div");for(let o of(K.style.visibility="hidden",K.style.width=K.style.height="10px",K.style.position="absolute",K.style.top=K.style.left="0px",Y)){let l=this._document.createElement("span");l.textContent="Hi",l.style.fontFamily=o,K.append(l)}this._document.body.append(K),D(L,()=>{K.remove(),_.complete()})}};class P{constructor(o,{isEvalSupported:l=!0,disableFontFace:_=!1,ignoreErrors:S=!1,onUnsupportedFeature:E,fontRegistry:T=null}){for(let l in this.compiledGlyphs=Object.create(null),o)this[l]=o[l];this.isEvalSupported=!1!==l,this.disableFontFace=!0===_,this.ignoreErrors=!0===S,this._onUnsupportedFeature=E,this.fontRegistry=T}createNativeFontFace(){let o;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){let l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),o=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}else o=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),o}createFontFaceRule(){let o;if(!this.data||this.disableFontFace)return null;let l=(0,E.bytesToString)(this.data),_=`url(data:${this.mimetype};base64,${btoa(l)});`;if(this.cssFontInfo){let l=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(l+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),o=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${l}src:${_}}`}else o=`@font-face {font-family:"${this.loadedName}";src:${_}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,_),o}getPathGenerator(o,l){let _;if(void 0!==this.compiledGlyphs[l])return this.compiledGlyphs[l];try{_=o.get(this.loadedName+"_path_"+l)}catch(o){if(!this.ignoreErrors)throw o;return this._onUnsupportedFeature({featureId:E.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,E.warn)(`getPathGenerator - ignoring character: "${o}".`),this.compiledGlyphs[l]=function(o,l){}}if(this.isEvalSupported&&E.FeatureTest.isEvalSupported){let o=[];for(let l of _){let _=void 0!==l.args?l.args.join(","):"";o.push("c.",l.cmd,"(",_,");\n")}return this.compiledGlyphs[l]=Function("c","size",o.join(""))}return this.compiledGlyphs[l]=function(o,l){for(let S of _)"scale"===S.cmd&&(S.args=[l,-l]),o[S.cmd].apply(o,S.args)}}}l.FontFaceObject=P},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasGraphics=void 0;var S=_(8),E=_(1),T=_(13),P=_(14),M=_(3);let F=16,O=100,I=4096,D=15,L=10,N=M.isNodeJS&&"undefined"==typeof Path2D?-1:1e3,U=16;function W(o,l){if(o._removeMirroring)throw Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){l.save(),this.__originalSave()},o.restore=function(){l.restore(),this.__originalRestore()},o.translate=function(o,_){l.translate(o,_),this.__originalTranslate(o,_)},o.scale=function(o,_){l.scale(o,_),this.__originalScale(o,_)},o.transform=function(o,_,S,E,T,P){l.transform(o,_,S,E,T,P),this.__originalTransform(o,_,S,E,T,P)},o.setTransform=function(o,_,S,E,T,P){l.setTransform(o,_,S,E,T,P),this.__originalSetTransform(o,_,S,E,T,P)},o.resetTransform=function(){l.resetTransform(),this.__originalResetTransform()},o.rotate=function(o){l.rotate(o),this.__originalRotate(o)},o.clip=function(o){l.clip(o),this.__originalClip(o)},o.moveTo=function(o,_){l.moveTo(o,_),this.__originalMoveTo(o,_)},o.lineTo=function(o,_){l.lineTo(o,_),this.__originalLineTo(o,_)},o.bezierCurveTo=function(o,_,S,E,T,P){l.bezierCurveTo(o,_,S,E,T,P),this.__originalBezierCurveTo(o,_,S,E,T,P)},o.rect=function(o,_,S,E){l.rect(o,_,S,E),this.__originalRect(o,_,S,E)},o.closePath=function(){l.closePath(),this.__originalClosePath()},o.beginPath=function(){l.beginPath(),this.__originalBeginPath()}}class z{constructor(o){this.canvasFactory=o,this.cache=Object.create(null)}getCanvas(o,l,_){let S;return void 0!==this.cache[o]?(S=this.cache[o],this.canvasFactory.reset(S,l,_)):(S=this.canvasFactory.create(l,_),this.cache[o]=S),S}delete(o){delete this.cache[o]}clear(){for(let o in this.cache){let l=this.cache[o];this.canvasFactory.destroy(l),delete this.cache[o]}}}function H(o,l,_,E,T,P,M,F,O,I){let[D,L,N,U,W,z]=(0,S.getCurrentTransform)(o);if(0===L&&0===N){let S=M*D+W,H=Math.round(S),V=F*U+z,$=Math.round(V),Y=(M+O)*D+W,K=Math.abs(Math.round(Y)-H)||1,J=(F+I)*U+z,Q=Math.abs(Math.round(J)-$)||1;return o.setTransform(Math.sign(D),0,0,Math.sign(U),H,$),o.drawImage(l,_,E,T,P,0,0,K,Q),o.setTransform(D,L,N,U,W,z),[K,Q]}if(0===D&&0===U){let S=F*N+W,H=Math.round(S),V=M*L+z,$=Math.round(V),Y=(F+I)*N+W,K=Math.abs(Math.round(Y)-H)||1,J=(M+O)*L+z,Q=Math.abs(Math.round(J)-$)||1;return o.setTransform(0,Math.sign(L),Math.sign(N),0,H,$),o.drawImage(l,_,E,T,P,0,0,Q,K),o.setTransform(D,L,N,U,W,z),[Q,K]}o.drawImage(l,_,E,T,P,M,F,O,I);let H=Math.hypot(D,L),V=Math.hypot(N,U);return[H*O,V*I]}function V(o){let l,_,S;let{width:E,height:T}=o;if(E>N||T>N)return null;let P=1e3,M=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),F=E+1,O=new Uint8Array(F*(T+1)),I=E+7&-8,D=new Uint8Array(I*T),L=0;for(let l of o.data){let o=128;for(;o>0;)D[L++]=l&o?0:255,o>>=1}let U=0;for(0!==D[L=0]&&(O[0]=1,++U),_=1;_<E;_++)D[L]!==D[L+1]&&(O[_]=D[L]?2:1,++U),L++;for(0!==D[L]&&(O[_]=2,++U),l=1;l<T;l++){L=l*I,S=l*F,D[L-I]!==D[L]&&(O[S]=D[L]?1:8,++U);let o=(D[L]?4:0)+(D[L-I]?8:0);for(_=1;_<E;_++)M[o=(o>>2)+(D[L+1]?4:0)+(D[L-I+1]?8:0)]&&(O[S+_]=M[o],++U),L++;if(D[L-I]!==D[L]&&(O[S+_]=D[L]?2:4,++U),U>P)return null}for(L=I*(T-1),S=l*F,0!==D[L]&&(O[S]=8,++U),_=1;_<E;_++)D[L]!==D[L+1]&&(O[S+_]=D[L]?4:8,++U),L++;if(0!==D[L]&&(O[S+_]=4,++U),U>P)return null;let W=new Int32Array([0,F,-1,0,-F,0,0,0,1]),z=new Path2D;for(l=0;U&&l<=T;l++){let o=l*F,_=o+E;for(;o<_&&!O[o];)o++;if(o===_)continue;z.moveTo(o%F,l);let S=o,T=O[o];do{let l=W[T];do o+=l;while(!O[o]);let _=O[o];5!==_&&10!==_?(T=_,O[o]=0):(T=_&51*T>>4,O[o]&=T>>2|T<<2),z.lineTo(o%F,o/F|0),!O[o]&&--U}while(S!==o);--l}D=null,O=null;let H=function(o){o.save(),o.scale(1/E,-1/T),o.translate(0,-T),o.fill(z),o.beginPath(),o.restore()};return H}class ${constructor(o,l){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=E.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=E.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=E.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,o,l])}clone(){let o=Object.create(this);return o.clipBox=this.clipBox.slice(),o}setCurrentPoint(o,l){this.x=o,this.y=l}updatePathMinMax(o,l,_){[l,_]=E.Util.applyTransform([l,_],o),this.minX=Math.min(this.minX,l),this.minY=Math.min(this.minY,_),this.maxX=Math.max(this.maxX,l),this.maxY=Math.max(this.maxY,_)}updateRectMinMax(o,l){let _=E.Util.applyTransform(l,o),S=E.Util.applyTransform(l.slice(2),o);this.minX=Math.min(this.minX,_[0],S[0]),this.minY=Math.min(this.minY,_[1],S[1]),this.maxX=Math.max(this.maxX,_[0],S[0]),this.maxY=Math.max(this.maxY,_[1],S[1])}updateScalingPathMinMax(o,l){E.Util.scaleMinMax(o,l),this.minX=Math.min(this.minX,l[0]),this.maxX=Math.max(this.maxX,l[1]),this.minY=Math.min(this.minY,l[2]),this.maxY=Math.max(this.maxY,l[3])}updateCurvePathMinMax(o,l,_,S,T,P,M,F,O,I){let D=E.Util.bezierBoundingBox(l,_,S,T,P,M,F,O);if(I){I[0]=Math.min(I[0],D[0],D[2]),I[1]=Math.max(I[1],D[0],D[2]),I[2]=Math.min(I[2],D[1],D[3]),I[3]=Math.max(I[3],D[1],D[3]);return}this.updateRectMinMax(o,D)}getPathBoundingBox(o=T.PathType.FILL,l=null){let _=[this.minX,this.minY,this.maxX,this.maxY];if(o===T.PathType.STROKE){l||(0,E.unreachable)("Stroke bounding box must include transform.");let o=E.Util.singularValueDecompose2dScale(l),S=o[0]*this.lineWidth/2,T=o[1]*this.lineWidth/2;_[0]-=S,_[1]-=T,_[2]+=S,_[3]+=T}return _}updateClipFromPath(){let o=E.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(o||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(o){this.clipBox=o,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(o=T.PathType.FILL,l=null){return E.Util.intersect(this.clipBox,this.getPathBoundingBox(o,l))}}function Y(o,l,_=null){let S,T,P,M,F,O,I,D;if("undefined"!=typeof ImageData&&l instanceof ImageData){o.putImageData(l,0,0);return}let L=l.height,N=l.width,W=L%U,z=(L-W)/U,H=0===W?z:z+1,V=o.createImageData(N,U),$=0,Y,K=l.data,J=V.data;if(_)switch(_.length){case 1:F=_[0],O=_[0],I=_[0],D=_[0];break;case 4:F=_[0],O=_[1],I=_[2],D=_[3]}if(l.kind===E.ImageKind.GRAYSCALE_1BPP){let l=K.byteLength,_=new Uint32Array(J.buffer,0,J.byteLength>>2),M=_.length,F=N+7>>3,O=4294967295,I=E.FeatureTest.isLittleEndian?4278190080:255;for(D&&255===D[0]&&0===D[255]&&([O,I]=[I,O]),S=0;S<H;S++){for(T=0,P=S<z?U:W,Y=0;T<P;T++){let o=l-$,S=0,E=o>F?N:8*o-7,T=-8&E,P=0,M=0;for(;S<T;S+=8)M=K[$++],_[Y++]=128&M?O:I,_[Y++]=64&M?O:I,_[Y++]=32&M?O:I,_[Y++]=16&M?O:I,_[Y++]=8&M?O:I,_[Y++]=4&M?O:I,_[Y++]=2&M?O:I,_[Y++]=1&M?O:I;for(;S<E;S++)0===P&&(M=K[$++],P=128),_[Y++]=M&P?O:I,P>>=1}for(;Y<M;)_[Y++]=0;o.putImageData(V,0,S*U)}}else if(l.kind===E.ImageKind.RGBA_32BPP){let l=!!(F||O||I);for(S=0,T=0,M=N*U*4;S<z;S++){if(J.set(K.subarray($,$+M)),$+=M,l)for(let o=0;o<M;o+=4)F&&(J[o+0]=F[J[o+0]]),O&&(J[o+1]=O[J[o+1]]),I&&(J[o+2]=I[J[o+2]]);o.putImageData(V,0,T),T+=U}if(S<H){if(M=N*W*4,J.set(K.subarray($,$+M)),l)for(let o=0;o<M;o+=4)F&&(J[o+0]=F[J[o+0]]),O&&(J[o+1]=O[J[o+1]]),I&&(J[o+2]=I[J[o+2]]);o.putImageData(V,0,T)}}else if(l.kind===E.ImageKind.RGB_24BPP){let l=!!(F||O||I);for(S=0,M=N*(P=U);S<H;S++){for(S>=z&&(M=N*(P=W)),Y=0,T=M;T--;)J[Y++]=K[$++],J[Y++]=K[$++],J[Y++]=K[$++],J[Y++]=255;if(l)for(let o=0;o<Y;o+=4)F&&(J[o+0]=F[J[o+0]]),O&&(J[o+1]=O[J[o+1]]),I&&(J[o+2]=I[J[o+2]]);o.putImageData(V,0,S*U)}}else throw Error(`bad image kind: ${l.kind}`)}function K(o,l){if(l.bitmap){o.drawImage(l.bitmap,0,0);return}let _=l.height,S=l.width,E=_%U,T=(_-E)/U,M=0===E?T:T+1,F=o.createImageData(S,U),O=0,I=l.data,D=F.data;for(let l=0;l<M;l++){let _=l<T?U:E;({srcPos:O}=(0,P.applyMaskImageData)({src:I,srcPos:O,dest:D,width:S,height:_})),o.putImageData(F,0,l*U)}}function J(o,l){let _=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let S=0,E=_.length;S<E;S++){let E=_[S];void 0!==o[E]&&(l[E]=o[E])}void 0!==o.setLineDash&&(l.setLineDash(o.getLineDash()),l.lineDashOffset=o.lineDashOffset)}function Q(o,l){o.strokeStyle=o.fillStyle=l||"#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",void 0!==o.setLineDash&&(o.setLineDash([]),o.lineDashOffset=0)}function Z(o,l,_,S){let E=o.length;for(let T=3;T<E;T+=4){let E=o[T];if(0===E)o[T-3]=l,o[T-2]=_,o[T-1]=S;else if(E<255){let P=255-E;o[T-3]=o[T-3]*E+l*P>>8,o[T-2]=o[T-2]*E+_*P>>8,o[T-1]=o[T-1]*E+S*P>>8}}}function tt(o,l,_){let S=o.length,E=1/255;for(let T=3;T<S;T+=4){let S=_?_[o[T]]:o[T];l[T]=l[T]*S*E|0}}function te(o,l,_){let S=o.length;for(let E=3;E<S;E+=4){let S=77*o[E-3]+152*o[E-2]+28*o[E-1];l[E]=_?l[E]*_[S>>8]>>8:l[E]*S>>16}}function ti(o,l,_,S,E,T,P,M,F,O,I){let D;let L=!!T,N=L?T[0]:0,U=L?T[1]:0,W=L?T[2]:0;D="Luminosity"===E?te:tt;let z=1048576,H=Math.min(S,Math.ceil(z/_));for(let E=0;E<S;E+=H){let T=Math.min(H,S-E),z=o.getImageData(M-O,E+(F-I),_,T),V=l.getImageData(M,E+F,_,T);L&&Z(z.data,N,U,W),D(z.data,V.data,P),l.putImageData(V,M,E+F)}}function tr(o,l,_,S){let E=S[0],T=S[1],P=S[2]-E,M=S[3]-T;0!==P&&0!==M&&(ti(l.context,_,P,M,l.subtype,l.backdrop,l.transferMap,E,T,l.offsetX,l.offsetY),o.save(),o.globalAlpha=1,o.globalCompositeOperation="source-over",o.setTransform(1,0,0,1,0,0),o.drawImage(_.canvas,0,0),o.restore())}function ta(o,l){let _=E.Util.singularValueDecompose2dScale(o);_[0]=Math.fround(_[0]),_[1]=Math.fround(_[1]);let T=Math.fround((globalThis.devicePixelRatio||1)*S.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==l?l:_[0]<=T||_[1]<=T}let tn=["butt","round","square"],to=["miter","round","bevel"],tl={},th={};class td{constructor(o,l,_,S,E,T,P,M){this.ctx=o,this.current=new $(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=l,this.objs=_,this.canvasFactory=S,this.imageLayer=E,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=T,this.cachedCanvases=new z(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=P,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=M?.background||null,this.foregroundColor=M?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(o,l=null){return"string"==typeof o?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):l}beginDrawing({transform:o,viewport:l,transparency:_=!1,background:E=null}){let T=this.ctx.canvas.width,P=this.ctx.canvas.height,M=E||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;let o=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;let l=this.backgroundColor=this.ctx.fillStyle,_=!0,E=M;if(this.ctx.fillStyle=M,_="string"==typeof(E=this.ctx.fillStyle)&&/^#[0-9A-Fa-f]{6}$/.test(E),("#000000"!==o||"#ffffff"!==l)&&o!==l&&_){let[_,T,P]=(0,S.getRGB)(E),M=o=>(o/=255)<=.03928?o/12.92:((o+.055)/1.055)**2.4,F=Math.round(.2126*M(_)+.7152*M(T)+.0722*M(P));this.selectColor=(_,S,E)=>{let T=.2126*M(_)+.7152*M(S)+.0722*M(E);return Math.round(T)===F?l:o}}else this.foregroundColor=this.backgroundColor=null}if(this.ctx.fillStyle=this.backgroundColor||M,this.ctx.fillRect(0,0,T,P),this.ctx.restore(),_){let o=this.cachedCanvases.getCanvas("transparent",T,P);this.compositeCtx=this.ctx,this.transparentCanvas=o.canvas,this.ctx=o.context,this.ctx.save(),this.ctx.transform(...(0,S.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Q(this.ctx,this.foregroundColor),o&&(this.ctx.transform(...o),this.outputScaleX=o[0],this.outputScaleY=o[0]),this.ctx.transform(...l.transform),this.viewportScale=l.scale,this.baseTransform=(0,S.getCurrentTransform)(this.ctx),this.imageLayer&&((0,S.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(o,l,_,S){let T;let P=o.argsArray,M=o.fnArray,F=l||0,O=P.length;if(O===F)return F;let I=O-F>L&&"function"==typeof _,N=I?Date.now()+D:0,U=0,W=this.commonObjs,z=this.objs;for(;;){if(void 0!==S&&F===S.nextBreakPoint)return S.breakIt(F,_),F;if((T=M[F])!==E.OPS.dependency)this[T].apply(this,P[F]);else for(let o of P[F]){let l=o.startsWith("g_")?W:z;if(!l.has(o))return l.get(o,_),F}if(++F===O)return F;if(I&&++U>L){if(Date.now()>N)return _(),F;U=0}}}#J(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){for(let o of(this.#J(),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this._cachedBitmapsMap.values())){for(let l of o.values())"undefined"!=typeof HTMLCanvasElement&&l instanceof HTMLCanvasElement&&(l.width=l.height=0);o.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(o,l){let _,S;let E=o.width,T=o.height,P=Math.max(Math.hypot(l[0],l[1]),1),M=Math.max(Math.hypot(l[2],l[3]),1),F=E,O=T,I="prescale1";for(;P>2&&F>1||M>2&&O>1;){let l=F,E=O;P>2&&F>1&&(l=Math.ceil(F/2),P/=F/l),M>2&&O>1&&(E=Math.ceil(O/2),M/=O/E),(S=(_=this.cachedCanvases.getCanvas(I,l,E)).context).clearRect(0,0,l,E),S.drawImage(o,0,0,F,O,0,0,l,E),o=_.canvas,F=l,O=E,I="prescale1"===I?"prescale2":"prescale1"}return{img:o,paintWidth:F,paintHeight:O}}_createMaskCanvas(o){let l,_,P,M;let F=this.ctx,{width:O,height:I}=o,D=this.current.fillColor,L=this.current.patternFill,N=(0,S.getCurrentTransform)(F);if((o.bitmap||o.data)&&o.count>1){let S=o.bitmap||o.data.buffer,E=N.slice(0,4);_=JSON.stringify(L?E:[E,D]),(l=this._cachedBitmapsMap.get(S))||(l=new Map,this._cachedBitmapsMap.set(S,l));let T=l.get(_);if(T&&!L){let o=Math.round(Math.min(N[0],N[2])+N[4]),l=Math.round(Math.min(N[1],N[3])+N[5]);return{canvas:T,offsetX:o,offsetY:l}}P=T}P||K((M=this.cachedCanvases.getCanvas("maskCanvas",O,I)).context,o);let U=E.Util.transform(N,[1/O,0,0,-1/I,0,0]);U=E.Util.transform(U,[1,0,0,1,0,-I]);let W=E.Util.applyTransform([0,0],U),z=E.Util.applyTransform([O,I],U),V=E.Util.normalizeRect([W[0],W[1],z[0],z[1]]),$=Math.round(V[2]-V[0])||1,Y=Math.round(V[3]-V[1])||1,J=this.cachedCanvases.getCanvas("fillCanvas",$,Y),Q=J.context,Z=Math.min(W[0],z[0]),tt=Math.min(W[1],z[1]);Q.translate(-Z,-tt),Q.transform(...U),!P&&(P=(P=this._scaleImage(M.canvas,(0,S.getCurrentTransformInverse)(Q))).img,l&&L&&l.set(_,P)),Q.imageSmoothingEnabled=ta((0,S.getCurrentTransform)(Q),o.interpolate),H(Q,P,0,0,P.width,P.height,0,0,O,I),Q.globalCompositeOperation="source-in";let te=E.Util.transform((0,S.getCurrentTransformInverse)(Q),[1,0,0,1,-Z,-tt]);return Q.fillStyle=L?D.getPattern(F,this,te,T.PathType.FILL):D,Q.fillRect(0,0,O,I),l&&!L&&(this.cachedCanvases.delete("fillCanvas"),l.set(_,J.canvas)),{canvas:J.canvas,offsetX:Math.round(Z),offsetY:Math.round(tt)}}setLineWidth(o){o!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=tn[o]}setLineJoin(o){this.ctx.lineJoin=to[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,l){let _=this.ctx;void 0!==_.setLineDash&&(_.setLineDash(o),_.lineDashOffset=l)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(let l=0,_=o.length;l<_;l++){let _=o[l],S=_[0],E=_[1];switch(S){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E[0],E[1]);break;case"CA":this.current.strokeAlpha=_[1];break;case"ca":this.current.fillAlpha=_[1],this.ctx.globalAlpha=_[1];break;case"BM":this.ctx.globalCompositeOperation=E;break;case"SMask":this.current.activeSMask=E?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=E}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let o=this.inSMaskMode;this.current.activeSMask&&!o?this.beginSMaskMode():!this.current.activeSMask&&o&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw Error("beginSMaskMode called while already in smask mode");let o=this.ctx.canvas.width,l=this.ctx.canvas.height,_="smaskGroupAt"+this.groupLevel,E=this.cachedCanvases.getCanvas(_,o,l);this.suspendedCtx=this.ctx,this.ctx=E.context;let T=this.ctx;T.setTransform(...(0,S.getCurrentTransform)(this.suspendedCtx)),J(this.suspendedCtx,T),W(T,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),J(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(o){if(!this.current.activeSMask)return;o?(o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.ceil(o[2]),o[3]=Math.ceil(o[3])):o=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let l=this.current.activeSMask,_=this.suspendedCtx;tr(_,l,this.ctx,o),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(J(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let o=this.current;this.stateStack.push(o),this.current=o.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),J(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(o,l,_,S,E,T){this.ctx.transform(o,l,_,S,E,T),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(o,l,_){let T,P;let M=this.ctx,F=this.current,O=F.x,I=F.y,D=(0,S.getCurrentTransform)(M),L=0===D[0]&&0===D[3]||0===D[1]&&0===D[2],N=L?_.slice(0):null;for(let _=0,S=0,U=o.length;_<U;_++)switch(0|o[_]){case E.OPS.rectangle:O=l[S++],I=l[S++];let U=l[S++],W=l[S++],z=O+U,H=I+W;M.moveTo(O,I),0===U||0===W?M.lineTo(z,H):(M.lineTo(z,I),M.lineTo(z,H),M.lineTo(O,H)),L||F.updateRectMinMax(D,[O,I,z,H]),M.closePath();break;case E.OPS.moveTo:O=l[S++],I=l[S++],M.moveTo(O,I),L||F.updatePathMinMax(D,O,I);break;case E.OPS.lineTo:O=l[S++],I=l[S++],M.lineTo(O,I),L||F.updatePathMinMax(D,O,I);break;case E.OPS.curveTo:T=O,P=I,O=l[S+4],I=l[S+5],M.bezierCurveTo(l[S],l[S+1],l[S+2],l[S+3],O,I),F.updateCurvePathMinMax(D,T,P,l[S],l[S+1],l[S+2],l[S+3],O,I,N),S+=6;break;case E.OPS.curveTo2:T=O,P=I,M.bezierCurveTo(O,I,l[S],l[S+1],l[S+2],l[S+3]),F.updateCurvePathMinMax(D,T,P,O,I,l[S],l[S+1],l[S+2],l[S+3],N),O=l[S+2],I=l[S+3],S+=4;break;case E.OPS.curveTo3:T=O,P=I,O=l[S+2],I=l[S+3],M.bezierCurveTo(l[S],l[S+1],O,I,O,I),F.updateCurvePathMinMax(D,T,P,l[S],l[S+1],O,I,O,I,N),S+=4;break;case E.OPS.closePath:M.closePath()}L&&F.updateScalingPathMinMax(D,N),F.setCurrentPoint(O,I)}closePath(){this.ctx.closePath()}stroke(o){o=void 0===o||o;let l=this.ctx,_=this.current.strokeColor;l.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof _&&_?.getPattern?(l.save(),l.strokeStyle=_.getPattern(l,this,(0,S.getCurrentTransformInverse)(l),T.PathType.STROKE),this.rescaleAndStroke(!1),l.restore()):this.rescaleAndStroke(!0)),o&&this.consumePath(this.current.getClippedPathBoundingBox()),l.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o){o=void 0===o||o;let l=this.ctx,_=this.current.fillColor,E=this.current.patternFill,P=!1;E&&(l.save(),l.fillStyle=_.getPattern(l,this,(0,S.getCurrentTransformInverse)(l),T.PathType.FILL),P=!0);let M=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==M&&(this.pendingEOFill?(l.fill("evenodd"),this.pendingEOFill=!1):l.fill()),P&&l.restore(),o&&this.consumePath(M)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=tl}eoClip(){this.pendingClip=th}beginText(){this.current.textMatrix=E.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let o=this.pendingTextPaths,l=this.ctx;if(void 0===o){l.beginPath();return}for(let _ of(l.save(),l.beginPath(),o))l.setTransform(..._.transform),l.translate(_.x,_.y),_.addToPath(l,_.fontSize);l.restore(),l.clip(),l.beginPath(),delete this.pendingTextPaths}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,l){let _=this.commonObjs.get(o),S=this.current;if(!_)throw Error(`Can't find font for ${o}`);if(S.fontMatrix=_.fontMatrix||E.FONT_IDENTITY_MATRIX,(0===S.fontMatrix[0]||0===S.fontMatrix[3])&&(0,E.warn)("Invalid font matrix for font "+o),l<0?(l=-l,S.fontDirection=-1):S.fontDirection=1,this.current.font=_,this.current.fontSize=l,_.isType3Font)return;let T=_.loadedName||"sans-serif",P="normal";_.black?P="900":_.bold&&(P="bold");let M=_.italic?"italic":"normal",I=`"${T}", ${_.fallbackName}`,D=l;l<F?D=F:l>O&&(D=O),this.current.fontSizeScale=l/D,this.ctx.font=`${M} ${P} ${D}px ${I}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,l){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=l}setLeadingMoveText(o,l){this.setLeading(-l),this.moveText(o,l)}setTextMatrix(o,l,_,S,E,T){this.current.textMatrix=[o,l,_,S,E,T],this.current.textMatrixScale=Math.hypot(o,l),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,l,_,T){let P;let M=this.ctx,F=this.current,O=F.font,I=F.textRenderingMode,D=F.fontSize/F.fontSizeScale,L=I&E.TextRenderingMode.FILL_STROKE_MASK,N=!!(I&E.TextRenderingMode.ADD_TO_PATH_FLAG),U=F.patternFill&&!O.missingFile;if((O.disableFontFace||N||U)&&(P=O.getPathGenerator(this.commonObjs,o)),O.disableFontFace||U?(M.save(),M.translate(l,_),M.beginPath(),P(M,D),T&&M.setTransform(...T),(L===E.TextRenderingMode.FILL||L===E.TextRenderingMode.FILL_STROKE)&&M.fill(),(L===E.TextRenderingMode.STROKE||L===E.TextRenderingMode.FILL_STROKE)&&M.stroke(),M.restore()):((L===E.TextRenderingMode.FILL||L===E.TextRenderingMode.FILL_STROKE)&&M.fillText(o,l,_),(L===E.TextRenderingMode.STROKE||L===E.TextRenderingMode.FILL_STROKE)&&M.strokeText(o,l,_)),N){let o=this.pendingTextPaths||(this.pendingTextPaths=[]);o.push({transform:(0,S.getCurrentTransform)(M),x:l,y:_,fontSize:D,addToPath:P})}}get isFontSubpixelAAEnabled(){let{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);let l=o.getImageData(0,0,10,10).data,_=!1;for(let o=3;o<l.length;o+=4)if(l[o]>0&&l[o]<255){_=!0;break}return(0,E.shadow)(this,"isFontSubpixelAAEnabled",_)}showText(o){let l;let _=this.current,P=_.font;if(P.isType3Font)return this.showType3Text(o);let M=_.fontSize;if(0===M)return;let F=this.ctx,O=_.fontSizeScale,I=_.charSpacing,D=_.wordSpacing,L=_.fontDirection,N=_.textHScale*L,U=o.length,W=P.vertical,z=W?1:-1,H=P.defaultVMetrics,V=M*_.fontMatrix[0],$=_.textRenderingMode===E.TextRenderingMode.FILL&&!P.disableFontFace&&!_.patternFill;if(F.save(),F.transform(..._.textMatrix),F.translate(_.x,_.y+_.textRise),L>0?F.scale(N,-1):F.scale(N,1),_.patternFill){F.save();let o=_.fillColor.getPattern(F,this,(0,S.getCurrentTransformInverse)(F),T.PathType.FILL);l=(0,S.getCurrentTransform)(F),F.restore(),F.fillStyle=o}let Y=_.lineWidth,K=_.textMatrixScale;if(0===K||0===Y){let o=_.textRenderingMode&E.TextRenderingMode.FILL_STROKE_MASK;(o===E.TextRenderingMode.STROKE||o===E.TextRenderingMode.FILL_STROKE)&&(Y=this.getSinglePixelWidth())}else Y/=K;1!==O&&(F.scale(O,O),Y/=O),F.lineWidth=Y;let J=0,Q;for(Q=0;Q<U;++Q){let _,S,E;let T=o[Q];if("number"==typeof T){J+=z*T*M/1e3;continue}let N=!1,U=(T.isSpace?D:0)+I,Y=T.fontChar,K=T.accent,Z=T.width;if(W){let o=T.vmetric||H,l=-(T.vmetric?o[1]:.5*Z)*V,E=o[2]*V;Z=o?-o[0]:Z,_=l/O,S=(J+E)/O}else _=J/O,S=0;if(P.remeasure&&Z>0){let o=1e3*F.measureText(Y).width/M*O;if(Z<o&&this.isFontSubpixelAAEnabled){let l=Z/o;N=!0,F.save(),F.scale(l,1),_/=l}else Z!==o&&(_+=(Z-o)/2e3*M/O)}if(this.contentVisible&&(T.isInFont||P.missingFile)){if($&&!K)F.fillText(Y,_,S);else if(this.paintChar(Y,_,S,l),K){let o=_+M*K.offset.x/O,E=S-M*K.offset.y/O;this.paintChar(K.fontChar,o,E,l)}}J+=E=W?Z*V-U*L:Z*V+U*L,N&&F.restore()}W?_.y-=J:_.x+=J*N,F.restore(),this.compose()}showType3Text(o){let l,_,S,T;let P=this.ctx,M=this.current,F=M.font,O=M.fontSize,I=M.fontDirection,D=F.vertical?1:-1,L=M.charSpacing,N=M.wordSpacing,U=M.textHScale*I,W=M.fontMatrix||E.FONT_IDENTITY_MATRIX,z=o.length,H=M.textRenderingMode===E.TextRenderingMode.INVISIBLE;if(!H&&0!==O){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,P.save(),P.transform(...M.textMatrix),P.translate(M.x,M.y),P.scale(U,I),l=0;l<z;++l){if("number"==typeof(_=o[l])){T=D*_*O/1e3,this.ctx.translate(T,0),M.x+=T*U;continue}let I=(_.isSpace?N:0)+L,z=F.charProcOperatorList[_.operatorListId];if(!z){(0,E.warn)(`Type3 character "${_.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=_,this.save(),P.scale(O,O),P.transform(...W),this.executeOperatorList(z),this.restore());let H=E.Util.applyTransform([_.width,0],W);S=H[0]*O+I,P.translate(S,0),M.x+=S*U}P.restore(),this.processingType3=null}}setCharWidth(o,l){}setCharWidthAndBounds(o,l,_,S,E,T){this.ctx.rect(_,S,E-_,T-S),this.ctx.clip(),this.endPath()}getColorN_Pattern(o){let l;if("TilingPattern"===o[0]){let _=o[1],E=this.baseTransform||(0,S.getCurrentTransform)(this.ctx),P={createCanvasGraphics:o=>new td(o,this.commonObjs,this.objs,this.canvasFactory)};l=new T.TilingPattern(o,_,this.ctx,P,E)}else l=this._getPattern(o[1],o[2]);return l}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,l,_){let S=this.selectColor?.(o,l,_)||E.Util.makeHexColor(o,l,_);this.ctx.strokeStyle=S,this.current.strokeColor=S}setFillRGBColor(o,l,_){let S=this.selectColor?.(o,l,_)||E.Util.makeHexColor(o,l,_);this.ctx.fillStyle=S,this.current.fillColor=S,this.current.patternFill=!1}_getPattern(o,l=null){let _;return this.cachedPatterns.has(o)?_=this.cachedPatterns.get(o):(_=(0,T.getShadingPattern)(this.objs.get(o)),this.cachedPatterns.set(o,_)),l&&(_.matrix=l),_}shadingFill(o){if(!this.contentVisible)return;let l=this.ctx;this.save();let _=this._getPattern(o);l.fillStyle=_.getPattern(l,this,(0,S.getCurrentTransformInverse)(l),T.PathType.SHADING);let P=(0,S.getCurrentTransformInverse)(l);if(P){let o=l.canvas,_=o.width,S=o.height,T=E.Util.applyTransform([0,0],P),M=E.Util.applyTransform([0,S],P),F=E.Util.applyTransform([_,0],P),O=E.Util.applyTransform([_,S],P),I=Math.min(T[0],M[0],F[0],O[0]),D=Math.min(T[1],M[1],F[1],O[1]),L=Math.max(T[0],M[0],F[0],O[0]),N=Math.max(T[1],M[1],F[1],O[1]);this.ctx.fillRect(I,D,L-I,N-D)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,E.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,E.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,l){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&6===o.length&&this.transform(...o),this.baseTransform=(0,S.getCurrentTransform)(this.ctx),l)){let o=l[2]-l[0],_=l[3]-l[1];this.ctx.rect(l[0],l[1],o,_),this.current.updateRectMinMax((0,S.getCurrentTransform)(this.ctx),l),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let l=this.ctx;o.isolated||(0,E.info)("TODO: Support non-isolated groups."),o.knockout&&(0,E.warn)("Knockout groups not supported.");let _=(0,S.getCurrentTransform)(l);if(o.matrix&&l.transform(...o.matrix),!o.bbox)throw Error("Bounding box is required.");let T=E.Util.getAxialAlignedBoundingBox(o.bbox,(0,S.getCurrentTransform)(l)),P=[0,0,l.canvas.width,l.canvas.height];T=E.Util.intersect(T,P)||[0,0,0,0];let M=Math.floor(T[0]),F=Math.floor(T[1]),O=Math.max(Math.ceil(T[2])-M,1),D=Math.max(Math.ceil(T[3])-F,1),L=1,N=1;O>I&&(L=O/I,O=I),D>I&&(N=D/I,D=I),this.current.startNewPathAndClipBox([0,0,O,D]);let U="groupAt"+this.groupLevel;o.smask&&(U+="_smask_"+this.smaskCounter++%2);let W=this.cachedCanvases.getCanvas(U,O,D),z=W.context;z.scale(1/L,1/N),z.translate(-M,-F),z.transform(..._),o.smask?this.smaskStack.push({canvas:W.canvas,context:z,offsetX:M,offsetY:F,scaleX:L,scaleY:N,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(l.setTransform(1,0,0,1,0,0),l.translate(M,F),l.scale(L,N),l.save()),J(l,z),this.ctx=z,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;let l=this.ctx,_=this.groupStack.pop();if(this.ctx=_,this.ctx.imageSmoothingEnabled=!1,o.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let o=(0,S.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...o);let _=E.Util.getAxialAlignedBoundingBox([0,0,l.canvas.width,l.canvas.height],o);this.ctx.drawImage(l.canvas,0,0),this.ctx.restore(),this.compose(_)}}beginAnnotation(o,l,_,T,P){if(this.#J(),Q(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(l)&&4===l.length){let T=l[2]-l[0],M=l[3]-l[1];if(P&&this.annotationCanvasMap){_=_.slice(),_[4]-=l[0],_[5]-=l[1],(l=l.slice())[0]=l[1]=0,l[2]=T,l[3]=M;let[P,F]=E.Util.singularValueDecompose2dScale((0,S.getCurrentTransform)(this.ctx)),{viewportScale:O}=this,I=Math.ceil(T*this.outputScaleX*O),D=Math.ceil(M*this.outputScaleY*O);this.annotationCanvas=this.canvasFactory.create(I,D);let{canvas:L,context:N}=this.annotationCanvas;this.annotationCanvasMap.set(o,L),this.annotationCanvas.savedCtx=this.ctx,this.ctx=N,this.ctx.setTransform(P,0,0,-F,0,M*F),Q(this.ctx,this.foregroundColor)}else Q(this.ctx,this.foregroundColor),this.ctx.rect(l[0],l[1],T,M),this.ctx.clip(),this.endPath()}this.current=new $(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(..._),this.transform(...T)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(o){if(!this.contentVisible)return;let l=o.count;(o=this.getObject(o.data,o)).count=l;let _=this.ctx,S=this.processingType3;if(S&&(void 0===S.compiled&&(S.compiled=V(o)),S.compiled)){S.compiled(_);return}let E=this._createMaskCanvas(o),T=E.canvas;_.save(),_.setTransform(1,0,0,1,0,0),_.drawImage(T,E.offsetX,E.offsetY),_.restore(),this.compose()}paintImageMaskXObjectRepeat(o,l,_=0,T=0,P,M){if(!this.contentVisible)return;o=this.getObject(o.data,o);let F=this.ctx;F.save();let O=(0,S.getCurrentTransform)(F);F.transform(l,_,T,P,0,0);let I=this._createMaskCanvas(o);F.setTransform(1,0,0,1,0,0);for(let o=0,S=M.length;o<S;o+=2){let S=E.Util.transform(O,[l,_,T,P,M[o],M[o+1]]),[D,L]=E.Util.applyTransform([0,0],S);F.drawImage(I.canvas,D,L)}F.restore(),this.compose()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;let l=this.ctx,_=this.current.fillColor,E=this.current.patternFill;for(let P of o){let{data:o,width:M,height:F,transform:O}=P,I=this.cachedCanvases.getCanvas("maskCanvas",M,F),D=I.context;D.save();let L=this.getObject(o,P);K(D,L),D.globalCompositeOperation="source-in",D.fillStyle=E?_.getPattern(D,this,(0,S.getCurrentTransformInverse)(l),T.PathType.FILL):_,D.fillRect(0,0,M,F),D.restore(),l.save(),l.transform(...O),l.scale(1,-1),H(l,I.canvas,0,0,M,F,0,-1,1,1),l.restore()}this.compose()}paintImageXObject(o){if(!this.contentVisible)return;let l=this.getObject(o);if(!l){(0,E.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(l)}paintImageXObjectRepeat(o,l,_,S){if(!this.contentVisible)return;let T=this.getObject(o);if(!T){(0,E.warn)("Dependent image isn't ready yet");return}let P=T.width,M=T.height,F=[];for(let o=0,E=S.length;o<E;o+=2)F.push({transform:[l,0,0,_,S[o],S[o+1]],x:0,y:0,w:P,h:M});this.paintInlineImageXObjectGroup(T,F)}paintInlineImageXObject(o){let l;if(!this.contentVisible)return;let _=o.width,T=o.height,P=this.ctx;if(this.save(),P.scale(1/_,-1/T),"function"==typeof HTMLElement&&o instanceof HTMLElement||!o.data)l=o;else{let S=this.cachedCanvases.getCanvas("inlineImage",_,T),E=S.context;Y(E,o,this.current.transferMaps),l=S.canvas}let M=this._scaleImage(l,(0,S.getCurrentTransformInverse)(P));P.imageSmoothingEnabled=ta((0,S.getCurrentTransform)(P),o.interpolate);let[F,O]=H(P,M.img,0,0,M.paintWidth,M.paintHeight,0,-T,_,T);if(this.imageLayer){let[l,_]=E.Util.applyTransform([0,-T],(0,S.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:o,left:l,top:_,width:F,height:O})}this.compose(),this.restore()}paintInlineImageXObjectGroup(o,l){if(!this.contentVisible)return;let _=this.ctx,T=o.width,P=o.height,M=this.cachedCanvases.getCanvas("inlineImage",T,P),F=M.context;for(let O of(Y(F,o,this.current.transferMaps),l)){if(_.save(),_.transform(...O.transform),_.scale(1,-1),H(_,M.canvas,O.x,O.y,O.w,O.h,0,-1,1,1),this.imageLayer){let[l,_]=E.Util.applyTransform([O.x,O.y],(0,S.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:o,left:l,top:_,width:T,height:P})}_.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(o){}markPointProps(o,l){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,l){"OC"===o?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(l)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(o){let l=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(o);let _=this.ctx;this.pendingClip&&(l||(this.pendingClip===th?_.clip("evenodd"):_.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),_.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let o=(0,S.getCurrentTransform)(this.ctx);if(0===o[1]&&0===o[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(o[0]),Math.abs(o[3]));else{let l=Math.abs(o[0]*o[3]-o[2]*o[1]),_=Math.hypot(o[0],o[2]),S=Math.hypot(o[1],o[3]);this._cachedGetSinglePixelWidth=Math.max(_,S)/l}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){let o,l;let{lineWidth:_}=this.current,E=(0,S.getCurrentTransform)(this.ctx);if(0===E[1]&&0===E[2]){let S=Math.abs(E[0]),T=Math.abs(E[3]);if(0===_)o=1/S,l=1/T;else{let E=S*_,P=T*_;o=E<1?1/E:1,l=P<1?1/P:1}}else{let S=Math.abs(E[0]*E[3]-E[2]*E[1]),T=Math.hypot(E[0],E[1]),P=Math.hypot(E[2],E[3]);if(0===_)o=P/S,l=T/S;else{let E=_*S;o=P>E?P/E:1,l=T>E?T/E:1}}this._cachedScaleForStroking=[o,l]}return this._cachedScaleForStroking}rescaleAndStroke(o){let l,_,E;let{ctx:T}=this,{lineWidth:P}=this.current,[M,F]=this.getScaleForStroking();if(T.lineWidth=P||1,1===M&&1===F){T.stroke();return}o&&(l=(0,S.getCurrentTransform)(T),_=T.getLineDash().slice(),E=T.lineDashOffset),T.scale(M,F);let O=Math.max(M,F);T.setLineDash(T.getLineDash().map(o=>o/O)),T.lineDashOffset/=O,T.stroke(),o&&(T.setTransform(...l),T.setLineDash(_),T.lineDashOffset=E)}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}}for(let o in l.CanvasGraphics=td,E.OPS)void 0!==td.prototype[o]&&(td.prototype[E.OPS[o]]=td.prototype[o])},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TilingPattern=l.PathType=void 0,l.getShadingPattern=U;var S=_(1),E=_(8),T=_(3);let P={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function M(o,l){if(!l||T.isNodeJS)return;let _=l[2]-l[0],S=l[3]-l[1],E=new Path2D;E.rect(l[0],l[1],_,S),o.clip(E)}l.PathType=P;class F{constructor(){this.constructor===F&&(0,S.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,S.unreachable)("Abstract method `getPattern` called.")}}class O extends F{constructor(o){super(),this._type=o[1],this._bbox=o[2],this._colorStops=o[3],this._p0=o[4],this._p1=o[5],this._r0=o[6],this._r1=o[7],this.matrix=null}_createGradient(o){let l;for(let _ of("axial"===this._type?l=o.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(l=o.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1)),this._colorStops))l.addColorStop(_[0],_[1]);return l}getPattern(o,l,_,T){let F;if(T===P.STROKE||T===P.FILL){let P=l.current.getClippedPathBoundingBox(T,(0,E.getCurrentTransform)(o))||[0,0,0,0],O=Math.ceil(P[2]-P[0])||1,I=Math.ceil(P[3]-P[1])||1,D=l.cachedCanvases.getCanvas("pattern",O,I,!0),L=D.context;L.clearRect(0,0,L.canvas.width,L.canvas.height),L.beginPath(),L.rect(0,0,L.canvas.width,L.canvas.height),L.translate(-P[0],-P[1]),_=S.Util.transform(_,[1,0,0,1,P[0],P[1]]),L.transform(...l.baseTransform),this.matrix&&L.transform(...this.matrix),M(L,this._bbox),L.fillStyle=this._createGradient(L),L.fill(),F=o.createPattern(D.canvas,"no-repeat");let N=new DOMMatrix(_);try{F.setTransform(N)}catch(o){(0,S.warn)(`RadialAxialShadingPattern.getPattern: "${o?.message}".`)}}else M(o,this._bbox),F=this._createGradient(o);return F}}function I(o,l,_,S,E,T,P,M){let F,O,I,D,L,N,U,W,z;let H=l.coords,V=l.colors,$=o.data,Y=4*o.width;H[_+1]>H[S+1]&&(F=_,_=S,S=F,F=T,T=P,P=F),H[S+1]>H[E+1]&&(F=S,S=E,E=F,F=P,P=M,M=F),H[_+1]>H[S+1]&&(F=_,_=S,S=F,F=T,T=P,P=F);let K=(H[_]+l.offsetX)*l.scaleX,J=(H[_+1]+l.offsetY)*l.scaleY,Q=(H[S]+l.offsetX)*l.scaleX,Z=(H[S+1]+l.offsetY)*l.scaleY,tt=(H[E]+l.offsetX)*l.scaleX,te=(H[E+1]+l.offsetY)*l.scaleY;if(J>=te)return;let ti=V[T],tr=V[T+1],ta=V[T+2],tn=V[P],to=V[P+1],tl=V[P+2],th=V[M],td=V[M+1],tc=V[M+2],tu=Math.round(J),tp=Math.round(te);for(let o=tu;o<=tp;o++){let l;if(o<Z){let l;O=K-(K-Q)*(l=o<J?0:(J-o)/(J-Z)),I=ti-(ti-tn)*l,D=tr-(tr-to)*l,L=ta-(ta-tl)*l}else{let l;O=Q-(Q-tt)*(l=o>te?1:Z===te?0:(Z-o)/(Z-te)),I=tn-(tn-th)*l,D=to-(to-td)*l,L=tl-(tl-tc)*l}N=K-(K-tt)*(l=o<J?0:o>te?1:(J-o)/(J-te)),U=ti-(ti-th)*l,W=tr-(tr-td)*l,z=ta-(ta-tc)*l;let _=Math.round(Math.min(O,N)),S=Math.round(Math.max(O,N)),E=Y*o+4*_;for(let o=_;o<=S;o++)(l=(O-o)/(O-N))<0?l=0:l>1&&(l=1),$[E++]=I-(I-U)*l|0,$[E++]=D-(D-W)*l|0,$[E++]=L-(L-z)*l|0,$[E++]=255}}function D(o,l,_){let S,E;let T=l.coords,P=l.colors;switch(l.type){case"lattice":let M=l.verticesPerRow,F=Math.floor(T.length/M)-1,O=M-1;for(S=0;S<F;S++){let l=S*M;for(let S=0;S<O;S++,l++)I(o,_,T[l],T[l+1],T[l+M],P[l],P[l+1],P[l+M]),I(o,_,T[l+M+1],T[l+1],T[l+M],P[l+M+1],P[l+1],P[l+M])}break;case"triangles":for(S=0,E=T.length;S<E;S+=3)I(o,_,T[S],T[S+1],T[S+2],P[S],P[S+1],P[S+2]);break;default:throw Error("illegal figure")}}class L extends F{constructor(o){super(),this._coords=o[2],this._colors=o[3],this._figures=o[4],this._bounds=o[5],this._bbox=o[7],this._background=o[8],this.matrix=null}_createMeshCanvas(o,l,_){let S=1.1,E=3e3,T=2,P=Math.floor(this._bounds[0]),M=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-P,O=Math.ceil(this._bounds[3])-M,I=Math.min(Math.ceil(Math.abs(F*o[0]*S)),E),L=Math.min(Math.ceil(Math.abs(O*o[1]*S)),E),N=F/I,U=O/L,W={coords:this._coords,colors:this._colors,offsetX:-P,offsetY:-M,scaleX:1/N,scaleY:1/U},z=I+2*T,H=L+2*T,V=_.getCanvas("mesh",z,H,!1),$=V.context,Y=$.createImageData(I,L);if(l){let o=Y.data;for(let _=0,S=o.length;_<S;_+=4)o[_]=l[0],o[_+1]=l[1],o[_+2]=l[2],o[_+3]=255}for(let o of this._figures)D(Y,o,W);$.putImageData(Y,T,T);let K=V.canvas;return{canvas:K,offsetX:P-T*N,offsetY:M-T*U,scaleX:N,scaleY:U}}getPattern(o,l,_,T){let F;if(M(o,this._bbox),T===P.SHADING)F=S.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(o));else if(F=S.Util.singularValueDecompose2dScale(l.baseTransform),this.matrix){let o=S.Util.singularValueDecompose2dScale(this.matrix);F=[F[0]*o[0],F[1]*o[1]]}let O=this._createMeshCanvas(F,T===P.SHADING?null:this._background,l.cachedCanvases);return T!==P.SHADING&&(o.setTransform(...l.baseTransform),this.matrix&&o.transform(...this.matrix)),o.translate(O.offsetX,O.offsetY),o.scale(O.scaleX,O.scaleY),o.createPattern(O.canvas,"no-repeat")}}class N extends F{getPattern(){return"hotpink"}}function U(o){switch(o[0]){case"RadialAxial":return new O(o);case"Mesh":return new L(o);case"Dummy":return new N}throw Error(`Unknown IR type: ${o[0]}`)}let W={COLORED:1,UNCOLORED:2};class z{static get MAX_PATTERN_SIZE(){return(0,S.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(o,l,_,S,E){this.operatorList=o[2],this.matrix=o[3]||[1,0,0,1,0,0],this.bbox=o[4],this.xstep=o[5],this.ystep=o[6],this.paintType=o[7],this.tilingType=o[8],this.color=l,this.ctx=_,this.canvasGraphicsFactory=S,this.baseTransform=E}createPatternCanvas(o){let l=this.operatorList,_=this.bbox,T=this.xstep,P=this.ystep,M=this.paintType,F=this.tilingType,O=this.color,I=this.canvasGraphicsFactory;(0,S.info)("TilingType: "+F);let D=_[0],L=_[1],N=_[2],U=_[3],W=S.Util.singularValueDecompose2dScale(this.matrix),z=S.Util.singularValueDecompose2dScale(this.baseTransform),H=[W[0]*z[0],W[1]*z[1]],V=this.getSizeAndScale(T,this.ctx.canvas.width,H[0]),$=this.getSizeAndScale(P,this.ctx.canvas.height,H[1]),Y=o.cachedCanvases.getCanvas("pattern",V.size,$.size,!0),K=Y.context,J=I.createCanvasGraphics(K);J.groupLevel=o.groupLevel,this.setFillAndStrokeStyleToContext(J,M,O);let Q=D,Z=L,tt=N,te=U;return D<0&&(Q=0,tt+=Math.abs(D)),L<0&&(Z=0,te+=Math.abs(L)),K.translate(-(V.scale*Q),-($.scale*Z)),J.transform(V.scale,0,0,$.scale,0,0),K.save(),this.clipBbox(J,Q,Z,tt,te),J.baseTransform=(0,E.getCurrentTransform)(J.ctx),J.executeOperatorList(l),J.endDrawing(),{canvas:Y.canvas,scaleX:V.scale,scaleY:$.scale,offsetX:Q,offsetY:Z}}getSizeAndScale(o,l,_){o=Math.abs(o);let S=Math.max(z.MAX_PATTERN_SIZE,l),E=Math.ceil(o*_);return E>=S?E=S:_=E/o,{scale:_,size:E}}clipBbox(o,l,_,S,T){let P=S-l,M=T-_;o.ctx.rect(l,_,P,M),o.current.updateRectMinMax((0,E.getCurrentTransform)(o.ctx),[l,_,S,T]),o.clip(),o.endPath()}setFillAndStrokeStyleToContext(o,l,_){let E=o.ctx,T=o.current;switch(l){case W.COLORED:let P=this.ctx;E.fillStyle=P.fillStyle,E.strokeStyle=P.strokeStyle,T.fillColor=P.fillStyle,T.strokeColor=P.strokeStyle;break;case W.UNCOLORED:let M=S.Util.makeHexColor(_[0],_[1],_[2]);E.fillStyle=M,E.strokeStyle=M,T.fillColor=M,T.strokeColor=M;break;default:throw new S.FormatError(`Unsupported paint type: ${l}`)}}getPattern(o,l,_,E){let T=_;E!==P.SHADING&&(T=S.Util.transform(T,l.baseTransform),this.matrix&&(T=S.Util.transform(T,this.matrix)));let M=this.createPatternCanvas(l),F=new DOMMatrix(T);F=(F=F.translate(M.offsetX,M.offsetY)).scale(1/M.scaleX,1/M.scaleY);let O=o.createPattern(M.canvas,"repeat");try{O.setTransform(F)}catch(o){(0,S.warn)(`TilingPattern.getPattern: "${o?.message}".`)}return O}}l.TilingPattern=z},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.applyMaskImageData=E;var S=_(1);function E({src:o,srcPos:l=0,dest:_,destPos:E=0,width:T,height:P,inverseDecode:M=!1}){let F=S.FeatureTest.isLittleEndian?4278190080:255,[O,I]=M?[0,F]:[F,0],D=T>>3,L=7&T,N=o.length;_=new Uint32Array(_.buffer);for(let S=0;S<P;S++){for(let S=l+D;l<S;l++){let S=l<N?o[l]:255;_[E++]=128&S?I:O,_[E++]=64&S?I:O,_[E++]=32&S?I:O,_[E++]=16&S?I:O,_[E++]=8&S?I:O,_[E++]=4&S?I:O,_[E++]=2&S?I:O,_[E++]=1&S?I:O}if(0===L)continue;let S=l<N?o[l++]:255;for(let o=0;o<L;o++)_[E++]=S&1<<7-o?I:O}return{srcPos:l,destPos:E}}},(o,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GlobalWorkerOptions=void 0;let _=Object.create(null);l.GlobalWorkerOptions=_,_.workerPort=void 0===_.workerPort?null:_.workerPort,_.workerSrc=void 0===_.workerSrc?"":_.workerSrc},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MessageHandler=void 0;var S=_(1);let E={UNKNOWN:0,DATA:1,ERROR:2},T={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function P(o){switch(o instanceof Error||"object"==typeof o&&null!==o||(0,S.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new S.AbortException(o.message);case"MissingPDFException":return new S.MissingPDFException(o.message);case"PasswordException":return new S.PasswordException(o.message,o.code);case"UnexpectedResponseException":return new S.UnexpectedResponseException(o.message,o.status);case"UnknownErrorException":return new S.UnknownErrorException(o.message,o.details);default:return new S.UnknownErrorException(o.message,o.toString())}}class M{constructor(o,l,_){this.sourceName=o,this.targetName=l,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=o=>{let l=o.data;if(l.targetName!==this.sourceName)return;if(l.stream){this._processStreamMessage(l);return}if(l.callback){let o=l.callbackId,_=this.callbackCapabilities[o];if(!_)throw Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],l.callback===E.DATA)_.resolve(l.data);else if(l.callback===E.ERROR)_.reject(P(l.reason));else throw Error("Unexpected callback case");return}let S=this.actionHandler[l.action];if(!S)throw Error(`Unknown action from worker: ${l.action}`);if(l.callbackId){let o=this.sourceName,T=l.sourceName;new Promise(function(o){o(S(l.data))}).then(function(S){_.postMessage({sourceName:o,targetName:T,callback:E.DATA,callbackId:l.callbackId,data:S})},function(S){_.postMessage({sourceName:o,targetName:T,callback:E.ERROR,callbackId:l.callbackId,reason:P(S)})});return}if(l.streamId){this._createStreamSink(l);return}S(l.data)},_.addEventListener("message",this._onComObjOnMessage)}on(o,l){let _=this.actionHandler;if(_[o])throw Error(`There is already an actionName called "${o}"`);_[o]=l}send(o,l,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:o,data:l},_)}sendWithPromise(o,l,_){let E=this.callbackId++,T=(0,S.createPromiseCapability)();this.callbackCapabilities[E]=T;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:o,callbackId:E,data:l},_)}catch(o){T.reject(o)}return T.promise}sendWithStream(o,l,_,E){let M=this.streamId++,F=this.sourceName,O=this.targetName,I=this.comObj;return new ReadableStream({start:_=>{let T=(0,S.createPromiseCapability)();return this.streamControllers[M]={controller:_,startCall:T,pullCall:null,cancelCall:null,isClosed:!1},I.postMessage({sourceName:F,targetName:O,action:o,streamId:M,data:l,desiredSize:_.desiredSize},E),T.promise},pull:o=>{let l=(0,S.createPromiseCapability)();return this.streamControllers[M].pullCall=l,I.postMessage({sourceName:F,targetName:O,stream:T.PULL,streamId:M,desiredSize:o.desiredSize}),l.promise},cancel:o=>{(0,S.assert)(o instanceof Error,"cancel must have a valid reason");let l=(0,S.createPromiseCapability)();return this.streamControllers[M].cancelCall=l,this.streamControllers[M].isClosed=!0,I.postMessage({sourceName:F,targetName:O,stream:T.CANCEL,streamId:M,reason:P(o)}),l.promise}},_)}_createStreamSink(o){let l=o.streamId,_=this.sourceName,E=o.sourceName,M=this.comObj,F=this,O=this.actionHandler[o.action],I={enqueue(o,P=1,F){if(this.isCancelled)return;let O=this.desiredSize;this.desiredSize-=P,O>0&&this.desiredSize<=0&&(this.sinkCapability=(0,S.createPromiseCapability)(),this.ready=this.sinkCapability.promise),M.postMessage({sourceName:_,targetName:E,stream:T.ENQUEUE,streamId:l,chunk:o},F)},close(){this.isCancelled||(this.isCancelled=!0,M.postMessage({sourceName:_,targetName:E,stream:T.CLOSE,streamId:l}),delete F.streamSinks[l])},error(o){(0,S.assert)(o instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,M.postMessage({sourceName:_,targetName:E,stream:T.ERROR,streamId:l,reason:P(o)}))},sinkCapability:(0,S.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:o.desiredSize,ready:null};I.sinkCapability.resolve(),I.ready=I.sinkCapability.promise,this.streamSinks[l]=I,new Promise(function(l){l(O(o.data,I))}).then(function(){M.postMessage({sourceName:_,targetName:E,stream:T.START_COMPLETE,streamId:l,success:!0})},function(o){M.postMessage({sourceName:_,targetName:E,stream:T.START_COMPLETE,streamId:l,reason:P(o)})})}_processStreamMessage(o){let l=o.streamId,_=this.sourceName,E=o.sourceName,M=this.comObj,F=this.streamControllers[l],O=this.streamSinks[l];switch(o.stream){case T.START_COMPLETE:o.success?F.startCall.resolve():F.startCall.reject(P(o.reason));break;case T.PULL_COMPLETE:o.success?F.pullCall.resolve():F.pullCall.reject(P(o.reason));break;case T.PULL:if(!O){M.postMessage({sourceName:_,targetName:E,stream:T.PULL_COMPLETE,streamId:l,success:!0});break}O.desiredSize<=0&&o.desiredSize>0&&O.sinkCapability.resolve(),O.desiredSize=o.desiredSize,new Promise(function(o){o(O.onPull&&O.onPull())}).then(function(){M.postMessage({sourceName:_,targetName:E,stream:T.PULL_COMPLETE,streamId:l,success:!0})},function(o){M.postMessage({sourceName:_,targetName:E,stream:T.PULL_COMPLETE,streamId:l,reason:P(o)})});break;case T.ENQUEUE:if((0,S.assert)(F,"enqueue should have stream controller"),F.isClosed)break;F.controller.enqueue(o.chunk);break;case T.CLOSE:if((0,S.assert)(F,"close should have stream controller"),F.isClosed)break;F.isClosed=!0,F.controller.close(),this._deleteStreamController(F,l);break;case T.ERROR:(0,S.assert)(F,"error should have stream controller"),F.controller.error(P(o.reason)),this._deleteStreamController(F,l);break;case T.CANCEL_COMPLETE:o.success?F.cancelCall.resolve():F.cancelCall.reject(P(o.reason)),this._deleteStreamController(F,l);break;case T.CANCEL:if(!O)break;new Promise(function(l){l(O.onCancel&&O.onCancel(P(o.reason)))}).then(function(){M.postMessage({sourceName:_,targetName:E,stream:T.CANCEL_COMPLETE,streamId:l,success:!0})},function(o){M.postMessage({sourceName:_,targetName:E,stream:T.CANCEL_COMPLETE,streamId:l,reason:P(o)})}),O.sinkCapability.reject(P(o.reason)),O.isCancelled=!0,delete this.streamSinks[l];break;default:throw Error("Unexpected stream case")}}async _deleteStreamController(o,l){await Promise.allSettled([o.startCall&&o.startCall.promise,o.pullCall&&o.pullCall.promise,o.cancelCall&&o.cancelCall.promise]),delete this.streamControllers[l]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}l.MessageHandler=M},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Metadata=void 0;var S=_(1);class E{#Q;#Z;constructor({parsedData:o,rawData:l}){this.#Q=o,this.#Z=l}getRaw(){return this.#Z}get(o){return this.#Q.get(o)??null}getAll(){return(0,S.objectFromMap)(this.#Q)}has(o){return this.#Q.has(o)}}l.Metadata=E},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionalContentConfig=void 0;var S=_(1);let E=Symbol("INTERNAL");class T{#tt=!0;constructor(o,l){this.name=o,this.intent=l}get visible(){return this.#tt}_setVisible(o,l){o!==E&&(0,S.unreachable)("Internal method `_setVisible` called."),this.#tt=l}}class P{#te=!0;#ti=new Map;#ts=null;#tr=null;constructor(o){if(this.name=null,this.creator=null,null===o)return;for(let l of(this.name=o.name,this.creator=o.creator,this.#tr=o.order,o.groups))this.#ti.set(l.id,new T(l.name,l.intent));if("OFF"===o.baseState)for(let o of this.#ti.values())o._setVisible(E,!1);for(let l of o.on)this.#ti.get(l)._setVisible(E,!0);for(let l of o.off)this.#ti.get(l)._setVisible(E,!1);for(let[o,l]of(this.#ts=new Map,this.#ti))this.#ts.set(o,l.visible)}#ta(M){let o=M.length;if(o<2)return!0;let l=M[0];for(let _=1;_<o;_++){let o;let E=M[_];if(Array.isArray(E))o=this.#ta(E);else{if(!this.#ti.has(E))return(0,S.warn)(`Optional content group not found: ${E}`),!0;o=this.#ti.get(E).visible}switch(l){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return"And"===l}isVisible(o){if(0===this.#ti.size)return!0;if(!o)return(0,S.warn)("Optional content group not defined."),!0;if("OCG"===o.type)return this.#ti.has(o.id)?this.#ti.get(o.id).visible:((0,S.warn)(`Optional content group not found: ${o.id}`),!0);if("OCMD"===o.type){if(o.expression)return this.#ta(o.expression);if(o.policy&&"AnyOn"!==o.policy){if("AllOn"===o.policy){for(let l of o.ids){if(!this.#ti.has(l)){(0,S.warn)(`Optional content group not found: ${l}`);break}if(!this.#ti.get(l).visible)return!1}return!0}if("AnyOff"===o.policy){for(let l of o.ids){if(!this.#ti.has(l))return(0,S.warn)(`Optional content group not found: ${l}`),!0;if(!this.#ti.get(l).visible)return!0}return!1}if("AllOff"===o.policy){for(let l of o.ids){if(!this.#ti.has(l)){(0,S.warn)(`Optional content group not found: ${l}`);break}if(this.#ti.get(l).visible)return!1}return!0}}else{for(let l of o.ids){if(!this.#ti.has(l))return(0,S.warn)(`Optional content group not found: ${l}`),!0;if(this.#ti.get(l).visible)return!0}return!1}return(0,S.warn)(`Unknown optional content policy ${o.policy}.`),!0}return(0,S.warn)(`Unknown group type ${o.type}.`),!0}setVisibility(o,l=!0){if(!this.#ti.has(o)){(0,S.warn)(`Optional content group not found: ${o}`);return}this.#ti.get(o)._setVisible(E,!!l),this.#te=null}get hasInitialVisibility(){if(null!==this.#te)return this.#te;for(let[o,l]of this.#ti){let _=this.#ts.get(o);if(l.visible!==_)return this.#te=!1}return this.#te=!0}getOrder(){return this.#ti.size?this.#tr?this.#tr.slice():[...this.#ti.keys()]:null}getGroups(){return this.#ti.size>0?(0,S.objectFromMap)(this.#ti):null}getGroup(o){return this.#ti.get(o)||null}}l.OptionalContentConfig=P},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFDataTransportStream=void 0;var S=_(1),E=_(8);class T{constructor(o,l){(0,S.assert)(l,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=o.progressiveDone||!1,this._contentDispositionFilename=o.contentDispositionFilename||null;let _=o.initialData;if(_?.length>0){let o=new Uint8Array(_).buffer;this._queuedChunks.push(o)}this._pdfDataRangeTransport=l,this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._contentLength=o.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((o,l)=>{this._onReceiveData({begin:o,chunk:l})}),this._pdfDataRangeTransport.addProgressListener((o,l)=>{this._onProgress({loaded:o,total:l})}),this._pdfDataRangeTransport.addProgressiveReadListener(o=>{this._onReceiveData({chunk:o})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(o){let l=new Uint8Array(o.chunk).buffer;if(void 0===o.begin)this._fullRequestReader?this._fullRequestReader._enqueue(l):this._queuedChunks.push(l);else{let _=this._rangeReaders.some(function(_){return _._begin===o.begin&&(_._enqueue(l),!0)});(0,S.assert)(_,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(o){if(void 0===o.total){let l=this._rangeReaders[0];l?.onProgress&&l.onProgress({loaded:o.loaded})}else{let l=this._fullRequestReader;l?.onProgress&&l.onProgress({loaded:o.loaded,total:o.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(o){let l=this._rangeReaders.indexOf(o);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,S.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let o=this._queuedChunks;return this._queuedChunks=null,new P(this,o,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(o,l){if(l<=this._progressiveDataLength)return null;let _=new M(this,o,l);return this._pdfDataRangeTransport.requestDataRange(o,l),this._rangeReaders.push(_),_}cancelAllRequests(o){for(let l of(this._fullRequestReader&&this._fullRequestReader.cancel(o),this._rangeReaders.slice(0)))l.cancel(o);this._pdfDataRangeTransport.abort()}}l.PDFDataTransportStream=T;class P{constructor(o,l,_=!1,S=null){for(let T of(this._stream=o,this._done=_||!1,this._filename=(0,E.isPdfFile)(S)?S:null,this._queuedChunks=l||[],this._loaded=0,this._queuedChunks))this._loaded+=T.byteLength;this._requests=[],this._headersReady=Promise.resolve(),o._fullRequestReader=this,this.onProgress=null}_enqueue(o){if(!this._done){if(this._requests.length>0){let l=this._requests.shift();l.resolve({value:o,done:!1})}else this._queuedChunks.push(o);this._loaded+=o.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){let o=this._queuedChunks.shift();return{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};let o=(0,S.createPromiseCapability)();return this._requests.push(o),o.promise}cancel(o){for(let o of(this._done=!0,this._requests))o.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class M{constructor(o,l,_){this._stream=o,this._begin=l,this._end=_,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(o){if(!this._done){if(0===this._requests.length)this._queuedChunk=o;else{let l=this._requests.shift();for(let _ of(l.resolve({value:o,done:!1}),this._requests))_.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let o=this._queuedChunk;return this._queuedChunk=null,{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};let o=(0,S.createPromiseCapability)();return this._requests.push(o),o.promise}cancel(o){for(let o of(this._done=!0,this._requests))o.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(o,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaText=void 0;class _{static textContent(o){let l=[],S={items:l,styles:Object.create(null)};function E(o){if(!o)return;let S=null,T=o.name;if("#text"===T)S=o.value;else{if(!_.shouldBuildText(T))return;o?.attributes?.textContent?S=o.attributes.textContent:o.value&&(S=o.value)}if(null!==S&&l.push({str:S}),o.children)for(let l of o.children)E(l)}return E(o),S}static shouldBuildText(o){return!("textarea"===o||"input"===o||"option"===o||"select"===o)}}l.XfaText=_},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.NodeStandardFontDataFactory=l.NodeCanvasFactory=l.NodeCMapReaderFactory=void 0;var S=_(9);let E=function(o){return new Promise((l,_)=>{let S=__webpack_require__(172);S.readFile(o,(o,S)=>{if(o||!S){_(Error(o));return}l(new Uint8Array(S))})})};class T extends S.BaseCanvasFactory{_createCanvas(o,l){let _=__webpack_require__(3414);return _.createCanvas(o,l)}}l.NodeCanvasFactory=T;class P extends S.BaseCMapReaderFactory{_fetchData(o,l){return E(o).then(o=>({cMapData:o,compressionType:l}))}}l.NodeCMapReaderFactory=P;class M extends S.BaseStandardFontDataFactory{_fetchData(o){return E(o)}}l.NodeStandardFontDataFactory=M},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationEditorLayer=void 0;var S=_(7),E=_(1),T=_(23),P=_(24);class M{#tn;#to=!1;#tl=this.pointerup.bind(this);#th=this.pointerdown.bind(this);#td=new Map;#tc=!1;#tu=!1;#tp;static _initialized=!1;constructor(o){M._initialized||(M._initialized=!0,T.FreeTextEditor.initialize(o.l10n),P.InkEditor.initialize(o.l10n),o.uiManager.registerEditorTypes([T.FreeTextEditor,P.InkEditor])),this.#tp=o.uiManager,this.annotationStorage=o.annotationStorage,this.pageIndex=o.pageIndex,this.div=o.div,this.#tn=o.accessibilityManager,this.#tp.addLayer(this)}updateToolbar(o){this.#tp.updateToolbar(o)}updateMode(o=this.#tp.getMode()){this.#tg(),o===E.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#tp.unselectAll()}addInkEditorIfNeeded(o){if(!o&&this.#tp.getMode()!==E.AnnotationEditorType.INK)return;if(!o){for(let o of this.#td.values())if(o.isEmpty()){o.setInBackground();return}}let l=this.#tf({offsetX:0,offsetY:0});l.setInBackground()}setEditingState(o){this.#tp.setEditingState(o)}addCommands(o){this.#tp.addCommands(o)}enable(){for(let o of(this.div.style.pointerEvents="auto",this.#td.values()))o.enableEditing()}disable(){for(let o of(this.div.style.pointerEvents="none",this.#td.values()))o.disableEditing()}setActiveEditor(o){let l=this.#tp.getActive();l!==o&&this.#tp.setActiveEditor(o)}enableClick(){this.div.addEventListener("pointerdown",this.#th),this.div.addEventListener("pointerup",this.#tl)}disableClick(){this.div.removeEventListener("pointerdown",this.#th),this.div.removeEventListener("pointerup",this.#tl)}attach(o){this.#td.set(o.id,o)}detach(o){this.#td.delete(o.id),this.#tn?.removePointerInTextLayer(o.contentDiv)}remove(o){this.#tp.removeEditor(o),this.detach(o),this.annotationStorage.remove(o.id),o.div.style.display="none",setTimeout(()=>{o.div.style.display="",o.div.remove(),o.isAttachedToDOM=!1,document.activeElement===document.body&&this.#tp.focusMainContainer()},0),this.#tu||this.addInkEditorIfNeeded(!1)}#tm(F){F.parent!==this&&(this.attach(F),F.pageIndex=this.pageIndex,F.parent?.detach(F),F.parent=this,F.div&&F.isAttachedToDOM&&(F.div.remove(),this.div.append(F.div)))}add(o){if(this.#tm(o),this.#tp.addEditor(o),this.attach(o),!o.isAttachedToDOM){let l=o.render();this.div.append(l),o.isAttachedToDOM=!0}this.moveEditorInDOM(o),o.onceAdded(),this.addToAnnotationStorage(o)}moveEditorInDOM(o){this.#tn?.moveElementInDOM(this.div,o.div,o.contentDiv,!0)}addToAnnotationStorage(o){o.isEmpty()||this.annotationStorage.has(o.id)||this.annotationStorage.setValue(o.id,o)}addOrRebuild(o){o.needsToBeRebuilt()?o.rebuild():this.add(o)}addANewEditor(o){let l=()=>{this.addOrRebuild(o)},_=()=>{o.remove()};this.addCommands({cmd:l,undo:_,mustExec:!0})}addUndoableEditor(o){let l=()=>{this.addOrRebuild(o)},_=()=>{o.remove()};this.addCommands({cmd:l,undo:_,mustExec:!1})}getNextId(){return this.#tp.getId()}#tb(O){switch(this.#tp.getMode()){case E.AnnotationEditorType.FREETEXT:return new T.FreeTextEditor(O);case E.AnnotationEditorType.INK:return new P.InkEditor(O)}return null}deserialize(o){switch(o.annotationType){case E.AnnotationEditorType.FREETEXT:return T.FreeTextEditor.deserialize(o,this);case E.AnnotationEditorType.INK:return P.InkEditor.deserialize(o,this)}return null}#tf(I){let o=this.getNextId(),l=this.#tb({parent:this,id:o,x:I.offsetX,y:I.offsetY});return l&&this.add(l),l}setSelected(o){this.#tp.setSelected(o)}toggleSelected(o){this.#tp.toggleSelected(o)}isSelected(o){return this.#tp.isSelected(o)}unselect(o){this.#tp.unselect(o)}pointerup(o){let l=S.KeyboardManager.platform.isMac;if(0===o.button&&(!o.ctrlKey||!l)&&o.target===this.div&&this.#tc){if(this.#tc=!1,!this.#to){this.#to=!0;return}this.#tf(o)}}pointerdown(o){let l=S.KeyboardManager.platform.isMac;if(0!==o.button||o.ctrlKey&&l||o.target!==this.div)return;this.#tc=!0;let _=this.#tp.getActive();this.#to=!_||_.isEmpty()}drop(o){let l=o.dataTransfer.getData("text/plain"),_=this.#tp.getEditor(l);if(!_)return;o.preventDefault(),o.dataTransfer.dropEffect="move",this.#tm(_);let S=this.div.getBoundingClientRect(),E=o.clientX-S.x,T=o.clientY-S.y;_.translate(E-_.startX,T-_.startY),this.moveEditorInDOM(_),_.div.focus()}dragover(o){o.preventDefault()}destroy(){for(let o of(this.#tp.getActive()?.parent===this&&this.#tp.setActiveEditor(null),this.#td.values()))this.#tn?.removePointerInTextLayer(o.contentDiv),o.isAttachedToDOM=!1,o.div.remove(),o.parent=null;this.div=null,this.#td.clear(),this.#tp.removeLayer(this)}#tg(){for(let o of(this.#tu=!0,this.#td.values()))o.isEmpty()&&o.remove();this.#tu=!1}render(o){for(let l of(this.viewport=o.viewport,(0,S.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions(),this.#tp.getEditors(this.pageIndex)))this.add(l);this.updateMode()}update(o){this.viewport=o.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){let[o,l,_,S]=this.viewport.viewBox,E=_-o,T=S-l;return[E,T]}get viewportBaseDimensions(){let{width:o,height:l,rotation:_}=this.viewport;return _%180==0?[o,l]:[l,o]}setDimensions(){let{width:o,height:l,rotation:_}=this.viewport,S=_%180!=0,E=Math.floor(o)+"px",T=Math.floor(l)+"px";this.div.style.width=S?T:E,this.div.style.height=S?E:T,this.div.setAttribute("data-main-rotation",_)}}l.AnnotationEditorLayer=M},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FreeTextEditor=void 0;var S=_(1),E=_(7),T=_(6);class P extends T.AnnotationEditor{#tA=this.editorDivBlur.bind(this);#ty=this.editorDivFocus.bind(this);#tv=this.editorDivKeydown.bind(this);#t_;#tS="";#tx=!1;#tE;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new E.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],P.prototype.commitOrRemove]]);static _type="freetext";constructor(o){super({...o,name:"freeTextEditor"}),this.#t_=o.color||P._defaultColor||T.AnnotationEditor._defaultLineColor,this.#tE=o.fontSize||P._defaultFontSize}static initialize(o){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(l=>[l,o.get(l)]));let l=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(l.getPropertyValue("--freetext-padding"))}static updateDefaultParams(o,l){switch(o){case S.AnnotationEditorParamsType.FREETEXT_SIZE:P._defaultFontSize=l;break;case S.AnnotationEditorParamsType.FREETEXT_COLOR:P._defaultColor=l}}updateParams(o,l){switch(o){case S.AnnotationEditorParamsType.FREETEXT_SIZE:this.#tC(l);break;case S.AnnotationEditorParamsType.FREETEXT_COLOR:this.#tT(l)}}static get defaultPropertiesToUpdate(){return[[S.AnnotationEditorParamsType.FREETEXT_SIZE,P._defaultFontSize],[S.AnnotationEditorParamsType.FREETEXT_COLOR,P._defaultColor||T.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[S.AnnotationEditorParamsType.FREETEXT_SIZE,this.#tE],[S.AnnotationEditorParamsType.FREETEXT_COLOR,this.#t_]]}#tC(M){let o=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-this.#tE)*this.parent.scaleFactor),this.#tE=o,this.#tP()},l=this.#tE;this.parent.addCommands({cmd:()=>{o(M)},undo:()=>{o(l)},mustExec:!0,type:S.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#tT(F){let o=this.#t_;this.parent.addCommands({cmd:()=>{this.#t_=F,this.editorDiv.style.color=F},undo:()=>{this.#t_=o,this.editorDiv.style.color=o},mustExec:!0,type:S.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){return[-P._internalPadding*this.parent.scaleFactor,-(P._internalPadding+this.#tE)*this.parent.scaleFactor]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(S.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",this.#tv),this.editorDiv.addEventListener("focus",this.#ty),this.editorDiv.addEventListener("blur",this.#tA))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#tv),this.editorDiv.removeEventListener("focus",this.#ty),this.editorDiv.removeEventListener("blur",this.#tA),this.div.focus(),this.isEditing=!1)}focusin(o){super.focusin(o),o.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}#tM(){let o=this.editorDiv.getElementsByTagName("div");if(0===o.length)return this.editorDiv.innerText;let l=[];for(let _=0,S=o.length;_<S;_++){let S=o[_],E=S.firstChild;E?.nodeName==="#text"?l.push(E.data):l.push("")}return l.join("\n")}#tP(){let[o,l]=this.parent.viewportBaseDimensions,_=this.div.getBoundingClientRect();this.width=_.width/o,this.height=_.height/l}commit(){super.commit(),this.#tx||(this.#tx=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this.#tS=this.#tM().trimEnd(),this.#tP()}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(o){this.enableEditMode(),this.editorDiv.focus()}keydown(o){o.target===this.div&&"Enter"===o.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(o){P._keyboardManager.exec(this,o)}editorDivFocus(o){this.isEditing=!0}editorDivBlur(o){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){let o,l;if(this.div)return this.div;this.width&&(o=this.x,l=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),P._l10nPromise.get("editor_free_text_aria_label").then(o=>this.editorDiv?.setAttribute("aria-label",o)),P._l10nPromise.get("free_text_default_content").then(o=>this.editorDiv?.setAttribute("default-content",o)),this.editorDiv.contentEditable=!0;let{style:_}=this.editorDiv;if(_.fontSize=`calc(${this.#tE}px * var(--scale-factor))`,_.color=this.#t_,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,E.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){let[_,S]=this.parent.viewportBaseDimensions;for(let E of(this.setAt(o*_,l*S,this.width*_,this.height*S),this.#tS.split("\n"))){let o=document.createElement("div");o.append(E?document.createTextNode(E):document.createElement("br")),this.editorDiv.append(o)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(o,l){let _=super.deserialize(o,l);return _.#tE=o.fontSize,_.#t_=S.Util.makeHexColor(...o.color),_.#tS=o.value,_}serialize(){if(this.isEmpty())return null;let o=P._internalPadding*this.parent.scaleFactor,l=this.getRect(o,o),_=T.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:S.AnnotationEditorType.FREETEXT,color:_,fontSize:this.#tE,value:this.#tS,pageIndex:this.parent.pageIndex,rect:l,rotation:this.rotation}}}l.FreeTextEditor=P},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InkEditor=void 0,Object.defineProperty(l,"fitCurve",{enumerable:!0,get:function(){return T.fitCurve}});var S=_(1),E=_(6),T=_(25),P=_(7);let M=16;class F extends E.AnnotationEditor{#tk=0;#tw=0;#tR=0;#tF=this.canvasPointermove.bind(this);#tO=this.canvasPointerleave.bind(this);#tI=this.canvasPointerup.bind(this);#tD=this.canvasPointerdown.bind(this);#tL=!1;#tN=!1;#tj=null;#tU=null;#tB=0;#tq=0;#tW=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;static _type="ink";constructor(o){super({...o,name:"inkEditor"}),this.color=o.color||null,this.thickness=o.thickness||null,this.opacity=o.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(o){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(l=>[l,o.get(l)]))}static updateDefaultParams(o,l){switch(o){case S.AnnotationEditorParamsType.INK_THICKNESS:F._defaultThickness=l;break;case S.AnnotationEditorParamsType.INK_COLOR:F._defaultColor=l;break;case S.AnnotationEditorParamsType.INK_OPACITY:F._defaultOpacity=l/100}}updateParams(o,l){switch(o){case S.AnnotationEditorParamsType.INK_THICKNESS:this.#tG(l);break;case S.AnnotationEditorParamsType.INK_COLOR:this.#tT(l);break;case S.AnnotationEditorParamsType.INK_OPACITY:this.#tz(l)}}static get defaultPropertiesToUpdate(){return[[S.AnnotationEditorParamsType.INK_THICKNESS,F._defaultThickness],[S.AnnotationEditorParamsType.INK_COLOR,F._defaultColor||E.AnnotationEditor._defaultLineColor],[S.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*F._defaultOpacity)]]}get propertiesToUpdate(){return[[S.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||F._defaultThickness],[S.AnnotationEditorParamsType.INK_COLOR,this.color||F._defaultColor||E.AnnotationEditor._defaultLineColor],[S.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??F._defaultOpacity))]]}#tG(O){let o=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=O,this.#tH()},undo:()=>{this.thickness=o,this.#tH()},mustExec:!0,type:S.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#tT(I){let o=this.color;this.parent.addCommands({cmd:()=>{this.color=I,this.#tV()},undo:()=>{this.color=o,this.#tV()},mustExec:!0,type:S.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#tz(D){D/=100;let o=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=D,this.#tV()},undo:()=>{this.opacity=o,this.#tV()},mustExec:!0,type:S.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(this.#t$(),this.#tX()),this.isAttachedToDOM||(this.parent.add(this),this.#tY()),this.#tH())}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#tU.disconnect(),this.#tU=null,super.remove())}enableEditMode(){this.#tL||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#tD),this.canvas.addEventListener("pointerup",this.#tI))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#tD),this.canvas.removeEventListener("pointerup",this.#tI))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#tK(){let{width:o,height:l,rotation:_}=this.parent.viewport;switch(_){case 90:return[0,o,o,l];case 180:return[o,l,o,l];case 270:return[l,0,o,l];default:return[0,0,o,l]}}#tJ(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,P.opacityToHex)(this.opacity)}`}#tQ(L,N){this.isEditing=!0,this.#tN||(this.#tN=!0,this.#tY(),this.thickness||=F._defaultThickness,this.color||=F._defaultColor||E.AnnotationEditor._defaultLineColor,this.opacity??=F._defaultOpacity),this.currentPath.push([L,N]),this.#tj=null,this.#tJ(),this.ctx.beginPath(),this.ctx.moveTo(L,N),this.#tW=()=>{this.#tW&&(this.#tj&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):this.#tV(),this.ctx.lineTo(...this.#tj),this.#tj=null,this.ctx.stroke()),window.requestAnimationFrame(this.#tW))},window.requestAnimationFrame(this.#tW)}#tZ(U,W){let[o,l]=this.currentPath.at(-1);(U!==o||W!==l)&&(this.currentPath.push([U,W]),this.#tj=[U,W])}#t0(z,H){let o;this.ctx.closePath(),this.#tW=null,z=Math.min(Math.max(z,0),this.canvas.width),H=Math.min(Math.max(H,0),this.canvas.height);let[l,_]=this.currentPath.at(-1);if((z!==l||H!==_)&&this.currentPath.push([z,H]),1!==this.currentPath.length)o=(0,T.fitCurve)(this.currentPath,30,null);else{let l=[z,H];o=[[l,l.slice(),l.slice(),l]]}let S=F.#t1(o);this.currentPath.length=0;let E=()=>{this.paths.push(o),this.bezierPath2D.push(S),this.rebuild()},P=()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#t$(),this.#tX()),this.#tH())};this.parent.addCommands({cmd:E,undo:P,mustExec:!0})}#tV(){if(this.isEmpty()){this.#t2();return}this.#tJ();let{canvas:o,ctx:l}=this;for(let _ of(l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,o.width,o.height),this.#t2(),this.bezierPath2D))l.stroke(_)}commit(){this.#tL||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#tL=!0,this.div.classList.add("disabled"),this.#tH(!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(o){super.focusin(o),this.enableEditMode()}canvasPointerdown(o){0===o.button&&this.isInEditMode()&&!this.#tL&&(this.setInForeground(),"mouse"!==o.type&&this.div.focus(),o.stopPropagation(),this.canvas.addEventListener("pointerleave",this.#tO),this.canvas.addEventListener("pointermove",this.#tF),this.#tQ(o.offsetX,o.offsetY))}canvasPointermove(o){o.stopPropagation(),this.#tZ(o.offsetX,o.offsetY)}canvasPointerup(o){0===o.button&&this.isInEditMode()&&0!==this.currentPath.length&&(o.stopPropagation(),this.#t3(o),this.setInBackground())}canvasPointerleave(o){this.#t3(o),this.setInBackground()}#t3(V){this.#t0(V.offsetX,V.offsetY),this.canvas.removeEventListener("pointerleave",this.#tO),this.canvas.removeEventListener("pointermove",this.#tF),this.parent.addToAnnotationStorage(this)}#t$(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",F._l10nPromise.get("editor_ink_canvas_aria_label").then(o=>this.canvas?.setAttribute("aria-label",o)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#tX(){this.#tU=new ResizeObserver(o=>{let l=o[0].contentRect;l.width&&l.height&&this.setDimensions(l.width,l.height)}),this.#tU.observe(this.div)}render(){let o,l;if(this.div)return this.div;this.width&&(o=this.x,l=this.y),super.render(),F._l10nPromise.get("editor_ink_aria_label").then(o=>this.div?.setAttribute("aria-label",o));let[_,S,E,T]=this.#tK();if(this.setAt(_,S,0,0),this.setDims(E,T),this.#t$(),this.width){let[_,S]=this.parent.viewportBaseDimensions;this.setAt(o*_,l*S,this.width*_,this.height*S),this.#tN=!0,this.#tY(),this.setDims(this.width*_,this.height*S),this.#tV(),this.#t5(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#tX(),this.div}#tY(){if(!this.#tN)return;let[o,l]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*o),this.canvas.height=Math.ceil(this.height*l),this.#t2()}setDimensions(o,l){let _=Math.round(o),S=Math.round(l);if(this.#tB===_&&this.#tq===S)return;this.#tB=_,this.#tq=S,this.canvas.style.visibility="hidden",this.#tk&&Math.abs(this.#tk-o/l)>.01&&(l=Math.ceil(o/this.#tk),this.setDims(o,l));let[E,T]=this.parent.viewportBaseDimensions;this.width=o/E,this.height=l/T,this.#tL&&this.#t4(o,l),this.#tY(),this.#tV(),this.canvas.style.visibility="visible"}#t4($,Y){let o=this.#t8(),l=($-o)/this.#tR,_=(Y-o)/this.#tw;this.scaleFactor=Math.min(l,_)}#t2(){let o=this.#t8()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+o,this.translationY*this.scaleFactor+o)}static #t1(K){let o=new Path2D;for(let l=0,_=K.length;l<_;l++){let[_,S,E,T]=K[l];0===l&&o.moveTo(..._),o.bezierCurveTo(S[0],S[1],E[0],E[1],T[0],T[1])}return o}#t6(J,Q,Z,tt){let o,l;let _=4,S=[],E=this.thickness/2;for(let T of this.paths){o=[],l=[];for(let S=0,P=T.length;S<P;S++){let[P,M,F,O]=T[S],I=J*(P[0]+Q)+E,D=tt-J*(P[1]+Z)-E,L=J*(M[0]+Q)+E,N=tt-J*(M[1]+Z)-E,U=J*(F[0]+Q)+E,W=tt-J*(F[1]+Z)-E,z=J*(O[0]+Q)+E,H=tt-J*(O[1]+Z)-E;0===S&&(o.push(I,D),l.push(I,D)),o.push(L,N,U,W,z,H),this.#t7(I,D,L,N,U,W,z,H,_,l)}S.push({bezier:o,points:l})}return S}#t7(te,ti,tr,ta,tn,to,tl,th,td,tc){if(this.#t9(te,ti,tr,ta,tn,to,tl,th)){tc.push(tl,th);return}for(let o=1;o<td-1;o++){let l=o/td,_=1-l,S=l*te+_*tr,E=l*ti+_*ta,T=l*tr+_*tn,P=l*ta+_*to,M=l*tn+_*tl,F=l*to+_*th;S=l*S+_*T,E=l*E+_*P,T=l*T+_*M,P=l*P+_*F,S=l*S+_*T,E=l*E+_*P,tc.push(S,E)}tc.push(tl,th)}#t9(tu,tp,tg,tf,tm,tb,tA,tv){let o=10,l=(3*tg-2*tu-tA)**2,_=(3*tf-2*tp-tv)**2,S=(3*tm-tu-2*tA)**2,E=(3*tb-tp-2*tv)**2;return Math.max(l,S)+Math.max(_,E)<=o}#et(){let o=1/0,l=-1/0,_=1/0,E=-1/0;for(let T of this.paths)for(let[P,M,F,O]of T){let T=S.Util.bezierBoundingBox(...P,...M,...F,...O);o=Math.min(o,T[0]),_=Math.min(_,T[1]),l=Math.max(l,T[2]),E=Math.max(E,T[3])}return[o,_,l,E]}#t8(){return this.#tL?Math.ceil(this.thickness*this.parent.scaleFactor):0}#tH(t_=!1){if(this.isEmpty())return;if(!this.#tL){this.#tV();return}let o=this.#et(),l=this.#t8();this.#tR=Math.max(M,o[2]-o[0]),this.#tw=Math.max(M,o[3]-o[1]);let _=Math.ceil(l+this.#tR*this.scaleFactor),S=Math.ceil(l+this.#tw*this.scaleFactor),[E,T]=this.parent.viewportBaseDimensions;this.width=_/E,this.height=S/T,this.#tk=_/S,this.#t5();let P=this.translationX,F=this.translationY;this.translationX=-o[0],this.translationY=-o[1],this.#tY(),this.#tV(),this.#tB=_,this.#tq=S,this.setDims(_,S);let O=t_?l/this.scaleFactor/2:0;this.translate(P-this.translationX-O,F-this.translationY-O)}#t5(){let{style:o}=this.div;this.#tk>=1?(o.minHeight=`${M}px`,o.minWidth=`${Math.round(this.#tk*M)}px`):(o.minWidth=`${M}px`,o.minHeight=`${Math.round(M/this.#tk)}px`)}static deserialize(o,l){let _=super.deserialize(o,l);_.thickness=o.thickness,_.color=S.Util.makeHexColor(...o.color),_.opacity=o.opacity;let[E,T]=l.pageDimensions,P=_.width*E,F=_.height*T,O=l.scaleFactor,I=o.thickness/2;for(let{bezier:l}of(_.#tk=P/F,_.#tL=!0,_.#tB=Math.round(P),_.#tq=Math.round(F),o.paths)){let o=[];_.paths.push(o);let S=O*(l[0]-I),E=O*(F-l[1]-I);for(let _=2,T=l.length;_<T;_+=6){let T=O*(l[_]-I),P=O*(F-l[_+1]-I),M=O*(l[_+2]-I),D=O*(F-l[_+3]-I),L=O*(l[_+4]-I),N=O*(F-l[_+5]-I);o.push([[S,E],[T,P],[M,D],[L,N]]),S=L,E=N}let T=this.#t1(o);_.bezierPath2D.push(T)}let D=_.#et();return _.#tR=Math.max(M,D[2]-D[0]),_.#tw=Math.max(M,D[3]-D[1]),_.#t4(P,F),_}serialize(){if(this.isEmpty())return null;let o=this.getRect(0,0),l=this.rotation%180==0?o[3]-o[1]:o[2]-o[0],_=E.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:S.AnnotationEditorType.INK,color:_,thickness:this.thickness,opacity:this.opacity,paths:this.#t6(this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,l),pageIndex:this.parent.pageIndex,rect:o,rotation:this.rotation}}}l.InkEditor=F},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.fitCurve=void 0;let S=_(26);l.fitCurve=S},o=>{function l(o,l,S){if(!Array.isArray(o))throw TypeError("First argument should be an array");if(o.forEach(l=>{if(!Array.isArray(l)||l.some(o=>"number"!=typeof o)||l.length!==o[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(o=o.filter((l,_)=>0===_||!l.every((l,S)=>l===o[_-1][S]))).length<2)return[];let E=o.length,T=D(o[1],o[0]),P=D(o[E-2],o[E-1]);return _(o,T,P,l,S)}function _(o,l,E,P,F){var O,I,D,N,U,W,z,H,V,$,Y,K,J;let Q=20;if(2===o.length)return K=L.vectorLen(L.subtract(o[0],o[1]))/3,[O=[o[0],L.addArrays(o[0],L.mulItems(l,K)),L.addArrays(o[1],L.mulItems(E,K)),o[1]]];if(I=M(o),[O,N,W]=S(o,I,I,l,E,F),0===N||N<P)return[O];if(N<P*P)for(J=0,D=I,U=N,z=W;J<Q;J++){if(D=T(O,o,D),[O,N,W]=S(o,I,D,l,E,F),N<P)return[O];if(W===z){let o=N/U;if(o>.9999&&o<1.0001)break}U=N,z=W}return Y=[],(H=L.subtract(o[W-1],o[W+1])).every(o=>0===o)&&(H=L.subtract(o[W-1],o[W]),[H[0],H[1]]=[-H[1],H[0]]),V=L.normalize(H),$=L.mulItems(V,-1),Y=(Y=Y.concat(_(o.slice(0,W+1),l,V,P,F))).concat(_(o.slice(W),$,E,P,F))}function S(o,l,_,S,T,P){var M,O,I;return M=E(o,_,S,T,P),[O,I]=F(o,M,l),P&&P({bez:M,points:o,params:l,maxErr:O,maxPoint:I}),[M,O,I]}function E(o,l,_,S){var E,T,P,M,F,O,I,D,U,W,z,H,V,$,Y,K,J,Q=o[0],Z=o[o.length-1];for(V=0,E=[Q,null,null,Z],T=L.zeros_Xx2x2(l.length),$=l.length;V<$;V++)J=1-(K=l[V]),(P=T[V])[0]=L.mulItems(_,3*K*(J*J)),P[1]=L.mulItems(S,3*J*(K*K));for(V=0,M=[[0,0],[0,0]],F=[0,0],$=o.length;V<$;V++)K=l[V],P=T[V],M[0][0]+=L.dot(P[0],P[0]),M[0][1]+=L.dot(P[0],P[1]),M[1][0]+=L.dot(P[0],P[1]),M[1][1]+=L.dot(P[1],P[1]),Y=L.subtract(o[V],N.q([Q,Q,Z,Z],K)),F[0]+=L.dot(P[0],Y),F[1]+=L.dot(P[1],Y);return O=M[0][0]*M[1][1]-M[1][0]*M[0][1],I=M[0][0]*F[1]-M[1][0]*F[0],D=F[0]*M[1][1]-F[1]*M[0][1],U=0===O?0:D/O,W=0===O?0:I/O,U<(z=1e-6*(H=L.vectorLen(L.subtract(Q,Z))))||W<z?(E[1]=L.addArrays(Q,L.mulItems(_,H/3)),E[2]=L.addArrays(Z,L.mulItems(S,H/3))):(E[1]=L.addArrays(Q,L.mulItems(_,U)),E[2]=L.addArrays(Z,L.mulItems(S,W))),E}function T(o,l,_){return _.map((_,S)=>P(o,l[S],_))}function P(o,l,_){var S=L.subtract(N.q(o,_),l),E=N.qprime(o,_),T=L.mulMatrix(S,E),P=L.sum(L.squareItems(E))+2*L.mulMatrix(S,N.qprimeprime(o,_));return 0===P?_:_-T/P}function M(o){var l,_,S,E=[];return o.forEach((o,T)=>{l=T?_+L.vectorLen(L.subtract(o,S)):0,E.push(l),_=l,S=o}),E=E.map(o=>o/_)}function F(o,l,_){var S,E,T,P,M,F,D,U;E=0,T=Math.floor(o.length/2);let W=O(l,10);for(M=0,F=o.length;M<F;M++)D=o[M],U=I(l,_[M],W,10),(S=(P=L.subtract(N.q(l,U),D))[0]*P[0]+P[1]*P[1])>E&&(E=S,T=M);return[E,T]}var O=function(o,l){for(var _,S=[0],E=o[0],T=0,P=1;P<=l;P++)_=N.q(o,P/l),S.push(T+=L.vectorLen(L.subtract(_,E))),E=_;return S.map(o=>o/T)};function I(o,l,_,S){if(l<0)return 0;if(l>1)return 1;for(var E,T,P,M,F=1;F<=S;F++)if(l<=_[F]){P=(F-1)/S,T=F/S,M=(l-(E=_[F-1]))/(_[F]-E)*(T-P)+P;break}return M}function D(o,l){return L.normalize(L.subtract(o,l))}class L{static zeros_Xx2x2(o){for(var l=[];o--;)l.push([0,0]);return l}static mulItems(o,l){return o.map(o=>o*l)}static mulMatrix(o,l){return o.reduce((o,_,S)=>o+_*l[S],0)}static subtract(o,l){return o.map((o,_)=>o-l[_])}static addArrays(o,l){return o.map((o,_)=>o+l[_])}static addItems(o,l){return o.map(o=>o+l)}static sum(o){return o.reduce((o,l)=>o+l)}static dot(o,l){return L.mulMatrix(o,l)}static vectorLen(o){return Math.hypot(...o)}static divItems(o,l){return o.map(o=>o/l)}static squareItems(o){return o.map(o=>o*o)}static normalize(o){return this.divItems(o,this.vectorLen(o))}}class N{static q(o,l){var _=1-l,S=L.mulItems(o[0],_*_*_),E=L.mulItems(o[1],3*_*_*l),T=L.mulItems(o[2],3*_*l*l),P=L.mulItems(o[3],l*l*l);return L.addArrays(L.addArrays(S,E),L.addArrays(T,P))}static qprime(o,l){var _=1-l,S=L.mulItems(L.subtract(o[1],o[0]),3*_*_),E=L.mulItems(L.subtract(o[2],o[1]),6*_*l),T=L.mulItems(L.subtract(o[3],o[2]),3*l*l);return L.addArrays(L.addArrays(S,E),T)}static qprimeprime(o,l){return L.addArrays(L.mulItems(L.addArrays(L.subtract(o[2],L.mulItems(o[1],2)),o[0]),6*(1-l)),L.mulItems(L.addArrays(L.subtract(o[3],L.mulItems(o[2],2)),o[1]),6*l))}}o.exports=l,o.exports.fitCubic=_,o.exports.createTangent=D},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationLayer=void 0;var S=_(1),E=_(8),T=_(5),P=_(28),M=_(29);let F=1e3,O=9,I=new WeakSet;function D(o){return{width:o[2]-o[0],height:o[3]-o[1]}}class L{static create(o){let l=o.data.annotationType;switch(l){case S.AnnotationType.LINK:return new U(o);case S.AnnotationType.TEXT:return new W(o);case S.AnnotationType.WIDGET:let _=o.data.fieldType;switch(_){case"Tx":return new H(o);case"Btn":if(o.data.radioButton)return new $(o);if(o.data.checkBox)return new V(o);return new Y(o);case"Ch":return new K(o)}return new z(o);case S.AnnotationType.POPUP:return new J(o);case S.AnnotationType.FREETEXT:return new Z(o);case S.AnnotationType.LINE:return new tt(o);case S.AnnotationType.SQUARE:return new te(o);case S.AnnotationType.CIRCLE:return new ti(o);case S.AnnotationType.POLYLINE:return new tr(o);case S.AnnotationType.CARET:return new tn(o);case S.AnnotationType.INK:return new to(o);case S.AnnotationType.POLYGON:return new ta(o);case S.AnnotationType.HIGHLIGHT:return new tl(o);case S.AnnotationType.UNDERLINE:return new th(o);case S.AnnotationType.SQUIGGLY:return new td(o);case S.AnnotationType.STRIKEOUT:return new tc(o);case S.AnnotationType.STAMP:return new tu(o);case S.AnnotationType.FILEATTACHMENT:return new tp(o);default:return new N(o)}}}class N{constructor(o,{isRenderable:l=!1,ignoreBorder:_=!1,createQuadrilaterals:S=!1}={}){this.isRenderable=l,this.data=o.data,this.layer=o.layer,this.page=o.page,this.viewport=o.viewport,this.linkService=o.linkService,this.downloadManager=o.downloadManager,this.imageResourcesPath=o.imageResourcesPath,this.renderForms=o.renderForms,this.svgFactory=o.svgFactory,this.annotationStorage=o.annotationStorage,this.enableScripting=o.enableScripting,this.hasJSActions=o.hasJSActions,this._fieldObjects=o.fieldObjects,this._mouseState=o.mouseState,l&&(this.container=this._createContainer(_)),S&&(this.quadrilaterals=this._createQuadrilaterals(_))}_createContainer(o=!1){let l=this.data,_=this.page,E=this.viewport,T=document.createElement("section"),{width:P,height:M}=D(l.rect),[F,O,I,L]=E.viewBox,N=I-F,U=L-O;T.setAttribute("data-annotation-id",l.id);let W=S.Util.normalizeRect([l.rect[0],_.view[3]-l.rect[1]+_.view[1],l.rect[2],_.view[3]-l.rect[3]+_.view[1]]);if(!o&&l.borderStyle.width>0){T.style.borderWidth=`${l.borderStyle.width}px`;let o=l.borderStyle.horizontalCornerRadius,_=l.borderStyle.verticalCornerRadius;if(o>0||_>0){let l=`calc(${o}px * var(--scale-factor)) / calc(${_}px * var(--scale-factor))`;T.style.borderRadius=l}else if(this instanceof $){let o=`calc(${P}px * var(--scale-factor)) / calc(${M}px * var(--scale-factor))`;T.style.borderRadius=o}switch(l.borderStyle.style){case S.AnnotationBorderStyleType.SOLID:T.style.borderStyle="solid";break;case S.AnnotationBorderStyleType.DASHED:T.style.borderStyle="dashed";break;case S.AnnotationBorderStyleType.BEVELED:(0,S.warn)("Unimplemented border style: beveled");break;case S.AnnotationBorderStyleType.INSET:(0,S.warn)("Unimplemented border style: inset");break;case S.AnnotationBorderStyleType.UNDERLINE:T.style.borderBottomStyle="solid"}let E=l.borderColor||null;E?T.style.borderColor=S.Util.makeHexColor(0|E[0],0|E[1],0|E[2]):T.style.borderWidth=0}T.style.left=`${100*(W[0]-F)/N}%`,T.style.top=`${100*(W[1]-O)/U}%`;let{rotation:z}=l;return l.hasOwnCanvas||0===z?(T.style.width=`${100*P/N}%`,T.style.height=`${100*M/U}%`):this.setRotation(z,T),T}setRotation(o,l=this.container){let _,S;let[E,T,P,M]=this.viewport.viewBox,F=P-E,O=M-T,{width:I,height:L}=D(this.data.rect);o%180==0?(_=100*I/F,S=100*L/O):(_=100*L/F,S=100*I/O),l.style.width=`${_}%`,l.style.height=`${S}%`,l.setAttribute("data-main-rotation",(360-o)%360)}get _commonActions(){let o=(o,l,_)=>{let S=_.detail[o];_.target.style[l]=P.ColorConverters[`${S[0]}_HTML`](S.slice(1))};return(0,S.shadow)(this,"_commonActions",{display:o=>{let l=o.detail.display%2==1;this.container.style.visibility=l?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:l,print:0===o.detail.display||3===o.detail.display})},print:o=>{this.annotationStorage.setValue(this.data.id,{print:o.detail.print})},hidden:o=>{this.container.style.visibility=o.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:o.detail.hidden})},focus:o=>{setTimeout(()=>o.target.focus({preventScroll:!1}),0)},userName:o=>{o.target.title=o.detail.userName},readonly:o=>{o.detail.readonly?o.target.setAttribute("readonly",""):o.target.removeAttribute("readonly")},required:o=>{this._setRequired(o.target,o.detail.required)},bgColor:l=>{o("bgColor","backgroundColor",l)},fillColor:l=>{o("fillColor","backgroundColor",l)},fgColor:l=>{o("fgColor","color",l)},textColor:l=>{o("textColor","color",l)},borderColor:l=>{o("borderColor","borderColor",l)},strokeColor:l=>{o("strokeColor","borderColor",l)},rotation:o=>{let l=o.detail.rotation;this.setRotation(l),this.annotationStorage.setValue(this.data.id,{rotation:l})}})}_dispatchEventFromSandbox(o,l){let _=this._commonActions;for(let S of Object.keys(l.detail)){let E=o[S]||_[S];E&&E(l)}}_setDefaultPropertiesFromJS(o){if(!this.enableScripting)return;let l=this.annotationStorage.getRawValue(this.data.id);if(!l)return;let _=this._commonActions;for(let[S,E]of Object.entries(l)){let T=_[S];if(T){let _={detail:{[S]:E},target:o};T(_),delete l[S]}}}_createQuadrilaterals(o=!1){if(!this.data.quadPoints)return null;let l=[],_=this.data.rect;for(let _ of this.data.quadPoints)this.data.rect=[_[2].x,_[2].y,_[1].x,_[1].y],l.push(this._createContainer(o));return this.data.rect=_,l}_createPopup(o,l){let _=this.container;this.quadrilaterals&&(o=o||this.quadrilaterals,_=this.quadrilaterals[0]),o||((o=document.createElement("div")).className="popupTriggerArea",_.append(o));let S=new Q({container:_,trigger:o,color:l.color,titleObj:l.titleObj,modificationDate:l.modificationDate,contentsObj:l.contentsObj,richText:l.richText,hideWrapper:!0}),E=S.render();E.style.left="100%",_.append(E)}_renderQuadrilaterals(o){for(let l of this.quadrilaterals)l.className=o;return this.quadrilaterals}render(){(0,S.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(o,l=null){let _=[];if(this._fieldObjects){let E=this._fieldObjects[o];if(E)for(let{page:o,id:T,exportValues:P}of E){if(-1===o||T===l)continue;let E="string"==typeof P?P:null,M=document.querySelector(`[data-element-id="${T}"]`);if(M&&!I.has(M)){(0,S.warn)(`_getElementsByName - element not allowed: ${T}`);continue}_.push({id:T,exportValue:E,domElement:M})}return _}for(let S of document.getElementsByName(o)){let{id:o,exportValue:E}=S;o!==l&&I.has(S)&&_.push({id:o,exportValue:E,domElement:S})}return _}static get platform(){let o="undefined"!=typeof navigator?navigator.platform:"";return(0,S.shadow)(this,"platform",{isWin:o.includes("Win"),isMac:o.includes("Mac")})}}class U extends N{constructor(o,l=null){super(o,{isRenderable:!0,ignoreBorder:!!l?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=o.data.isTooltipOnly}render(){let{data:o,linkService:l}=this,_=document.createElement("a");_.setAttribute("data-element-id",o.id);let S=!1;return(o.url?(l.addLinkAttributes(_,o.url,o.newWindow),S=!0):o.action?(this._bindNamedAction(_,o.action),S=!0):o.dest?(this._bindLink(_,o.dest),S=!0):(o.actions&&(o.actions.Action||o.actions["Mouse Up"]||o.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(_,o),S=!0),o.resetForm?(this._bindResetFormAction(_,o.resetForm),S=!0):this.isTooltipOnly&&!S&&(this._bindLink(_,""),S=!0)),this.quadrilaterals)?this._renderQuadrilaterals("linkAnnotation").map((o,l)=>{let S=0===l?_:_.cloneNode();return o.append(S),o}):(this.container.className="linkAnnotation",S&&this.container.append(_),this.container)}_bindLink(o,l){o.href=this.linkService.getDestinationHash(l),o.onclick=()=>(l&&this.linkService.goToDestination(l),!1),(l||""===l)&&(o.className="internalLink")}_bindNamedAction(o,l){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeNamedAction(l),!1),o.className="internalLink"}_bindJSAction(o,l){o.href=this.linkService.getAnchorUrl("");let _=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let S of Object.keys(l.actions)){let E=_.get(S);E&&(o[E]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l.id,name:S}}),!1))}o.onclick||(o.onclick=()=>!1),o.className="internalLink"}_bindResetFormAction(o,l){let _=o.onclick;if(_||(o.href=this.linkService.getAnchorUrl("")),o.className="internalLink",!this._fieldObjects){(0,S.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),_||(o.onclick=()=>!1);return}o.onclick=()=>{_&&_();let{fields:o,refs:E,include:T}=l,P=[];if(0!==o.length||0!==E.length){let l=new Set(E);for(let _ of o){let o=this._fieldObjects[_]||[];for(let{id:_}of o)l.add(_)}for(let o of Object.values(this._fieldObjects))for(let _ of o)l.has(_.id)===T&&P.push(_)}else for(let o of Object.values(this._fieldObjects))P.push(...o);let M=this.annotationStorage,F=[];for(let o of P){let{id:l}=o;switch(F.push(l),o.type){case"text":{let _=o.defaultValue||"";M.setValue(l,{value:_});break}case"checkbox":case"radiobutton":{let _=o.defaultValue===o.exportValues;M.setValue(l,{value:_});break}case"combobox":case"listbox":{let _=o.defaultValue||"";M.setValue(l,{value:_});break}default:continue}let _=document.querySelector(`[data-element-id="${l}"]`);if(_){if(!I.has(_)){(0,S.warn)(`_bindResetFormAction - element not allowed: ${l}`);continue}_.dispatchEvent(new Event("resetform"))}}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:F,name:"ResetForm"}}),!1}}}class W extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l})}render(){this.container.className="textAnnotation";let o=document.createElement("img");return o.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",o.alt="[{{type}} Annotation]",o.dataset.l10nId="text_annotation_type",o.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(o,this.data),this.container.append(o),this.container}}class z extends N{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(o){let{isWin:l,isMac:_}=N.platform;return l&&o.ctrlKey||_&&o.metaKey}_setEventListener(o,l,_,S){l.includes("mouse")?o.addEventListener(l,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:S(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):o.addEventListener(l,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:S(o)}})})}_setEventListeners(o,l,_){for(let[S,E]of l)("Action"===E||this.data.actions?.[E])&&this._setEventListener(o,S,E,_)}_setBackgroundColor(o){let l=this.data.backgroundColor||null;o.style.backgroundColor=null===l?"transparent":S.Util.makeHexColor(l[0],l[1],l[2])}_setTextStyle(o){let l;let _=["left","center","right"],{fontColor:E}=this.data.defaultAppearanceData,T=this.data.defaultAppearanceData.fontSize||O,P=o.style;if(this.data.multiLine){let o=Math.abs(this.data.rect[3]-this.data.rect[1]),_=Math.round(o/(S.LINE_FACTOR*T))||1,E=o/_;l=Math.min(T,Math.round(E/S.LINE_FACTOR))}else{let o=Math.abs(this.data.rect[3]-this.data.rect[1]);l=Math.min(T,Math.round(o/S.LINE_FACTOR))}P.fontSize=`calc(${l}px * var(--scale-factor))`,P.color=S.Util.makeHexColor(E[0],E[1],E[2]),null!==this.data.textAlignment&&(P.textAlign=_[this.data.textAlignment])}_setRequired(o,l){l?o.setAttribute("required",!0):o.removeAttribute("required"),o.setAttribute("aria-required",l)}}class H extends z{constructor(o){let l=o.renderForms||!o.data.hasAppearance&&!!o.data.fieldValue;super(o,{isRenderable:l})}setPropertyOnSiblings(o,l,_,S){let E=this.annotationStorage;for(let T of this._getElementsByName(o.name,o.id))T.domElement&&(T.domElement[l]=_),E.setValue(T.id,{[S]:_})}render(){let o=this.annotationStorage,l=this.data.id;this.container.className="textWidgetAnnotation";let _=null;if(this.renderForms){let S=o.getValue(l,{value:this.data.fieldValue}),E=S.formattedValue||S.value||"",T=o.getValue(l,{charLimit:this.data.maxLen}).charLimit;T&&E.length>T&&(E=E.slice(0,T));let P={userValue:E,formattedValue:null,valueOnFocus:""};this.data.multiLine?((_=document.createElement("textarea")).textContent=E,this.data.doNotScroll&&(_.style.overflowY="hidden")):((_=document.createElement("input")).type="text",_.setAttribute("value",E),this.data.doNotScroll&&(_.style.overflowX="hidden")),I.add(_),_.setAttribute("data-element-id",l),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=F,this._setRequired(_,this.data.required),T&&(_.maxLength=T),_.addEventListener("input",S=>{o.setValue(l,{value:S.target.value}),this.setPropertyOnSiblings(_,"value",S.target.value,"value")}),_.addEventListener("resetform",o=>{let l=this.data.defaultFieldValue??"";_.value=P.userValue=l,P.formattedValue=null});let M=o=>{let{formattedValue:l}=P;null!=l&&(o.target.value=l),o.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",o=>{P.userValue&&(o.target.value=P.userValue),P.valueOnFocus=o.target.value}),_.addEventListener("updatefromsandbox",_=>{let S={value(_){P.userValue=_.detail.value??"",o.setValue(l,{value:P.userValue.toString()}),_.target.value=P.userValue},formattedValue(_){let{formattedValue:S}=_.detail;P.formattedValue=S,null!=S&&_.target!==document.activeElement&&(_.target.value=S),o.setValue(l,{formattedValue:S})},selRange(o){o.target.setSelectionRange(...o.detail.selRange)},charLimit:_=>{let{charLimit:S}=_.detail,{target:E}=_;if(0===S){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",S);let T=P.userValue;T&&!(T.length<=S)&&(T=T.slice(0,S),E.value=P.userValue=T,o.setValue(l,{value:T}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(S,_)}),_.addEventListener("keydown",o=>{let _=-1;if("Escape"===o.key?_=0:"Enter"===o.key?_=2:"Tab"===o.key&&(_=3),-1===_)return;let{value:S}=o.target;P.valueOnFocus!==S&&(P.userValue=S,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:S,willCommit:!0,commitKey:_,selStart:o.target.selectionStart,selEnd:o.target.selectionEnd}}))});let S=M;M=null,_.addEventListener("blur",o=>{let{value:_}=o.target;P.userValue=_,this._mouseState.isDown&&P.valueOnFocus!==_&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:o.target.selectionStart,selEnd:o.target.selectionEnd}}),S(o)}),this.data.actions?.Keystroke&&_.addEventListener("beforeinput",o=>{let{data:_,target:S}=o,{value:E,selectionStart:T,selectionEnd:P}=S,M=T,F=P;switch(o.inputType){case"deleteWordBackward":{let o=E.substring(0,T).match(/\w*[^\w]*$/);o&&(M-=o[0].length);break}case"deleteWordForward":{let o=E.substring(T).match(/^[^\w]*\w*/);o&&(F+=o[0].length);break}case"deleteContentBackward":T===P&&(M-=1);break;case"deleteContentForward":T===P&&(F+=1)}o.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:E,change:_||"",willCommit:!1,selStart:M,selEnd:F}})}),this._setEventListeners(_,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.value)}if(M&&_.addEventListener("blur",M),this.data.comb){let o=this.data.rect[2]-this.data.rect[0],l=o/T;_.classList.add("comb"),_.style.letterSpacing=`calc(${l}px * var(--scale-factor) - 1ch)`}}else(_=document.createElement("div")).textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell";return this._setTextStyle(_),this._setBackgroundColor(_),this._setDefaultPropertiesFromJS(_),this.container.append(_),this.container}}class V extends z{constructor(o){super(o,{isRenderable:o.renderForms})}render(){let o=this.annotationStorage,l=this.data,_=l.id,S=o.getValue(_,{value:l.exportValue===l.fieldValue}).value;"string"==typeof S&&(S="Off"!==S,o.setValue(_,{value:S})),this.container.className="buttonWidgetAnnotation checkBox";let E=document.createElement("input");return I.add(E),E.setAttribute("data-element-id",_),E.disabled=l.readOnly,this._setRequired(E,this.data.required),E.type="checkbox",E.name=l.fieldName,S&&E.setAttribute("checked",!0),E.setAttribute("exportValue",l.exportValue),E.tabIndex=F,E.addEventListener("change",S=>{let{name:E,checked:T}=S.target;for(let S of this._getElementsByName(E,_)){let _=T&&S.exportValue===l.exportValue;S.domElement&&(S.domElement.checked=_),o.setValue(S.id,{value:_})}o.setValue(_,{value:T})}),E.addEventListener("resetform",o=>{let _=l.defaultFieldValue||"Off";o.target.checked=_===l.exportValue}),this.enableScripting&&this.hasJSActions&&(E.addEventListener("updatefromsandbox",l=>{let S={value(l){l.target.checked="Off"!==l.detail.value,o.setValue(_,{value:l.target.checked})}};this._dispatchEventFromSandbox(S,l)}),this._setEventListeners(E,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class $ extends z{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";let o=this.annotationStorage,l=this.data,_=l.id,S=o.getValue(_,{value:l.fieldValue===l.buttonValue}).value;"string"==typeof S&&(S=S!==l.buttonValue,o.setValue(_,{value:S}));let E=document.createElement("input");if(I.add(E),E.setAttribute("data-element-id",_),E.disabled=l.readOnly,this._setRequired(E,this.data.required),E.type="radio",E.name=l.fieldName,S&&E.setAttribute("checked",!0),E.tabIndex=F,E.addEventListener("change",l=>{let{name:S,checked:E}=l.target;for(let l of this._getElementsByName(S,_))o.setValue(l.id,{value:!1});o.setValue(_,{value:E})}),E.addEventListener("resetform",o=>{let _=l.defaultFieldValue;o.target.checked=null!=_&&_===l.buttonValue}),this.enableScripting&&this.hasJSActions){let S=l.buttonValue;E.addEventListener("updatefromsandbox",l=>{let E={value:l=>{let E=S===l.detail.value;for(let S of this._getElementsByName(l.target.name)){let l=E&&S.id===_;S.domElement&&(S.domElement.checked=l),o.setValue(S.id,{value:l})}}};this._dispatchEventFromSandbox(E,l)}),this._setEventListeners(E,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class Y extends U{constructor(o){super(o,{ignoreBorder:o.data.hasAppearance})}render(){let o=super.render();o.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(o.title=this.data.alternativeText);let l=o.lastChild;return this.enableScripting&&this.hasJSActions&&l&&(this._setDefaultPropertiesFromJS(l),l.addEventListener("updatefromsandbox",o=>{this._dispatchEventFromSandbox({},o)})),o}}class K extends z{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.className="choiceWidgetAnnotation";let o=this.annotationStorage,l=this.data.id,_=o.getValue(l,{value:this.data.fieldValue}),S=document.createElement("select");I.add(S),S.setAttribute("data-element-id",l),S.disabled=this.data.readOnly,this._setRequired(S,this.data.required),S.name=this.data.fieldName,S.tabIndex=F;let E=this.data.combo&&this.data.options.length>0;for(let o of(!this.data.combo&&(S.size=this.data.options.length,this.data.multiSelect&&(S.multiple=!0)),S.addEventListener("resetform",o=>{let l=this.data.defaultFieldValue;for(let o of S.options)o.selected=o.value===l}),this.data.options)){let l=document.createElement("option");l.textContent=o.displayValue,l.value=o.exportValue,_.value.includes(o.exportValue)&&(l.setAttribute("selected",!0),E=!1),S.append(l)}let T=null;if(E){let o=document.createElement("option");o.value=" ",o.setAttribute("hidden",!0),o.setAttribute("selected",!0),S.prepend(o),T=()=>{o.remove(),S.removeEventListener("input",T),T=null},S.addEventListener("input",T)}let P=(o,l)=>{let _=l?"value":"textContent",S=o.target.options;return o.target.multiple?Array.prototype.filter.call(S,o=>o.selected).map(o=>o[_]):-1===S.selectedIndex?null:S[S.selectedIndex][_]},M=o=>{let l=o.target.options;return Array.prototype.map.call(l,o=>({displayValue:o.textContent,exportValue:o.value}))};return this.enableScripting&&this.hasJSActions?(S.addEventListener("updatefromsandbox",_=>{let E={value(_){T?.();let E=_.detail.value,M=new Set(Array.isArray(E)?E:[E]);for(let o of S.options)o.selected=M.has(o.value);o.setValue(l,{value:P(_,!0)})},multipleSelection(o){S.multiple=!0},remove(_){let E=S.options,T=_.detail.remove;if(E[T].selected=!1,S.remove(T),E.length>0){let o=Array.prototype.findIndex.call(E,o=>o.selected);-1===o&&(E[0].selected=!0)}o.setValue(l,{value:P(_,!0),items:M(_)})},clear(_){for(;0!==S.length;)S.remove(0);o.setValue(l,{value:null,items:[]})},insert(_){let{index:E,displayValue:T,exportValue:F}=_.detail.insert,O=S.children[E],I=document.createElement("option");I.textContent=T,I.value=F,O?O.before(I):S.append(I),o.setValue(l,{value:P(_,!0),items:M(_)})},items(_){let{items:E}=_.detail;for(;0!==S.length;)S.remove(0);for(let o of E){let{displayValue:l,exportValue:_}=o,E=document.createElement("option");E.textContent=l,E.value=_,S.append(E)}S.options.length>0&&(S.options[0].selected=!0),o.setValue(l,{value:P(_,!0),items:M(_)})},indices(_){let S=new Set(_.detail.indices);for(let o of _.target.options)o.selected=S.has(o.index);o.setValue(l,{value:P(_,!0)})},editable(o){o.target.disabled=!o.detail.editable}};this._dispatchEventFromSandbox(E,_)}),S.addEventListener("input",_=>{let S=P(_,!0),E=P(_,!1);o.setValue(l,{value:S}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:E,changeEx:S,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(S,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],o=>o.target.checked)):S.addEventListener("input",function(_){o.setValue(l,{value:P(_,!0)})}),this.data.combo&&this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}class J extends N{constructor(o){let l=!!(o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l})}render(){let o=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",o.includes(this.data.parentType))return this.container;let l=`[data-annotation-id="${this.data.parentId}"]`,_=this.layer.querySelectorAll(l);if(0===_.length)return this.container;let E=new Q({container:this.container,trigger:Array.from(_),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),T=this.page,P=S.Util.normalizeRect([this.data.parentRect[0],T.view[3]-this.data.parentRect[1]+T.view[1],this.data.parentRect[2],T.view[3]-this.data.parentRect[3]+T.view[1]]),M=P[0]+this.data.parentRect[2]-this.data.parentRect[0],F=P[1],[O,I,D,L]=this.viewport.viewBox,N=D-O,U=L-I;return this.container.style.left=`${100*(M-O)/N}%`,this.container.style.top=`${100*(F-I)/U}%`,this.container.append(E.render()),this.container}}class Q{constructor(o){this.container=o.container,this.trigger=o.trigger,this.color=o.color,this.titleObj=o.titleObj,this.modificationDate=o.modificationDate,this.contentsObj=o.contentsObj,this.richText=o.richText,this.hideWrapper=o.hideWrapper||!1,this.pinned=!1}render(){let o=.7,l=document.createElement("div");l.className="popupWrapper",this.hideElement=this.hideWrapper?l:this.container,this.hideElement.hidden=!0;let _=document.createElement("div");_.className="popup";let T=this.color;if(T){let l=o*(255-T[0])+T[0],E=o*(255-T[1])+T[1],P=o*(255-T[2])+T[2];_.style.backgroundColor=S.Util.makeHexColor(0|l,0|E,0|P)}let P=document.createElement("h1");P.dir=this.titleObj.dir,P.textContent=this.titleObj.str,_.append(P);let F=E.PDFDateString.toDateObject(this.modificationDate);if(F){let o=document.createElement("span");o.className="popupDate",o.textContent="{{date}}, {{time}}",o.dataset.l10nId="annotation_date_string",o.dataset.l10nArgs=JSON.stringify({date:F.toLocaleDateString(),time:F.toLocaleTimeString()}),_.append(o)}if(this.richText?.str&&(!this.contentsObj?.str||this.contentsObj.str===this.richText.str))M.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:_}),_.lastChild.className="richText popupContent";else{let o=this._formatContents(this.contentsObj);_.append(o)}for(let o of(Array.isArray(this.trigger)||(this.trigger=[this.trigger]),this.trigger))o.addEventListener("click",this._toggle.bind(this)),o.addEventListener("mouseover",this._show.bind(this,!1)),o.addEventListener("mouseout",this._hide.bind(this,!1));return _.addEventListener("click",this._hide.bind(this,!0)),l.append(_),l}_formatContents({str:o,dir:l}){let _=document.createElement("p");_.className="popupContent",_.dir=l;let S=o.split(/(?:\r\n?|\n)/);for(let o=0,l=S.length;o<l;++o){let E=S[o];_.append(document.createTextNode(E)),o<l-1&&_.append(document.createElement("br"))}return _}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(o=!1){o&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(o=!0){o&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class Z extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0}),this.textContent=o.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){let o=document.createElement("div");for(let l of(o.className="annotationTextContent",o.setAttribute("role","comment"),this.textContent)){let _=document.createElement("span");_.textContent=l,o.append(_)}this.container.append(o)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class tt extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";let o=this.data,{width:l,height:_}=D(o.rect),S=this.svgFactory.create(l,_,!0),E=this.svgFactory.createElement("svg:line");return E.setAttribute("x1",o.rect[2]-o.lineCoordinates[0]),E.setAttribute("y1",o.rect[3]-o.lineCoordinates[1]),E.setAttribute("x2",o.rect[2]-o.lineCoordinates[2]),E.setAttribute("y2",o.rect[3]-o.lineCoordinates[3]),E.setAttribute("stroke-width",o.borderStyle.width||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),S.append(E),this.container.append(S),this._createPopup(E,o),this.container}}class te extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";let o=this.data,{width:l,height:_}=D(o.rect),S=this.svgFactory.create(l,_,!0),E=o.borderStyle.width,T=this.svgFactory.createElement("svg:rect");return T.setAttribute("x",E/2),T.setAttribute("y",E/2),T.setAttribute("width",l-E),T.setAttribute("height",_-E),T.setAttribute("stroke-width",E||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","transparent"),S.append(T),this.container.append(S),this._createPopup(T,o),this.container}}class ti extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";let o=this.data,{width:l,height:_}=D(o.rect),S=this.svgFactory.create(l,_,!0),E=o.borderStyle.width,T=this.svgFactory.createElement("svg:ellipse");return T.setAttribute("cx",l/2),T.setAttribute("cy",_/2),T.setAttribute("rx",l/2-E/2),T.setAttribute("ry",_/2-E/2),T.setAttribute("stroke-width",E||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","transparent"),S.append(T),this.container.append(S),this._createPopup(T,o),this.container}}class tr extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;let o=this.data,{width:l,height:_}=D(o.rect),S=this.svgFactory.create(l,_,!0),E=[];for(let l of o.vertices){let _=l.x-o.rect[0],S=o.rect[3]-l.y;E.push(_+","+S)}E=E.join(" ");let T=this.svgFactory.createElement(this.svgElementName);return T.setAttribute("points",E),T.setAttribute("stroke-width",o.borderStyle.width||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","transparent"),S.append(T),this.container.append(S),this._createPopup(T,o),this.container}}class ta extends tr{constructor(o){super(o),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class tn extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class to extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;let o=this.data,{width:l,height:_}=D(o.rect),S=this.svgFactory.create(l,_,!0);for(let l of o.inkLists){let _=[];for(let S of l){let l=S.x-o.rect[0],E=o.rect[3]-S.y;_.push(`${l},${E}`)}_=_.join(" ");let E=this.svgFactory.createElement(this.svgElementName);E.setAttribute("points",_),E.setAttribute("stroke-width",o.borderStyle.width||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),this._createPopup(E,o),S.append(E)}return this.container.append(S),this.container}}class tl extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return(this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals)?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class th extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return(this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals)?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class td extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return(this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals)?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class tc extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return(this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals)?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class tu extends N{constructor(o){let l=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:l,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class tp extends N{constructor(o){super(o,{isRenderable:!0});let{filename:l,content:_}=this.data.file;this.filename=(0,E.getFilenameFromUrl)(l),this.content=_,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:l,content:_})}render(){this.container.className="fileAttachmentAnnotation";let o=document.createElement("div");return o.className="popupTriggerArea",o.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(o,this.data),this.container.append(o),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class tg{static #ee(tf,tm,tb,tA){let o=tf.firstChild||tf;o.id=`${E.AnnotationPrefix}${tm}`,tb.append(tf),tA?.moveElementInDOM(tb,tf,o,!1)}static render(o){let{annotations:l,div:_,viewport:P,accessibilityManager:M}=o;this.#ei(_,P);let F=0;for(let O of l){if(O.annotationType!==S.AnnotationType.POPUP){let{width:o,height:l}=D(O.rect);if(o<=0||l<=0)continue}let l=L.create({data:O,layer:_,page:o.page,viewport:P,linkService:o.linkService,downloadManager:o.downloadManager,imageResourcesPath:o.imageResourcesPath||"",renderForms:!1!==o.renderForms,svgFactory:new E.DOMSVGFactory,annotationStorage:o.annotationStorage||new T.AnnotationStorage,enableScripting:o.enableScripting,hasJSActions:o.hasJSActions,fieldObjects:o.fieldObjects,mouseState:o.mouseState||{isDown:!1}});if(l.isRenderable){let o=l.render();if(O.hidden&&(o.style.visibility="hidden"),Array.isArray(o))for(let l of o)l.style.zIndex=F++,tg.#ee(l,O.id,_,M);else o.style.zIndex=F++,l instanceof J?_.prepend(o):tg.#ee(o,O.id,_,M)}}this.#es(_,o.annotationCanvasMap)}static update(o){let{annotationCanvasMap:l,div:_,viewport:S}=o;this.#ei(_,S),this.#es(_,l),_.hidden=!1}static #ei(tv,{width:t_,height:tS,rotation:tE}){let{style:o}=tv,l=tE%180!=0,_=Math.floor(t_)+"px",S=Math.floor(tS)+"px";o.width=l?S:_,o.height=l?_:S,tv.setAttribute("data-main-rotation",tE)}static #es(tC,tT){if(tT){for(let[o,l]of tT){let _=tC.querySelector(`[data-annotation-id="${o}"]`);if(!_)continue;let{firstChild:S}=_;S?"CANVAS"===S.nodeName?S.replaceWith(l):S.before(l):_.append(l)}tT.clear()}}}l.AnnotationLayer=tg},(o,l)=>{function _(o){return Math.floor(255*Math.max(0,Math.min(1,o))).toString(16).padStart(2,"0")}Object.defineProperty(l,"__esModule",{value:!0}),l.ColorConverters=void 0;class S{static CMYK_G([o,l,_,S]){return["G",1-Math.min(1,.3*o+.59*_+.11*l+S)]}static G_CMYK([o]){return["CMYK",0,0,0,1-o]}static G_RGB([o]){return["RGB",o,o,o]}static G_HTML([o]){let l=_(o);return`#${l}${l}${l}`}static RGB_G([o,l,_]){return["G",.3*o+.59*l+.11*_]}static RGB_HTML([o,l,S]){let E=_(o),T=_(l),P=_(S);return`#${E}${T}${P}`}static T_HTML(){return"#00000000"}static CMYK_RGB([o,l,_,S]){return["RGB",1-Math.min(1,o+S),1-Math.min(1,_+S),1-Math.min(1,l+S)]}static CMYK_HTML(o){let l=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(l)}static RGB_CMYK([o,l,_]){let S=1-o,E=1-l,T=1-_,P=Math.min(S,E,T);return["CMYK",S,E,T,P]}}l.ColorConverters=S},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaLayer=void 0;var S=_(20);class E{static setupStorage(o,l,_,S,E){let T=S.getValue(l,{value:null});switch(_.name){case"textarea":if(null!==T.value&&(o.textContent=T.value),"print"===E)break;o.addEventListener("input",o=>{S.setValue(l,{value:o.target.value})});break;case"input":if("radio"===_.attributes.type||"checkbox"===_.attributes.type){if(T.value===_.attributes.xfaOn?o.setAttribute("checked",!0):T.value===_.attributes.xfaOff&&o.removeAttribute("checked"),"print"===E)break;o.addEventListener("change",o=>{S.setValue(l,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(null!==T.value&&o.setAttribute("value",T.value),"print"===E)break;o.addEventListener("input",o=>{S.setValue(l,{value:o.target.value})})}break;case"select":if(null!==T.value)for(let o of _.children)o.attributes.value===T.value&&(o.attributes.selected=!0);o.addEventListener("input",o=>{let _=o.target.options,E=-1===_.selectedIndex?"":_[_.selectedIndex].value;S.setValue(l,{value:E})})}}static setAttributes({html:o,element:l,storage:_=null,intent:S,linkService:E}){let{attributes:T}=l,P=o instanceof HTMLAnchorElement;for(let[l,_]of("radio"===T.type&&(T.name=`${T.name}-${S}`),Object.entries(T)))if(null!=_)switch(l){case"class":_.length&&o.setAttribute(l,_.join(" "));break;case"dataId":break;case"id":o.setAttribute("data-element-id",_);break;case"style":Object.assign(o.style,_);break;case"textContent":o.textContent=_;break;default:P&&("href"===l||"newWindow"===l)||o.setAttribute(l,_)}P&&E.addLinkAttributes(o,T.href,T.newWindow),_&&T.dataId&&this.setupStorage(o,T.dataId,l,_)}static render(o){let l=o.annotationStorage,_=o.linkService,E=o.xfaHtml,T=o.intent||"display",P=document.createElement(E.name);E.attributes&&this.setAttributes({html:P,element:E,intent:T,linkService:_});let M=[[E,-1,P]],F=o.div;if(F.append(P),o.viewport){let l=`matrix(${o.viewport.transform.join(",")})`;F.style.transform=l}"richText"!==T&&F.setAttribute("class","xfaLayer xfaFont");let O=[];for(;M.length>0;){let o;let[E,P,F]=M.at(-1);if(P+1===E.children.length){M.pop();continue}let I=E.children[++M.at(-1)[1]];if(null===I)continue;let{name:D}=I;if("#text"===D){let o=document.createTextNode(I.value);O.push(o),F.append(o);continue}if(o=I?.attributes?.xmlns?document.createElementNS(I.attributes.xmlns,D):document.createElement(D),F.append(o),I.attributes&&this.setAttributes({html:o,element:I,storage:l,intent:T,linkService:_}),I.children&&I.children.length>0)M.push([I,-1,o]);else if(I.value){let l=document.createTextNode(I.value);S.XfaText.shouldBuildText(D)&&O.push(l),o.append(l)}}for(let o of F.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))o.setAttribute("readOnly",!0);return{textDivs:O}}static update(o){let l=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=l,o.div.hidden=!1}}l.XfaLayer=E},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TextLayerRenderTask=void 0,l.renderTextLayer=V;var S=_(1),E=_(8);let T=1e5,P=30,M=.8,F=new Map,O=/^\s+$/g;function I(o,l){let _=F.get(o);if(_)return _;l.save(),l.font=`${P}px ${o}`;let S=l.measureText(""),E=S.fontBoundingBoxAscent,T=Math.abs(S.fontBoundingBoxDescent);if(E){l.restore();let _=E/(E+T);return F.set(o,_),_}l.strokeStyle="red",l.clearRect(0,0,P,P),l.strokeText("g",0,0);let O=l.getImageData(0,0,P,P).data;T=0;for(let o=O.length-1-3;o>=0;o-=4)if(O[o]>0){T=Math.ceil(o/4/P);break}l.clearRect(0,0,P,P),l.strokeText("A",0,P),O=l.getImageData(0,0,P,P).data,E=0;for(let o=0,l=O.length;o<l;o+=4)if(O[o]>0){E=P-Math.floor(o/4/P);break}if(l.restore(),E){let l=E/(E+T);return F.set(o,l),l}return F.set(o,M),M}function D(o,l,_,E){let T,P;let M=document.createElement("span"),F=o._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==l.str,hasEOL:l.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==l.str,hasEOL:l.hasEOL,fontSize:0};o._textDivs.push(M);let D=S.Util.transform(o._viewport.transform,l.transform),L=Math.atan2(D[1],D[0]),N=_[l.fontName];N.vertical&&(L+=Math.PI/2);let U=Math.hypot(D[2],D[3]),W=U*I(N.fontFamily,E);0===L?(T=D[4],P=D[5]-W):(T=D[4]+W*Math.sin(L),P=D[5]-W*Math.cos(L)),M.style.left=`${T}px`,M.style.top=`${P}px`,M.style.fontSize=`${U}px`,M.style.fontFamily=N.fontFamily,F.fontSize=U,M.setAttribute("role","presentation"),M.textContent=l.str,M.dir=l.dir,o._fontInspectorEnabled&&(M.dataset.fontName=l.fontName),0!==L&&(F.angle=L*(180/Math.PI));let z=!1;if(l.str.length>1||o._enhanceTextSelection&&O.test(l.str))z=!0;else if(" "!==l.str&&l.transform[0]!==l.transform[3]){let o=Math.abs(l.transform[0]),_=Math.abs(l.transform[3]);o!==_&&Math.max(o,_)/Math.min(o,_)>1.5&&(z=!0)}if(z&&(N.vertical?F.canvasWidth=l.height*o._viewport.scale:F.canvasWidth=l.width*o._viewport.scale),o._textDivProperties.set(M,F),o._textContentStream&&o._layoutText(M),o._enhanceTextSelection&&F.hasText){let _,E,F=1,O=0;0!==L&&(F=Math.cos(L),O=Math.sin(L));let I=(N.vertical?l.height:l.width)*o._viewport.scale,D=U;0!==L?(_=[F,O,-O,F,T,P],E=S.Util.getAxialAlignedBoundingBox([0,0,I,D],_)):E=[T,P,T+I,P+D],o._bounds.push({left:E[0],top:E[1],right:E[2],bottom:E[3],div:M,size:[I,D],m:_})}}function L(o){if(o._canceled)return;let l=o._textDivs,_=o._capability,S=l.length;if(S>T){o._renderingDone=!0,_.resolve();return}if(!o._textContentStream)for(let _=0;_<S;_++)o._layoutText(l[_]);o._renderingDone=!0,_.resolve()}function N(o,l,_){let S=0;for(let E=0;E<_;E++){let _=o[l++];_>0&&(S=S?Math.min(_,S):_)}return S}function U(o){let l=o._bounds,_=o._viewport,E=W(_.width,_.height,l);for(let _=0;_<E.length;_++){let T=l[_].div,P=o._textDivProperties.get(T);if(0===P.angle){P.paddingLeft=l[_].left-E[_].left,P.paddingTop=l[_].top-E[_].top,P.paddingRight=E[_].right-l[_].right,P.paddingBottom=E[_].bottom-l[_].bottom,o._textDivProperties.set(T,P);continue}let M=E[_],F=l[_],O=F.m,I=O[0],D=O[1],L=[[0,0],[0,F.size[1]],[F.size[0],0],F.size],U=new Float64Array(64);for(let o=0,l=L.length;o<l;o++){let l=S.Util.applyTransform(L[o],O);U[o+0]=I&&(M.left-l[0])/I,U[o+4]=D&&(M.top-l[1])/D,U[o+8]=I&&(M.right-l[0])/I,U[o+12]=D&&(M.bottom-l[1])/D,U[o+16]=D&&-((M.left-l[0])/D),U[o+20]=I&&(M.top-l[1])/I,U[o+24]=D&&-((M.right-l[0])/D),U[o+28]=I&&(M.bottom-l[1])/I,U[o+32]=I&&-((M.left-l[0])/I),U[o+36]=D&&-((M.top-l[1])/D),U[o+40]=I&&-((M.right-l[0])/I),U[o+44]=D&&-((M.bottom-l[1])/D),U[o+48]=D&&(M.left-l[0])/D,U[o+52]=I&&-((M.top-l[1])/I),U[o+56]=D&&(M.right-l[0])/D,U[o+60]=I&&-((M.bottom-l[1])/I)}let W=1+Math.min(Math.abs(I),Math.abs(D));P.paddingLeft=N(U,32,16)/W,P.paddingTop=N(U,48,16)/W,P.paddingRight=N(U,0,16)/W,P.paddingBottom=N(U,16,16)/W,o._textDivProperties.set(T,P)}}function W(o,l,_){let S=_.map(function(o,l){return{x1:o.left,y1:o.top,x2:o.right,y2:o.bottom,index:l,x1New:void 0,x2New:void 0}});z(o,S);let E=Array(_.length);for(let o of S){let l=o.index;E[l]={left:o.x1New,top:0,right:o.x2New,bottom:0}}for(let T of(_.map(function(l,_){let T=E[_],P=S[_];P.x1=l.top,P.y1=o-T.right,P.x2=l.bottom,P.y2=o-T.left,P.index=_,P.x1New=void 0,P.x2New=void 0}),z(l,S),S)){let o=T.index;E[o].top=T.x1New,E[o].bottom=T.x2New}return E}function z(o,l){l.sort(function(o,l){return o.x1-l.x1||o.index-l.index});let _={x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},S=[{start:-1/0,end:1/0,boundary:_}];for(let o of l){let l,_,E=0;for(;E<S.length&&S[E].end<=o.y1;)E++;let T=S.length-1;for(;T>=0&&S[T].start>=o.y2;)T--;let P,M,F=-1/0;for(P=E;P<=T;P++){let E;(E=(_=(l=S[P]).boundary).x2>o.x1?_.index>o.index?_.x1New:o.x1:void 0===_.x2New?(_.x2+o.x1)/2:_.x2New)>F&&(F=E)}for(o.x1New=F,P=E;P<=T;P++)void 0===(_=(l=S[P]).boundary).x2New?_.x2>o.x1?_.index>o.index&&(_.x2New=_.x2):_.x2New=F:_.x2New>F&&(_.x2New=Math.max(F,_.x2));let O=[],I=null;for(P=E;P<=T;P++){_=(l=S[P]).boundary;let E=_.x2>o.x2?_:o;I===E?O.at(-1).end=l.end:(O.push({start:l.start,end:l.end,boundary:E}),I=E)}for(S[E].start<o.y1&&(O[0].start=o.y1,O.unshift({start:S[E].start,end:o.y1,boundary:S[E].boundary})),o.y2<S[T].end&&(O.at(-1).end=o.y2,O.push({start:o.y2,end:S[T].end,boundary:S[T].boundary})),P=E;P<=T;P++){if(void 0!==(_=(l=S[P]).boundary).x2New)continue;let o=!1;for(M=E-1;!o&&M>=0&&S[M].start>=_.y1;M--)o=S[M].boundary===_;for(M=T+1;!o&&M<S.length&&S[M].end<=_.y2;M++)o=S[M].boundary===_;for(M=0;!o&&M<O.length;M++)o=O[M].boundary===_;o||(_.x2New=F)}Array.prototype.splice.apply(S,[E,T-E+1,...O])}for(let l of S){let _=l.boundary;void 0===_.x2New&&(_.x2New=Math.max(o,_.x2))}}class H{constructor({textContent:o,textContentStream:l,container:_,viewport:T,textDivs:P,textContentItemsStr:M,enhanceTextSelection:F}){F&&(0,E.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=o,this._textContentStream=l,this._container=_,this._document=_.ownerDocument,this._viewport=T,this._textDivs=P||[],this._textContentItemsStr=M||[],this._enhanceTextSelection=!!F,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,S.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new S.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(Error("TextLayer task cancelled."))}_processItems(o,l){for(let _=0,S=o.length;_<S;_++){if(void 0===o[_].str){if("beginMarkedContentProps"===o[_].type||"beginMarkedContent"===o[_].type){let l=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==o[_].id&&this._container.setAttribute("id",`${o[_].id}`),l.append(this._container)}else"endMarkedContent"===o[_].type&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(o[_].str),D(this,o[_],l,this._layoutTextCtx)}}_layoutText(o){let l=this._textDivProperties.get(o),_="";if(0!==l.canvasWidth&&l.hasText){let{fontFamily:S}=o.style,{fontSize:E}=l;(E!==this._layoutTextLastFontSize||S!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${E*this._devicePixelRatio}px ${S}`,this._layoutTextLastFontSize=E,this._layoutTextLastFontFamily=S);let{width:T}=this._layoutTextCtx.measureText(o.textContent);if(T>0){let o=this._devicePixelRatio*l.canvasWidth/T;this._enhanceTextSelection&&(l.scale=o),_=`scaleX(${o})`}}if(0!==l.angle&&(_=`rotate(${l.angle}deg) ${_}`),_.length>0&&(this._enhanceTextSelection&&(l.originalTransform=_),o.style.transform=_),l.hasText&&this._container.append(o),l.hasEOL){let o=document.createElement("br");o.setAttribute("role","presentation"),this._container.append(o)}}_render(o=0){let l=(0,S.createPromiseCapability)(),_=Object.create(null),E=this._document.createElement("canvas");if(E.height=E.width=P,this._layoutTextCtx=E.getContext("2d",{alpha:!1}),this._textContent){let o=this._textContent.items,_=this._textContent.styles;this._processItems(o,_),l.resolve()}else if(this._textContentStream){let o=()=>{this._reader.read().then(({value:S,done:E})=>{if(E){l.resolve();return}Object.assign(_,S.styles),this._processItems(S.items,_),o()},l.reject)};this._reader=this._textContentStream.getReader(),o()}else throw Error('Neither "textContent" nor "textContentStream" parameters specified.');l.promise.then(()=>{_=null,o?this._renderTimer=setTimeout(()=>{L(this),this._renderTimer=null},o):L(this)},this._capability.reject)}expandTextDivs(o=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(U(this),this._bounds=null);let l=[],_=[];for(let S=0,E=this._textDivs.length;S<E;S++){let E=this._textDivs[S],T=this._textDivProperties.get(E);T.hasText&&(o?(l.length=0,_.length=0,T.originalTransform&&l.push(T.originalTransform),T.paddingTop>0?(_.push(`${T.paddingTop}px`),l.push(`translateY(${-T.paddingTop}px)`)):_.push(0),T.paddingRight>0?_.push(`${T.paddingRight/T.scale}px`):_.push(0),T.paddingBottom>0?_.push(`${T.paddingBottom}px`):_.push(0),T.paddingLeft>0?(_.push(`${T.paddingLeft/T.scale}px`),l.push(`translateX(${-T.paddingLeft/T.scale}px)`)):_.push(0),E.style.padding=_.join(" "),l.length&&(E.style.transform=l.join(" "))):(E.style.padding=null,E.style.transform=T.originalTransform))}}}function V(o){let l=new H({textContent:o.textContent,textContentStream:o.textContentStream,container:o.container,viewport:o.viewport,textDivs:o.textDivs,textContentItemsStr:o.textContentItemsStr,enhanceTextSelection:o.enhanceTextSelection});return l._render(o.timeout),l}l.TextLayerRenderTask=H},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SVGGraphics=void 0;var S=_(8),E=_(1),T=_(3);let P=class{constructor(){(0,E.unreachable)("Not implemented: SVGGraphics")}};l.SVGGraphics=P;{let o={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_="http://www.w3.org/XML/1998/namespace",I="http://www.w3.org/1999/xlink",D=["butt","round","square"],L=["miter","round","bevel"],N=function(o,l="",_=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!_)return URL.createObjectURL(new Blob([o],{type:l}));let S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",E=`data:${l};base64,`;for(let l=0,_=o.length;l<_;l+=3){let T=255&o[l],P=255&o[l+1],M=255&o[l+2],F=T>>2,O=(3&T)<<4|P>>4,I=l+1<_?(15&P)<<2|M>>6:64,D=l+2<_?63&M:64;E+=S[F]+S[O]+S[I]+S[D]}return E},U=function(){let o=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,_=new Int32Array(256);for(let o=0;o<256;o++){let l=o;for(let o=0;o<8;o++)l=1&l?3988292384^l>>1&2147483647:l>>1&2147483647;_[o]=l}function S(o,l,S){let E=-1;for(let T=l;T<S;T++){let l=(E^o[T])&255,S=_[l];E=E>>>8^S}return -1^E}function P(o,l,_,E){let T=E,P=l.length;_[T]=P>>24&255,_[T+1]=P>>16&255,_[T+2]=P>>8&255,_[T+3]=255&P,_[T+=4]=255&o.charCodeAt(0),_[T+1]=255&o.charCodeAt(1),_[T+2]=255&o.charCodeAt(2),_[T+3]=255&o.charCodeAt(3),T+=4,_.set(l,T),T+=l.length;let M=S(_,E+4,T);_[T]=M>>24&255,_[T+1]=M>>16&255,_[T+2]=M>>8&255,_[T+3]=255&M}function M(o,l,_){let S=1,E=0;for(let T=l;T<_;++T)E=(E+(S=(S+(255&o[T]))%65521))%65521;return E<<16|S}function F(o){if(!T.isNodeJS)return O(o);try{let l;l=parseInt(process.versions.node)>=8?o:Buffer.from(o);let _=__webpack_require__(2258).deflateSync(l,{level:9});return _ instanceof Uint8Array?_:new Uint8Array(_)}catch(o){(0,E.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+o)}return O(o)}function O(o){let l=o.length,_=65535,S=Math.ceil(l/_),E=new Uint8Array(2+l+5*S+4),T=0;E[T++]=120,E[T++]=156;let P=0;for(;l>_;)E[T++]=0,E[T++]=255,E[T++]=255,E[T++]=0,E[T++]=0,E.set(o.subarray(P,P+_),T),T+=_,P+=_,l-=_;E[T++]=1,E[T++]=255&l,E[T++]=l>>8&255,E[T++]=255&~l,E[T++]=(65535&~l)>>8&255,E.set(o.subarray(P),T),T+=o.length-P;let F=M(o,0,o.length);return E[T++]=F>>24&255,E[T++]=F>>16&255,E[T++]=F>>8&255,E[T++]=255&F,E}function I(_,S,T,M){let O,I,D;let L=_.width,U=_.height,W=_.data;switch(S){case E.ImageKind.GRAYSCALE_1BPP:I=0,O=1,D=L+7>>3;break;case E.ImageKind.RGB_24BPP:I=2,O=8,D=3*L;break;case E.ImageKind.RGBA_32BPP:I=6,O=8,D=4*L;break;default:throw Error("invalid format")}let z=new Uint8Array((1+D)*U),H=0,V=0;for(let o=0;o<U;++o)z[H++]=0,z.set(W.subarray(V,V+D),H),V+=D,H+=D;if(S===E.ImageKind.GRAYSCALE_1BPP&&M){H=0;for(let o=0;o<U;o++){H++;for(let o=0;o<D;o++)z[H++]^=255}}let $=new Uint8Array([L>>24&255,L>>16&255,L>>8&255,255&L,U>>24&255,U>>16&255,U>>8&255,255&U,O,I,0,0,0]),Y=F(z),K=o.length+3*l+$.length+Y.length,J=new Uint8Array(K),Q=0;return J.set(o,Q),P("IHDR",$,J,Q+=o.length),P("IDATA",Y,J,Q+=l+$.length),Q+=l+Y.length,P("IEND",new Uint8Array(0),J,Q),N(J,"image/png",T)}return function(o,l,_){let S=void 0===o.kind?E.ImageKind.GRAYSCALE_1BPP:o.kind;return I(o,S,l,_)}}();class W{constructor(){this.fontSizeScale=1,this.fontWeight=o.fontWeight,this.fontSize=0,this.textMatrix=E.IDENTITY_MATRIX,this.fontMatrix=E.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=E.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,l){this.x=o,this.y=l}}function M(o){let l=[],_=[];for(let S of o){if("save"===S.fn){l.push({fnId:92,fn:"group",items:[]}),_.push(l),l=l.at(-1).items;continue}"restore"===S.fn?l=_.pop():l.push(S)}return l}function F(o){if(Number.isInteger(o))return o.toString();let l=o.toFixed(10),_=l.length-1;if("0"!==l[_])return l;do _--;while("0"===l[_]);return l.substring(0,"."===l[_]?_:_+1)}function O(o){if(0===o[4]&&0===o[5]){if(0===o[1]&&0===o[2])return 1===o[0]&&1===o[3]?"":`scale(${F(o[0])} ${F(o[3])})`;if(o[0]===o[3]&&o[1]===-o[2]){let l=180*Math.acos(o[0])/Math.PI;return`rotate(${F(l)})`}}else if(1===o[0]&&0===o[1]&&0===o[2]&&1===o[3])return`translate(${F(o[4])} ${F(o[5])})`;return`matrix(${F(o[0])} ${F(o[1])} ${F(o[2])} ${F(o[3])} ${F(o[4])} ${F(o[5])})`}let z=0,H=0,V=0;l.SVGGraphics=P=class{constructor(o,l,_=!1){for(let T in(0,S.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new S.DOMSVGFactory,this.current=new W,this.transformMatrix=E.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=l,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!_,this._operatorIdMapping=[],E.OPS)this._operatorIdMapping[E.OPS[T]]=T}save(){this.transformStack.push(this.transformMatrix);let o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){let l=o.fnArray,_=o.argsArray;for(let o=0,S=l.length;o<S;o++)if(l[o]===E.OPS.dependency)for(let l of _[o]){let o=l.startsWith("g_")?this.commonObjs:this.objs,_=new Promise(_=>{o.get(l,_)});this.current.dependencies.push(_)}return Promise.all(this.current.dependencies)}transform(o,l,_,S,T,P){let M=[o,l,_,S,T,P];this.transformMatrix=E.Util.transform(this.transformMatrix,M),this.tgrp=null}getSVG(o,l){this.viewport=l;let _=this._initialize(l);return this.loadDependencies(o).then(()=>(this.transformMatrix=E.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),_))}convertOpList(o){let l=this._operatorIdMapping,_=o.argsArray,S=o.fnArray,E=[];for(let o=0,T=S.length;o<T;o++){let T=S[o];E.push({fnId:T,fn:l[T],args:_[o]})}return M(E)}executeOpTree(o){for(let l of o){let o=l.fn,_=l.fnId,S=l.args;switch(0|_){case E.OPS.beginText:this.beginText();break;case E.OPS.dependency:break;case E.OPS.setLeading:this.setLeading(S);break;case E.OPS.setLeadingMoveText:this.setLeadingMoveText(S[0],S[1]);break;case E.OPS.setFont:this.setFont(S);break;case E.OPS.showText:case E.OPS.showSpacedText:this.showText(S[0]);break;case E.OPS.endText:this.endText();break;case E.OPS.moveText:this.moveText(S[0],S[1]);break;case E.OPS.setCharSpacing:this.setCharSpacing(S[0]);break;case E.OPS.setWordSpacing:this.setWordSpacing(S[0]);break;case E.OPS.setHScale:this.setHScale(S[0]);break;case E.OPS.setTextMatrix:this.setTextMatrix(S[0],S[1],S[2],S[3],S[4],S[5]);break;case E.OPS.setTextRise:this.setTextRise(S[0]);break;case E.OPS.setTextRenderingMode:this.setTextRenderingMode(S[0]);break;case E.OPS.setLineWidth:this.setLineWidth(S[0]);break;case E.OPS.setLineJoin:this.setLineJoin(S[0]);break;case E.OPS.setLineCap:this.setLineCap(S[0]);break;case E.OPS.setMiterLimit:this.setMiterLimit(S[0]);break;case E.OPS.setFillRGBColor:this.setFillRGBColor(S[0],S[1],S[2]);break;case E.OPS.setStrokeRGBColor:this.setStrokeRGBColor(S[0],S[1],S[2]);break;case E.OPS.setStrokeColorN:this.setStrokeColorN(S);break;case E.OPS.setFillColorN:this.setFillColorN(S);break;case E.OPS.shadingFill:this.shadingFill(S[0]);break;case E.OPS.setDash:this.setDash(S[0],S[1]);break;case E.OPS.setRenderingIntent:this.setRenderingIntent(S[0]);break;case E.OPS.setFlatness:this.setFlatness(S[0]);break;case E.OPS.setGState:this.setGState(S[0]);break;case E.OPS.fill:this.fill();break;case E.OPS.eoFill:this.eoFill();break;case E.OPS.stroke:this.stroke();break;case E.OPS.fillStroke:this.fillStroke();break;case E.OPS.eoFillStroke:this.eoFillStroke();break;case E.OPS.clip:this.clip("nonzero");break;case E.OPS.eoClip:this.clip("evenodd");break;case E.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case E.OPS.paintImageXObject:this.paintImageXObject(S[0]);break;case E.OPS.paintInlineImageXObject:this.paintInlineImageXObject(S[0]);break;case E.OPS.paintImageMaskXObject:this.paintImageMaskXObject(S[0]);break;case E.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(S[0],S[1]);break;case E.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case E.OPS.closePath:this.closePath();break;case E.OPS.closeStroke:this.closeStroke();break;case E.OPS.closeFillStroke:this.closeFillStroke();break;case E.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case E.OPS.nextLine:this.nextLine();break;case E.OPS.transform:this.transform(S[0],S[1],S[2],S[3],S[4],S[5]);break;case E.OPS.constructPath:this.constructPath(S[0],S[1]);break;case E.OPS.endPath:this.endPath();break;case 92:this.group(l.items);break;default:(0,E.warn)(`Unimplemented operator ${o}`)}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,l,_,S,E,T){let P=this.current;P.textMatrix=P.lineMatrix=[o,l,_,S,E,T],P.textMatrixScale=Math.hypot(o,l),P.x=P.lineX=0,P.y=P.lineY=0,P.xcoords=[],P.ycoords=[],P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${F(P.fontSize)}px`),P.tspan.setAttributeNS(null,"y",F(-P.y)),P.txtElement=this.svgFactory.createElement("svg:text"),P.txtElement.append(P.tspan)}beginText(){let o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=E.IDENTITY_MATRIX,o.lineMatrix=E.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,l){let _=this.current;_.x=_.lineX+=o,_.y=_.lineY+=l,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${F(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",F(-_.y))}showText(l){let S=this.current,T=S.font,P=S.fontSize;if(0===P)return;let M=S.fontSizeScale,I=S.charSpacing,D=S.wordSpacing,L=S.fontDirection,N=S.textHScale*L,U=T.vertical,W=U?1:-1,z=T.defaultVMetrics,H=P*S.fontMatrix[0],V=0;for(let o of l){let l,_,E;if(null===o){V+=L*D;continue}if("number"==typeof o){V+=W*o*P/1e3;continue}let F=(o.isSpace?D:0)+I,O=o.fontChar,N=o.width;if(U){let S;let E=o.vmetric||z;S=-(S=o.vmetric?E[1]:.5*N)*H;let T=E[2]*H;N=E?-E[0]:N,l=S/M,_=(V+T)/M}else l=V/M,_=0;(o.isInFont||T.missingFile)&&(S.xcoords.push(S.x+l),U&&S.ycoords.push(-S.y+_),S.tspan.textContent+=O),V+=E=U?N*H-F*L:N*H+F*L}S.tspan.setAttributeNS(null,"x",S.xcoords.map(F).join(" ")),U?S.tspan.setAttributeNS(null,"y",S.ycoords.map(F).join(" ")):S.tspan.setAttributeNS(null,"y",F(-S.y)),U?S.y-=V:S.x+=V*N,S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${F(S.fontSize)}px`),S.fontStyle!==o.fontStyle&&S.tspan.setAttributeNS(null,"font-style",S.fontStyle),S.fontWeight!==o.fontWeight&&S.tspan.setAttributeNS(null,"font-weight",S.fontWeight);let $=S.textRenderingMode&E.TextRenderingMode.FILL_STROKE_MASK;if($===E.TextRenderingMode.FILL||$===E.TextRenderingMode.FILL_STROKE?(S.fillColor!==o.fillColor&&S.tspan.setAttributeNS(null,"fill",S.fillColor),S.fillAlpha<1&&S.tspan.setAttributeNS(null,"fill-opacity",S.fillAlpha)):S.textRenderingMode===E.TextRenderingMode.ADD_TO_PATH?S.tspan.setAttributeNS(null,"fill","transparent"):S.tspan.setAttributeNS(null,"fill","none"),$===E.TextRenderingMode.STROKE||$===E.TextRenderingMode.FILL_STROKE){let o=1/(S.textMatrixScale||1);this._setStrokeAttributes(S.tspan,o)}let Y=S.textMatrix;0!==S.textRise&&(Y=Y.slice(),Y[5]+=S.textRise),S.txtElement.setAttributeNS(null,"transform",`${O(Y)} scale(${F(N)}, -1)`),S.txtElement.setAttributeNS(_,"xml:space","preserve"),S.txtElement.append(S.tspan),S.txtgrp.append(S.txtElement),this._ensureTransformGroup().append(S.txtElement)}setLeadingMoveText(o,l){this.setLeading(-l),this.moveText(o,l)}addFontStyle(o){if(!o.data)throw Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));let l=N(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${l}); }
`}setFont(o){let l=this.current,_=this.commonObjs.get(o[0]),S=o[1];l.font=_,!this.embedFonts||_.missingFile||this.embeddedFonts[_.loadedName]||(this.addFontStyle(_),this.embeddedFonts[_.loadedName]=_),l.fontMatrix=_.fontMatrix||E.FONT_IDENTITY_MATRIX;let T="normal";_.black?T="900":_.bold&&(T="bold");let P=_.italic?"italic":"normal";S<0?(S=-S,l.fontDirection=-1):l.fontDirection=1,l.fontSize=S,l.fontFamily=_.loadedName,l.fontWeight=T,l.fontStyle=P,l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"y",F(-l.y)),l.xcoords=[],l.ycoords=[]}endText(){let o=this.current;o.textRenderingMode&E.TextRenderingMode.ADD_TO_PATH_FLAG&&o.txtElement?.hasChildNodes()&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=D[o]}setLineJoin(o){this.current.lineJoin=L[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,l,_){this.current.strokeColor=E.Util.makeHexColor(o,l,_)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,l,_){this.current.fillColor=E.Util.makeHexColor(o,l,_),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){let l=this.viewport.width,_=this.viewport.height,S=E.Util.inverseTransform(this.transformMatrix),T=E.Util.applyTransform([0,0],S),P=E.Util.applyTransform([0,_],S),M=E.Util.applyTransform([l,0],S),F=E.Util.applyTransform([l,_],S),O=Math.min(T[0],P[0],M[0],F[0]),I=Math.min(T[1],P[1],M[1],F[1]),D=Math.max(T[0],P[0],M[0],F[0]),L=Math.max(T[1],P[1],M[1],F[1]),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x",O),N.setAttributeNS(null,"y",I),N.setAttributeNS(null,"width",D-O),N.setAttributeNS(null,"height",L-I),N.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&N.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(N)}_makeColorN_Pattern(o){return"TilingPattern"===o[0]?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){let l=o[1],_=o[2],S=o[3]||E.IDENTITY_MATRIX,[T,P,M,F]=o[4],O=o[5],I=o[6],D=o[7],L=`shading${V++}`,[N,U,W,z]=E.Util.normalizeRect([...E.Util.applyTransform([T,P],S),...E.Util.applyTransform([M,F],S)]),[H,$]=E.Util.singularValueDecompose2dScale(S),Y=O*H,K=I*$,J=this.svgFactory.createElement("svg:pattern");J.setAttributeNS(null,"id",L),J.setAttributeNS(null,"patternUnits","userSpaceOnUse"),J.setAttributeNS(null,"width",Y),J.setAttributeNS(null,"height",K),J.setAttributeNS(null,"x",`${N}`),J.setAttributeNS(null,"y",`${U}`);let Q=this.svg,Z=this.transformMatrix,tt=this.current.fillColor,te=this.current.strokeColor,ti=this.svgFactory.create(W-N,z-U);if(this.svg=ti,this.transformMatrix=S,2===D){let o=E.Util.makeHexColor(...l);this.current.fillColor=o,this.current.strokeColor=o}return this.executeOpTree(this.convertOpList(_)),this.svg=Q,this.transformMatrix=Z,this.current.fillColor=tt,this.current.strokeColor=te,J.append(ti.childNodes[0]),this.defs.append(J),`url(#${L})`}_makeShadingPattern(o){switch("string"==typeof o&&(o=this.objs.get(o)),o[0]){case"RadialAxial":let l;let _=`shading${V++}`,S=o[3];switch(o[1]){case"axial":let T=o[4],P=o[5];(l=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",_),l.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),l.setAttributeNS(null,"x1",T[0]),l.setAttributeNS(null,"y1",T[1]),l.setAttributeNS(null,"x2",P[0]),l.setAttributeNS(null,"y2",P[1]);break;case"radial":let M=o[4],F=o[5],O=o[6],I=o[7];(l=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",_),l.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),l.setAttributeNS(null,"cx",F[0]),l.setAttributeNS(null,"cy",F[1]),l.setAttributeNS(null,"r",I),l.setAttributeNS(null,"fx",M[0]),l.setAttributeNS(null,"fy",M[1]),l.setAttributeNS(null,"fr",O);break;default:throw Error(`Unknown RadialAxial type: ${o[1]}`)}for(let o of S){let _=this.svgFactory.createElement("svg:stop");_.setAttributeNS(null,"offset",o[0]),_.setAttributeNS(null,"stop-color",o[1]),l.append(_)}return this.defs.append(l),`url(#${_})`;case"Mesh":return(0,E.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw Error(`Unknown IR type: ${o[0]}`)}}setDash(o,l){this.current.dashArray=o,this.current.dashPhase=l}constructPath(o,l){let _=this.current,S=_.x,T=_.y,P=[],M=0;for(let _ of o)switch(0|_){case E.OPS.rectangle:S=l[M++],T=l[M++];let o=l[M++],O=l[M++],I=S+o,D=T+O;P.push("M",F(S),F(T),"L",F(I),F(T),"L",F(I),F(D),"L",F(S),F(D),"Z");break;case E.OPS.moveTo:S=l[M++],T=l[M++],P.push("M",F(S),F(T));break;case E.OPS.lineTo:S=l[M++],T=l[M++],P.push("L",F(S),F(T));break;case E.OPS.curveTo:S=l[M+4],T=l[M+5],P.push("C",F(l[M]),F(l[M+1]),F(l[M+2]),F(l[M+3]),F(S),F(T)),M+=6;break;case E.OPS.curveTo2:P.push("C",F(S),F(T),F(l[M]),F(l[M+1]),F(l[M+2]),F(l[M+3])),S=l[M+2],T=l[M+3],M+=4;break;case E.OPS.curveTo3:S=l[M+2],T=l[M+3],P.push("C",F(l[M]),F(l[M+1]),F(S),F(T),F(S),F(T)),M+=4;break;case E.OPS.closePath:P.push("Z")}P=P.join(" "),_.path&&o.length>0&&o[0]!==E.OPS.rectangle&&o[0]!==E.OPS.moveTo?P=_.path.getAttributeNS(null,"d")+P:(_.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(_.path)),_.path.setAttributeNS(null,"d",P),_.path.setAttributeNS(null,"fill","none"),_.element=_.path,_.setCurrentPoint(S,T)}endPath(){let o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}let l=`clippath${z++}`,_=this.svgFactory.createElement("svg:clipPath");_.setAttributeNS(null,"id",l),_.setAttributeNS(null,"transform",O(this.transformMatrix));let S=o.element.cloneNode(!0);if("evenodd"===this.pendingClip?S.setAttributeNS(null,"clip-rule","evenodd"):S.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,_.append(S),this.defs.append(_),o.activeClipUrl){for(let l of(o.clipGroup=null,this.extraStack))l.clipGroup=null;_.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${l})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){let o=this.current;if(o.path){let l=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",l)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(let[l,_]of o)switch(l){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_);break;case"CA":this.setStrokeAlpha(_);break;case"ca":this.setFillAlpha(_);break;default:(0,E.warn)(`Unimplemented graphic state operator ${l}`)}}fill(){let o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){let o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,l=1){let _=this.current,S=_.dashArray;1!==l&&S.length>0&&(S=S.map(function(o){return l*o})),o.setAttributeNS(null,"stroke",_.strokeColor),o.setAttributeNS(null,"stroke-opacity",_.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",F(_.miterLimit)),o.setAttributeNS(null,"stroke-linecap",_.lineCap),o.setAttributeNS(null,"stroke-linejoin",_.lineJoin),o.setAttributeNS(null,"stroke-width",F(l*_.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",S.map(F).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",F(l*_.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){let l=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!l){(0,E.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(l)}paintInlineImageXObject(o,l){let _=o.width,S=o.height,E=U(o,this.forceDataSchema,!!l),T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y","0"),T.setAttributeNS(null,"width",F(_)),T.setAttributeNS(null,"height",F(S)),this.current.element=T,this.clip("nonzero");let P=this.svgFactory.createElement("svg:image");P.setAttributeNS(I,"xlink:href",E),P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y",F(-S)),P.setAttributeNS(null,"width",F(_)+"px"),P.setAttributeNS(null,"height",F(S)+"px"),P.setAttributeNS(null,"transform",`scale(${F(1/_)} ${F(-1/S)})`),l?l.append(P):this._ensureTransformGroup().append(P)}paintImageMaskXObject(o){let l=this.current,_=o.width,S=o.height,E=l.fillColor;l.maskId=`mask${H++}`;let T=this.svgFactory.createElement("svg:mask");T.setAttributeNS(null,"id",l.maskId);let P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width",F(_)),P.setAttributeNS(null,"height",F(S)),P.setAttributeNS(null,"fill",E),P.setAttributeNS(null,"mask",`url(#${l.maskId})`),this.defs.append(T),this._ensureTransformGroup().append(P),this.paintInlineImageXObject(o,T)}paintFormXObjectBegin(o,l){if(Array.isArray(o)&&6===o.length&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),l){let o=l[2]-l[0],_=l[3]-l[1],S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x",l[0]),S.setAttributeNS(null,"y",l[1]),S.setAttributeNS(null,"width",F(o)),S.setAttributeNS(null,"height",F(_)),this.current.element=S,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){let l=this.svgFactory.create(o.width,o.height),_=this.svgFactory.createElement("svg:defs");l.append(_),this.defs=_;let S=this.svgFactory.createElement("svg:g");return S.setAttributeNS(null,"transform",O(o.transform)),l.append(S),this.svg=S,l}_ensureClipGroup(){if(!this.current.clipGroup){let o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",O(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNodeStream=void 0;var S=_(1),E=_(33);let T=__webpack_require__(172),P=__webpack_require__(2001),M=__webpack_require__(3779),F=__webpack_require__(1987),O=/^file:\/\/\/[a-zA-Z]:\//;function I(o){let l=F.parse(o);return"file:"===l.protocol||l.host?l:/^[a-z]:[/\\]/i.test(o)?F.parse(`file:///${o}`):(l.host||(l.protocol="file:"),l)}class D{constructor(o){this.source=o,this.url=I(o.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&o.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,S.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new H(this):new W(this),this._fullRequestReader}getRangeReader(o,l){if(l<=this._progressiveDataLength)return null;let _=this.isFsUrl?new V(this,o,l):new z(this,o,l);return this._rangeRequestReaders.push(_),_}cancelAllRequests(o){for(let l of(this._fullRequestReader&&this._fullRequestReader.cancel(o),this._rangeRequestReaders.slice(0)))l.cancel(o)}}l.PDFNodeStream=D;class L{constructor(o){this._url=o.url,this._done=!1,this._storedError=null,this.onProgress=null;let l=o.source;this._contentLength=l.length,this._loaded=0,this._filename=null,this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._readableStream=null,this._readCapability=(0,S.createPromiseCapability)(),this._headersCapability=(0,S.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let o=this._readableStream.read();if(null===o)return this._readCapability=(0,S.createPromiseCapability)(),this.read();this._loaded+=o.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});let l=new Uint8Array(o).buffer;return{value:l,done:!1}}cancel(o){if(!this._readableStream){this._error(o);return}this._readableStream.destroy(o)}_error(o){this._storedError=o,this._readCapability.resolve()}_setReadableStream(o){this._readableStream=o,o.on("readable",()=>{this._readCapability.resolve()}),o.on("end",()=>{o.destroy(),this._done=!0,this._readCapability.resolve()}),o.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new S.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class N{constructor(o){this._url=o.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,S.createPromiseCapability)();let l=o.source;this._isStreamingSupported=!l.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let o=this._readableStream.read();if(null===o)return this._readCapability=(0,S.createPromiseCapability)(),this.read();this._loaded+=o.length,this.onProgress&&this.onProgress({loaded:this._loaded});let l=new Uint8Array(o).buffer;return{value:l,done:!1}}cancel(o){if(!this._readableStream){this._error(o);return}this._readableStream.destroy(o)}_error(o){this._storedError=o,this._readCapability.resolve()}_setReadableStream(o){this._readableStream=o,o.on("readable",()=>{this._readCapability.resolve()}),o.on("end",()=>{o.destroy(),this._done=!0,this._readCapability.resolve()}),o.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function U(o,l){return{protocol:o.protocol,auth:o.auth,host:o.hostname,port:o.port,path:o.path,method:"GET",headers:l}}class W extends L{constructor(o){super(o);let l=l=>{if(404===l.statusCode){let o=new S.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o,this._headersCapability.reject(o);return}this._headersCapability.resolve(),this._setReadableStream(l);let _=o=>this._readableStream.headers[o.toLowerCase()],{allowRangeRequests:T,suggestedLength:P}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:o.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=P||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(_)};this._request=null,"http:"===this._url.protocol?this._request=P.request(U(this._url,o.httpHeaders),l):this._request=M.request(U(this._url,o.httpHeaders),l),this._request.on("error",o=>{this._storedError=o,this._headersCapability.reject(o)}),this._request.end()}}class z extends N{constructor(o,l,_){for(let l in super(o),this._httpHeaders={},o.httpHeaders){let _=o.httpHeaders[l];void 0!==_&&(this._httpHeaders[l]=_)}this._httpHeaders.Range=`bytes=${l}-${_-1}`;let E=o=>{if(404===o.statusCode){let o=new S.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(o)};this._request=null,"http:"===this._url.protocol?this._request=P.request(U(this._url,this._httpHeaders),E):this._request=M.request(U(this._url,this._httpHeaders),E),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class H extends L{constructor(o){super(o);let l=decodeURIComponent(this._url.path);O.test(this._url.href)&&(l=l.replace(/^\//,"")),T.lstat(l,(o,_)=>{if(o){"ENOENT"===o.code&&(o=new S.MissingPDFException(`Missing PDF "${l}".`)),this._storedError=o,this._headersCapability.reject(o);return}this._contentLength=_.size,this._setReadableStream(T.createReadStream(l)),this._headersCapability.resolve()})}}class V extends N{constructor(o,l,_){super(o);let S=decodeURIComponent(this._url.path);O.test(this._url.href)&&(S=S.replace(/^\//,"")),this._setReadableStream(T.createReadStream(S,{start:l,end:_-1}))}}},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createResponseStatusError=F,l.extractFilenameFromHeader=M,l.validateRangeRequestCapabilities=P,l.validateResponseStatus=O;var S=_(1),E=_(34),T=_(8);function P({getResponseHeader:o,isHttp:l,rangeChunkSize:_,disableRange:S}){let E={allowRangeRequests:!1,suggestedLength:void 0},T=parseInt(o("Content-Length"),10);if(!Number.isInteger(T)||(E.suggestedLength=T,T<=2*_||S||!l||"bytes"!==o("Accept-Ranges")))return E;let P=o("Content-Encoding")||"identity";return"identity"!==P||(E.allowRangeRequests=!0),E}function M(o){let l=o("Content-Disposition");if(l){let o=(0,E.getFilenameFromContentDispositionHeader)(l);if(o.includes("%"))try{o=decodeURIComponent(o)}catch(o){}if((0,T.isPdfFile)(o))return o}return null}function F(o,l){return 404===o||0===o&&l.startsWith("file:")?new S.MissingPDFException('Missing PDF "'+l+'".'):new S.UnexpectedResponseException(`Unexpected server response (${o}) while retrieving PDF "${l}".`,o)}function O(o){return 200===o||206===o}},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getFilenameFromContentDispositionHeader=E;var S=_(1);function E(o){let l=!0,_=E("filename\\*","i").exec(o);if(_){let o=F(_=_[1]);return P(o=I(o=O(o=unescape(o))))}if(_=M(o)){let o=I(_);return P(o)}if(_=E("filename","i").exec(o)){let o=F(_=_[1]);return P(o=I(o))}function E(o,l){return RegExp("(?:^|;)\\s*"+o+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',l)}function T(o,_){if(o){if(!/^[\x00-\xFF]+$/.test(_))return _;try{let E=new TextDecoder(o,{fatal:!0}),T=(0,S.stringToBytes)(_);_=E.decode(T),l=!1}catch(o){}}return _}function P(o){return l&&/[\x80-\xff]/.test(o)&&(o=T("utf-8",o),l&&(o=T("iso-8859-1",o))),o}function M(o){let l;let _=[],S=E("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(l=S.exec(o));){let[,o,S,E]=l;if((o=parseInt(o,10))in _){if(0===o)break;continue}_[o]=[S,E]}let T=[];for(let o=0;o<_.length&&(o in _);++o){let[l,S]=_[o];S=F(S),l&&(S=unescape(S),0===o&&(S=O(S))),T.push(S)}return T.join("")}function F(o){if(o.startsWith('"')){let l=o.slice(1).split('\\"');for(let o=0;o<l.length;++o){let _=l[o].indexOf('"');-1!==_&&(l[o]=l[o].slice(0,_),l.length=o+1),l[o]=l[o].replace(/\\(.)/g,"$1")}o=l.join('"')}return o}function O(o){let l=o.indexOf("'");if(-1===l)return o;let _=o.slice(0,l),S=o.slice(l+1),E=S.replace(/^[^']*'/,"");return T(_,E)}function I(o){return!o.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(o)?o:o.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(o,l,_,S){if("q"===_||"Q"===_)return T(l,S=(S=S.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(o,l){return String.fromCharCode(parseInt(l,16))}));try{S=atob(S)}catch(o){}return T(l,S)})}return""}},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNetworkStream=void 0;var S=_(1),E=_(33);let T=200,P=206;function M(o){let l=o.response;if("string"!=typeof l)return l;let _=(0,S.stringToBytes)(l);return _.buffer}class F{constructor(o,l={}){this.url=o,this.isHttp=/^https?:/i.test(o),this.httpHeaders=this.isHttp&&l.httpHeaders||Object.create(null),this.withCredentials=l.withCredentials||!1,this.getXhr=l.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(o,l,_){let S={begin:o,end:l};for(let o in _)S[o]=_[o];return this.request(S)}requestFull(o){return this.request(o)}request(o){let l=this.getXhr(),_=this.currXhrId++,S=this.pendingRequests[_]={xhr:l};for(let o in l.open("GET",this.url),l.withCredentials=this.withCredentials,this.httpHeaders){let _=this.httpHeaders[o];void 0!==_&&l.setRequestHeader(o,_)}return this.isHttp&&"begin"in o&&"end"in o?(l.setRequestHeader("Range",`bytes=${o.begin}-${o.end-1}`),S.expectedStatus=P):S.expectedStatus=T,l.responseType="arraybuffer",o.onError&&(l.onerror=function(_){o.onError(l.status)}),l.onreadystatechange=this.onStateChange.bind(this,_),l.onprogress=this.onProgress.bind(this,_),S.onHeadersReceived=o.onHeadersReceived,S.onDone=o.onDone,S.onError=o.onError,S.onProgress=o.onProgress,l.send(null),_}onProgress(o,l){let _=this.pendingRequests[o];_&&_.onProgress?.(l)}onStateChange(o,l){let _=this.pendingRequests[o];if(!_)return;let S=_.xhr;if(S.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),4!==S.readyState||!(o in this.pendingRequests))return;if(delete this.pendingRequests[o],0===S.status&&this.isHttp){_.onError?.(S.status);return}let E=S.status||T,F=E===T&&_.expectedStatus===P;if(!F&&E!==_.expectedStatus){_.onError?.(S.status);return}let O=M(S);if(E===P){let o=S.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(o);_.onDone({begin:parseInt(l[1],10),chunk:O})}else O?_.onDone({begin:0,chunk:O}):_.onError?.(S.status)}getRequestXhr(o){return this.pendingRequests[o].xhr}isPendingRequest(o){return o in this.pendingRequests}abortRequest(o){let l=this.pendingRequests[o].xhr;delete this.pendingRequests[o],l.abort()}}class O{constructor(o){this._source=o,this._manager=new F(o.url,{httpHeaders:o.httpHeaders,withCredentials:o.withCredentials}),this._rangeChunkSize=o.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(o){let l=this._rangeRequestReaders.indexOf(o);l>=0&&this._rangeRequestReaders.splice(l,1)}getFullReader(){return(0,S.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new I(this._manager,this._source),this._fullRequestReader}getRangeReader(o,l){let _=new D(this._manager,o,l);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(o){for(let l of(this._fullRequestReader?.cancel(o),this._rangeRequestReaders.slice(0)))l.cancel(o)}}l.PDFNetworkStream=O;class I{constructor(o,l){this._manager=o;let _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=l.url,this._fullRequestId=o.requestFull(_),this._headersReceivedCapability=(0,S.createPromiseCapability)(),this._disableRange=l.disableRange||!1,this._contentLength=l.length,this._rangeChunkSize=l.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let o=this._fullRequestId,l=this._manager.getRequestXhr(o),_=o=>l.getResponseHeader(o),{allowRangeRequests:S,suggestedLength:T}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});S&&(this._isRangeSupported=!0),this._contentLength=T||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(o),this._headersReceivedCapability.resolve()}_onDone(o){if(o){if(this._requests.length>0){let l=this._requests.shift();l.resolve({value:o.chunk,done:!1})}else this._cachedChunks.push(o.chunk)}if(this._done=!0,!(this._cachedChunks.length>0)){for(let o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(o){for(let l of(this._storedError=(0,E.createResponseStatusError)(o,this._url),this._headersReceivedCapability.reject(this._storedError),this._requests))l.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(o){this.onProgress?.({loaded:o.loaded,total:o.lengthComputable?o.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){let o=this._cachedChunks.shift();return{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};let o=(0,S.createPromiseCapability)();return this._requests.push(o),o.promise}cancel(o){for(let l of(this._done=!0,this._headersReceivedCapability.reject(o),this._requests))l.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class D{constructor(o,l,_){this._manager=o;let S={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=o.url,this._requestId=o.requestRange(l,_,S),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(o){let l=o.chunk;if(this._requests.length>0){let o=this._requests.shift();o.resolve({value:l,done:!1})}else this._queuedChunk=l;for(let o of(this._done=!0,this._requests))o.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(o){for(let l of(this._storedError=(0,E.createResponseStatusError)(o,this._url),this._requests))l.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(o){this.isStreamingSupported||this.onProgress?.({loaded:o.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){let o=this._queuedChunk;return this._queuedChunk=null,{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};let o=(0,S.createPromiseCapability)();return this._requests.push(o),o.promise}cancel(o){for(let o of(this._done=!0,this._requests))o.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(o,l,_)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFFetchStream=void 0;var S=_(1),E=_(33);function T(o,l,_){return{method:"GET",headers:o,signal:_.signal,mode:"cors",credentials:l?"include":"same-origin",redirect:"follow"}}function P(o){let l=new Headers;for(let _ in o){let S=o[_];void 0!==S&&l.append(_,S)}return l}class M{constructor(o){this.source=o,this.isHttp=/^https?:/i.test(o.url),this.httpHeaders=this.isHttp&&o.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,S.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new F(this),this._fullRequestReader}getRangeReader(o,l){if(l<=this._progressiveDataLength)return null;let _=new O(this,o,l);return this._rangeRequestReaders.push(_),_}cancelAllRequests(o){for(let l of(this._fullRequestReader&&this._fullRequestReader.cancel(o),this._rangeRequestReaders.slice(0)))l.cancel(o)}}l.PDFFetchStream=M;class F{constructor(o){this._stream=o,this._reader=null,this._loaded=0,this._filename=null;let l=o.source;this._withCredentials=l.withCredentials||!1,this._contentLength=l.length,this._headersCapability=(0,S.createPromiseCapability)(),this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._headers=P(this._stream.httpHeaders);let _=l.url;fetch(_,T(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!(0,E.validateResponseStatus)(o.status))throw(0,E.createResponseStatusError)(o.status,_);this._reader=o.body.getReader(),this._headersCapability.resolve();let l=l=>o.headers.get(l),{allowRangeRequests:T,suggestedLength:P}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=P||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new S.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:o,done:l}=await this._reader.read();if(l)return{value:o,done:l};this._loaded+=o.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});let _=new Uint8Array(o).buffer;return{value:_,done:!1}}cancel(o){this._reader&&this._reader.cancel(o),this._abortController.abort()}}class O{constructor(o,l,_){this._stream=o,this._reader=null,this._loaded=0;let M=o.source;this._withCredentials=M.withCredentials||!1,this._readCapability=(0,S.createPromiseCapability)(),this._isStreamingSupported=!M.disableStream,this._abortController=new AbortController,this._headers=P(this._stream.httpHeaders),this._headers.append("Range",`bytes=${l}-${_-1}`);let F=M.url;fetch(F,T(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!(0,E.validateResponseStatus)(o.status))throw(0,E.createResponseStatusError)(o.status,F);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:o,done:l}=await this._reader.read();if(l)return{value:o,done:l};this._loaded+=o.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded});let _=new Uint8Array(o).buffer;return{value:_,done:!1}}cancel(o){this._reader&&this._reader.cancel(o),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(o){var l=__webpack_module_cache__[o];if(void 0!==l)return l.exports;var _=__webpack_module_cache__[o]={exports:{}};return __webpack_modules__[o](_,_.exports,__w_pdfjs_require__),_.exports}var __webpack_exports__={};return(()=>{var o=__webpack_exports__;Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"AnnotationEditorLayer",{enumerable:!0,get:function(){return E.AnnotationEditorLayer}}),Object.defineProperty(o,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return l.AnnotationEditorParamsType}}),Object.defineProperty(o,"AnnotationEditorType",{enumerable:!0,get:function(){return l.AnnotationEditorType}}),Object.defineProperty(o,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return T.AnnotationEditorUIManager}}),Object.defineProperty(o,"AnnotationLayer",{enumerable:!0,get:function(){return P.AnnotationLayer}}),Object.defineProperty(o,"AnnotationMode",{enumerable:!0,get:function(){return l.AnnotationMode}}),Object.defineProperty(o,"CMapCompressionType",{enumerable:!0,get:function(){return l.CMapCompressionType}}),Object.defineProperty(o,"GlobalWorkerOptions",{enumerable:!0,get:function(){return M.GlobalWorkerOptions}}),Object.defineProperty(o,"InvalidPDFException",{enumerable:!0,get:function(){return l.InvalidPDFException}}),Object.defineProperty(o,"LoopbackPort",{enumerable:!0,get:function(){return _.LoopbackPort}}),Object.defineProperty(o,"MissingPDFException",{enumerable:!0,get:function(){return l.MissingPDFException}}),Object.defineProperty(o,"OPS",{enumerable:!0,get:function(){return l.OPS}}),Object.defineProperty(o,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _.PDFDataRangeTransport}}),Object.defineProperty(o,"PDFDateString",{enumerable:!0,get:function(){return S.PDFDateString}}),Object.defineProperty(o,"PDFWorker",{enumerable:!0,get:function(){return _.PDFWorker}}),Object.defineProperty(o,"PasswordResponses",{enumerable:!0,get:function(){return l.PasswordResponses}}),Object.defineProperty(o,"PermissionFlag",{enumerable:!0,get:function(){return l.PermissionFlag}}),Object.defineProperty(o,"PixelsPerInch",{enumerable:!0,get:function(){return S.PixelsPerInch}}),Object.defineProperty(o,"RenderingCancelledException",{enumerable:!0,get:function(){return S.RenderingCancelledException}}),Object.defineProperty(o,"SVGGraphics",{enumerable:!0,get:function(){return I.SVGGraphics}}),Object.defineProperty(o,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return l.UNSUPPORTED_FEATURES}}),Object.defineProperty(o,"UnexpectedResponseException",{enumerable:!0,get:function(){return l.UnexpectedResponseException}}),Object.defineProperty(o,"Util",{enumerable:!0,get:function(){return l.Util}}),Object.defineProperty(o,"VerbosityLevel",{enumerable:!0,get:function(){return l.VerbosityLevel}}),Object.defineProperty(o,"XfaLayer",{enumerable:!0,get:function(){return D.XfaLayer}}),Object.defineProperty(o,"build",{enumerable:!0,get:function(){return _.build}}),Object.defineProperty(o,"createPromiseCapability",{enumerable:!0,get:function(){return l.createPromiseCapability}}),Object.defineProperty(o,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return l.createValidAbsoluteUrl}}),Object.defineProperty(o,"getDocument",{enumerable:!0,get:function(){return _.getDocument}}),Object.defineProperty(o,"getFilenameFromUrl",{enumerable:!0,get:function(){return S.getFilenameFromUrl}}),Object.defineProperty(o,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return S.getPdfFilenameFromUrl}}),Object.defineProperty(o,"getXfaPageViewport",{enumerable:!0,get:function(){return S.getXfaPageViewport}}),Object.defineProperty(o,"isPdfFile",{enumerable:!0,get:function(){return S.isPdfFile}}),Object.defineProperty(o,"loadScript",{enumerable:!0,get:function(){return S.loadScript}}),Object.defineProperty(o,"renderTextLayer",{enumerable:!0,get:function(){return O.renderTextLayer}}),Object.defineProperty(o,"shadow",{enumerable:!0,get:function(){return l.shadow}}),Object.defineProperty(o,"version",{enumerable:!0,get:function(){return _.version}});var l=__w_pdfjs_require__(1),_=__w_pdfjs_require__(4),S=__w_pdfjs_require__(8),E=__w_pdfjs_require__(22),T=__w_pdfjs_require__(7),P=__w_pdfjs_require__(27),M=__w_pdfjs_require__(15),F=__w_pdfjs_require__(3),O=__w_pdfjs_require__(30),I=__w_pdfjs_require__(31),D=__w_pdfjs_require__(29);if(F.isNodeJS){let{PDFNodeStream:o}=__w_pdfjs_require__(32);(0,_.setPDFNetworkStreamFactory)(l=>new o(l))}else{let{PDFNetworkStream:o}=__w_pdfjs_require__(35),{PDFFetchStream:l}=__w_pdfjs_require__(36);(0,_.setPDFNetworkStreamFactory)(_=>(0,S.isValidFetchUrl)(_.url)?new l(_):new o(_))}})(),__webpack_exports__})())}}]);